{% load static %}
<html>
    <head>
        <title>Annotations volume #{{volume.id}}</title>
        <script src="{% static 'js/jquery-3.6.1.js' %}"></script>
        <script src="{% static 'js/script.js' %}"></script>
        <script src="{% static 'fontawesomefree/js/all.min.js' %}"></script>
        <link rel="stylesheet" href="{% static 'css/admin_style.css' %}">
    </head>
    <body>
        <i class="fa-solid fa-arrows-rotate"></i> <a href="javascript:location.reload();" title="Actualiser la page courante">Actualiser</a>
        <div style="color:white;background-color:#79AEC8;padding:10px;margin:10px 0;">
            <h3 style="margin:0;">Volume #{{ volume.id }} : {{ volume.title }}</h3>
        </div>
        <div>
            <label for="startIndex">Vue de d√©but :</label>
            <input type="number" id="startIndex" value="1" min="1" max="{{ canvas_annos|length }}">
            <label for="endIndex">Vue de fin :</label>
            <input type="number" id="endIndex" value="2" min="1" max="{{ canvas_annos|length }}">
            <button id="delete_illustrations">Supprimer illustrations</button>
        </div>
        <div class="row">
            {% for column in 2|range_filter %}
                <div class="column">
                    <table class="anno-table">
                        {% for annos, url in canvas_annos %}
                            {% if column == 0 and not forloop.counter|divisibleby:2 or column == 1 and forloop.counter|divisibleby:2 %}
                                <tr>
                                    <td class="anno-td" style="background-color:#F8F8F8;">
                                        <b>Vue {{ forloop.counter }}</b>
                                        <a href="http://localhost:8888/index.html?iiif-content={{ url_manifest }}&canvas={{ forloop.counter }}" target="_blank">
                                            <small>(Modifier l'extraction)</small>
                                        </a><br>
                                        <a href="{{ url }}" target="_blank">
                                            <img src="{{ url|replace_nth_part_of_url:',120;7' }}">
                                        </a>
                                    </td>
                                    {% for anno, bbox in annos %}
                                        <td id="ill_{{ bbox }}" class="anno-td">
                                            {% with region=anno|add:';6' size=',50;7' %}
                                                <a href="{{ url|replace_nth_part_of_url:region }}" target="_blank">
                                                    <img src="{{ url|replace_nth_part_of_url:region|replace_nth_part_of_url:size }}">
                                                </a>
                                            {% endwith %}
                                            <br>
                                            <input id="bbox_{{ bbox }}" name="{{ bbox }}" type="checkbox"> Supprimer
                                            <span id="message_{{ bbox }}" style="color:#FF0000;"></span>
                                        </td>
                                    {% endfor %}
                                </tr>
                            {% endif %}
                        {% endfor %}
                    </table>
                </div>
            {% endfor %}
        </div>
    </body>
</html>