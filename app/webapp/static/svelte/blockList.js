var blockList=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function c(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s,r;function i(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function a(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function h(){return m("")}function b(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function k(t,e){e=""+e,t.data!==e&&(t.data=e)}function v(t){r=t}function y(){const t=function(){if(!r)throw new Error("Function called outside component initialization");return r}();return(e,n,{cancelable:o=!1}={})=>{const c=t.$$.callbacks[e];if(c){const l=function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const c=document.createEvent("CustomEvent");return c.initCustomEvent(t,n,o,e),c}(e,n,{cancelable:o});return c.slice().forEach((e=>{e.call(t,l)})),!l.defaultPrevented}return!0}}const x=[],_=[];let w=[];const L=[],S=Promise.resolve();let E=!1;function A(t){w.push(t)}const j=new Set;let C=0;function N(){if(0!==C)return;const t=r;do{try{for(;C<x.length;){const t=x[C];C++,v(t),O(t.$$)}}catch(t){throw x.length=0,C=0,t}for(v(null),x.length=0,C=0;_.length;)_.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];j.has(e)||(j.add(e),e())}w.length=0}while(x.length);for(;L.length;)L.pop()();E=!1,j.clear(),v(t)}function O(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const P=new Set;let R;function M(t,e){t&&t.i&&(P.delete(t),t.i(e))}function V(t,e,n,o){if(t&&t.o){if(P.has(t))return;P.add(t),R.c.push((()=>{P.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function H(t,e){V(t,1,1,(()=>{e.delete(t.key)}))}function z(t,n,l,s){const{fragment:r,after_update:i}=t.$$;r&&r.m(n,l),s||A((()=>{const n=t.$$.on_mount.map(e).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(A)}function B(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];w.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),w=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function I(t,e){-1===t.$$.dirty[0]&&(x.push(t),E||(E=!0,S.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function T(e,c,l,s,i,a,u,f=[-1]){const p=r;v(e);const m=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:c.target||p.$$.root};u&&u(m.root);let g=!1;if(m.ctx=l?l(e,c.props||{},((t,n,...o)=>{const c=o.length?o[0]:n;return m.ctx&&i(m.ctx[t],m.ctx[t]=c)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](c),g&&I(e,t)),n})):[],m.update(),g=!0,o(m.before_update),m.fragment=!!s&&s(m.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();c.intro&&M(e.$$.fragment),z(e,c.target,c.anchor,c.customElement),N()}v(p)}class q{$destroy(){B(this,1),this.$destroy=t}$on(e,n){if(!c(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function D(t=null,e="full",n="full"){if(!t)return"https://via.placeholder.com/96x96?text=No+Image";if((t=t.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const o=t[t.length-1].includes(",")?t.pop().replace(".jpg",""):e,c=t.join("_").replace(".jpg","");return`${CANTALOUPE_APP_URL??"http://localhost:8182"}/iiif/2/${c}.jpg/${o}/${n}/0/default.jpg`}function U(t,e,n){const o=t.slice();return o[7]=e[n][0],o[8]=e[n][1],o}function F(t){let e,n,o,c,l,s,r,p,m,h;function k(t,e){return t[0]?K:J}let v=k(t),y=v(t);return{c(){e=f("div"),n=f("figure"),o=f("img"),s=g(),r=f("button"),y.c(),i(o.src,c=D(t[1].img,"full","250,"))||$(o,"src",c),$(o,"alt","Extracted region"),$(n,"id",l="region-"+t[1].id),$(n,"class","image is-96x96"),$(r,"class","button"),$(r,"id",p="set-"+t[1].id),$(e,"class","region block card")},m(c,l){u(c,e,l),a(e,n),a(n,o),a(e,s),a(e,r),y.m(r,null),m||(h=b(r,"click",t[5]),m=!0)},p(t,e){2&e&&!i(o.src,c=D(t[1].img,"full","250,"))&&$(o,"src",c),2&e&&l!==(l="region-"+t[1].id)&&$(n,"id",l),v===(v=k(t))&&y?y.p(t,e):(y.d(1),y=v(t),y&&(y.c(),y.m(r,null))),2&e&&p!==(p="set-"+t[1].id)&&$(r,"id",p)},d(t){t&&d(e),y.d(),m=!1,h()}}}function G(t){let e,n,o,c,l,s,r,h,v,y,x,_,w,L,S,E,A,j,C,N,O,P,R,M,V,H,z,B,I,T,q,F,G,J,K,et,nt,ot,ct,lt=t[1].type+"",st=t[1].id+"",rt=t[1].title+"",it=t[1].user+"",at=t[1].updated_at+"",ut=t[1].is_public&&Q();function dt(t,e){return"en"===t[2]?X:W}let ft=dt(t),pt=ft(t);function mt(t,e){return t[0]?Z:Y}let gt=mt(t),ht=gt(t),bt=Object.entries(t[1].metadata),$t=[];for(let e=0;e<bt.length;e+=1)$t[e]=tt(U(t,bt,e));return{c(){e=f("div"),n=f("div"),o=f("div"),c=f("div"),l=f("div"),s=f("figure"),r=f("img"),v=g(),y=f("div"),x=f("a"),_=f("span"),w=m(lt),L=m(" #"),S=m(st),E=g(),A=m(rt),j=g(),ut&&ut.c(),N=g(),O=f("p"),P=m(it),R=g(),M=f("span"),V=m(at),H=g(),z=f("div"),B=f("button"),pt.c(),I=g(),T=p("svg"),ht.c(),G=g(),J=f("div"),K=f("table"),et=f("tbody");for(let t=0;t<$t.length;t+=1)$t[t].c();i(r.src,h=D(t[1].img,"full","250,"))||$(r,"src",h),$(r,"alt","Record illustration"),$(s,"class","card image is-96x96 svelte-alck8k"),$(l,"class","media-left"),$(_,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),$(x,"href",C="/"+t[1].class.toLowerCase()+"/"+t[1].id),$(x,"class","title is-4 hoverable pt-2 svelte-alck8k"),$(M,"class","tag p-1 mb-1"),$(O,"class","subtitle is-6 mb-0 ml-2 pt-2"),$(y,"class","media-content"),$(T,"xmlns","http://www.w3.org/2000/svg"),$(T,"viewBox","0 0 384 512"),$(T,"class","svelte-alck8k"),$(B,"class",q="button "+(t[0]?"is-inverted":"")),$(B,"id",F="set-"+t[1].id),$(z,"class","media-right"),$(c,"class","media"),$(K,"class","table pl-2 is-fullwidth"),$(J,"class","content"),$(o,"class","card-content"),$(n,"id",nt="block-"+t[1].id),$(n,"class","card"),$(e,"class","block")},m(i,d){u(i,e,d),a(e,n),a(n,o),a(o,c),a(c,l),a(l,s),a(s,r),a(c,v),a(c,y),a(y,x),a(x,_),a(_,w),a(_,L),a(_,S),a(x,E),a(x,A),a(x,j),ut&&ut.m(x,null),a(y,N),a(y,O),a(O,P),a(O,R),a(O,M),a(M,V),a(c,H),a(c,z),a(z,B),pt.m(B,null),a(B,I),a(B,T),ht.m(T,null),a(o,G),a(o,J),a(J,K),a(K,et);for(let t=0;t<$t.length;t+=1)$t[t]&&$t[t].m(et,null);ot||(ct=b(B,"click",t[4]),ot=!0)},p(t,e){if(2&e&&!i(r.src,h=D(t[1].img,"full","250,"))&&$(r,"src",h),2&e&&lt!==(lt=t[1].type+"")&&k(w,lt),2&e&&st!==(st=t[1].id+"")&&k(S,st),2&e&&rt!==(rt=t[1].title+"")&&k(A,rt),t[1].is_public?ut||(ut=Q(),ut.c(),ut.m(x,null)):ut&&(ut.d(1),ut=null),2&e&&C!==(C="/"+t[1].class.toLowerCase()+"/"+t[1].id)&&$(x,"href",C),2&e&&it!==(it=t[1].user+"")&&k(P,it),2&e&&at!==(at=t[1].updated_at+"")&&k(V,at),ft===(ft=dt(t))&&pt?pt.p(t,e):(pt.d(1),pt=ft(t),pt&&(pt.c(),pt.m(B,I))),gt!==(gt=mt(t))&&(ht.d(1),ht=gt(t),ht&&(ht.c(),ht.m(T,null))),1&e&&q!==(q="button "+(t[0]?"is-inverted":""))&&$(B,"class",q),2&e&&F!==(F="set-"+t[1].id)&&$(B,"id",F),2&e){let n;for(bt=Object.entries(t[1].metadata),n=0;n<bt.length;n+=1){const o=U(t,bt,n);$t[n]?$t[n].p(o,e):($t[n]=tt(o),$t[n].c(),$t[n].m(et,null))}for(;n<$t.length;n+=1)$t[n].d(1);$t.length=bt.length}2&e&&nt!==(nt="block-"+t[1].id)&&$(n,"id",nt)},d(t){t&&d(e),ut&&ut.d(),pt.d(),ht.d(),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}($t,t),ot=!1,ct()}}}function J(t){let e,n,o,c="en"===t[2]?"Add to set":"Ajouter à la sélection";return{c(){e=f("i"),n=g(),o=m(c),$(e,"class","fa-regular fa-bookmark")},m(t,c){u(t,e,c),u(t,n,c),u(t,o,c)},p(t,e){4&e&&c!==(c="en"===t[2]?"Add to set":"Ajouter à la sélection")&&k(o,c)},d(t){t&&d(e),t&&d(n),t&&d(o)}}}function K(t){let e,n,o,c="en"===t[2]?"Remove from set":"Retirer de la sélection";return{c(){e=f("i"),n=g(),o=m(c),$(e,"class","fa-solid fa-bookmark")},m(t,c){u(t,e,c),u(t,n,c),u(t,o,c)},p(t,e){4&e&&c!==(c="en"===t[2]?"Remove from set":"Retirer de la sélection")&&k(o,c)},d(t){t&&d(e),t&&d(n),t&&d(o)}}}function Q(t){let e;return{c(){e=f("span"),e.innerHTML='<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span> \n                                    <span style="margin-left: -0.5rem">Public</span>',$(e,"class","pl-3 icon-text is-size-7 is-center has-text-weight-normal")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function W(t){let e,n,o=t[0]?"Retirer de":"Ajouter à la";return{c(){e=m(o),n=m(" sélection")},m(t,o){u(t,e,o),u(t,n,o)},p(t,n){1&n&&o!==(o=t[0]?"Retirer de":"Ajouter à la")&&k(e,o)},d(t){t&&d(e),t&&d(n)}}}function X(t){let e,n,o=t[0]?"Remove from":"Add to";return{c(){e=m(o),n=m(" set")},m(t,o){u(t,e,o),u(t,n,o)},p(t,n){1&n&&o!==(o=t[0]?"Remove from":"Add to")&&k(e,o)},d(t){t&&d(e),t&&d(n)}}}function Y(t){let e;return{c(){e=p("path"),$(e,"fill","currentColor"),$(e,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function Z(t){let e;return{c(){e=p("path"),$(e,"fill","currentColor"),$(e,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function tt(t){let e,n,o,c,l,s,r,i=t[7]+"",p=t[8]+"";return{c(){e=f("tr"),n=f("th"),o=m(i),c=g(),l=f("td"),s=m(p),r=g(),$(n,"class","is-narrow is-3")},m(t,i){u(t,e,i),a(e,n),a(n,o),a(e,c),a(e,l),a(l,s),a(e,r)},p(t,e){2&e&&i!==(i=t[7]+"")&&k(o,i),2&e&&p!==(p=t[8]+"")&&k(s,p)},d(t){t&&d(e)}}}function et(e){let n,o;function c(t,e){return 2&e&&(n=null),null==n&&(n=!!t[1].hasOwnProperty("metadata")),n?G:F}let l=c(e,-1),s=l(e);return{c(){s.c(),o=h()},m(t,e){s.m(t,e),u(t,o,e)},p(t,[e]){l===(l=c(t,e))&&s?s.p(t,e):(s.d(1),s=l(t),s&&(s.c(),s.m(o.parentNode,o)))},i:t,o:t,d(t){s.d(t),t&&d(o)}}}function nt(t,e,n){let{block:o}=e,{appLang:c}=e,{isSelected:l=!1}=e;const s=y();function r(t){s("toggleSelection",{block:t}),n(0,l=!l)}return t.$$set=t=>{"block"in t&&n(1,o=t.block),"appLang"in t&&n(2,c=t.appLang),"isSelected"in t&&n(0,l=t.isSelected)},[l,o,c,r,()=>r(o),()=>r(o)]}class ot extends q{constructor(t){super(),T(this,t,nt,et,l,{block:1,appLang:2,isSelected:0})}}function ct(t,e,n){const o=t.slice();return o[9]=e[n],o[10]=e,o[11]=n,o}function lt(t,e){let n,o,c,l;function s(t){e[5](t,e[9])}let r={block:e[9],appLang:e[1]};return void 0!==e[9].isSelected&&(r.isSelected=e[9].isSelected),o=new ot({props:r}),_.push((()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(o,"isSelected",s))),o.$on("toggleSelection",e[3]),{key:t,first:null,c(){n=h(),function(t){t&&t.c()}(o.$$.fragment),this.first=n},m(t,e){u(t,n,e),z(o,t,e),l=!0},p(t,n){e=t;const l={};var s;1&n&&(l.block=e[9]),2&n&&(l.appLang=e[1]),!c&&1&n&&(c=!0,l.isSelected=e[9].isSelected,s=()=>c=!1,L.push(s)),o.$set(l)},i(t){l||(M(o.$$.fragment,t),l=!0)},o(t){V(o.$$.fragment,t),l=!1},d(t){t&&d(n),B(o,t)}}}function st(t){let e,n,c,l,s,r,i,p,h,v,y,x,_,w,L,S,E,A,j,C,N,O,P,z,B,I,T,q=[],D=new Map,U="en"===t[1]?"Selected documents":"Documents sélectionnés",F=t[0];const G=t=>t[9].id;for(let e=0;e<F.length;e+=1){let n=ct(t,F,e),o=G(n);D.set(o,q[e]=lt(o,n))}return{c(){e=f("div"),n=f("button"),c=f("i"),l=m("\n        ("),s=f("span"),r=m(t[2]),i=m(")"),p=g(),h=f("div");for(let t=0;t<q.length;t+=1)q[t].c();v=g(),y=f("div"),x=f("div"),_=g(),w=f("div"),L=f("header"),S=f("i"),E=g(),A=m(U),j=g(),C=f("button"),N=g(),O=f("section"),O.innerHTML='<ul id="selected-blocks" class="list-group"></ul>',P=g(),z=f("button"),$(c,"class","fa-solid fa-book-bookmark"),$(s,"id","selection-count"),$(n,"class","js-modal-trigger"),$(n,"data-target","selection-modal"),$(e,"class","button-container"),$(x,"class","modal-background"),$(S,"class","fa-solid fa-book-bookmark"),$(C,"class","delete"),$(C,"aria-label","close"),$(L,"class","modal-card-head"),$(O,"class","modal-card-body"),$(z,"class","modal-close is-large"),$(z,"aria-label","close"),$(w,"class","modal-content"),$(y,"id","selection-modal"),$(y,"class","modal fade"),$(y,"tabindex","-1"),$(y,"aria-labelledby","selection-modal-label"),$(y,"aria-hidden","true")},m(t,o){u(t,e,o),a(e,n),a(n,c),a(n,l),a(n,s),a(s,r),a(n,i),u(t,p,o),u(t,h,o);for(let t=0;t<q.length;t+=1)q[t]&&q[t].m(h,null);u(t,v,o),u(t,y,o),a(y,x),a(y,_),a(y,w),a(w,L),a(L,S),a(L,E),a(L,A),a(L,j),a(L,C),a(w,N),a(w,O),a(w,P),a(w,z),B=!0,I||(T=b(n,"click",rt),I=!0)},p(t,[e]){(!B||4&e)&&k(r,t[2]),11&e&&(F=t[0],R={r:0,c:[],p:R},q=function(t,e,n,c,l,s,r,i,a,u,d,f){let p=t.length,m=s.length,g=p;const h={};for(;g--;)h[t[g].key]=g;const b=[],$=new Map,k=new Map,v=[];for(g=m;g--;){const t=f(l,s,g),o=n(t);let i=r.get(o);i?c&&v.push((()=>i.p(t,e))):(i=u(o,t),i.c()),$.set(o,b[g]=i),o in h&&k.set(o,Math.abs(g-h[o]))}const y=new Set,x=new Set;function _(t){M(t,1),t.m(i,d),r.set(t.key,t),d=t.first,m--}for(;p&&m;){const e=b[m-1],n=t[p-1],o=e.key,c=n.key;e===n?(d=e.first,p--,m--):$.has(c)?!r.has(o)||y.has(o)?_(e):x.has(c)?p--:k.get(o)>k.get(c)?(x.add(o),_(e)):(y.add(c),p--):(a(n,r),p--)}for(;p--;){const e=t[p];$.has(e.key)||a(e,r)}for(;m;)_(b[m-1]);return o(v),b}(q,e,G,1,t,F,D,h,H,lt,null,ct),R.r||o(R.c),R=R.p),(!B||2&e)&&U!==(U="en"===t[1]?"Selected documents":"Documents sélectionnés")&&k(A,U)},i(t){if(!B){for(let t=0;t<F.length;t+=1)M(q[t]);B=!0}},o(t){for(let t=0;t<q.length;t+=1)V(q[t]);B=!1},d(t){t&&d(e),t&&d(p),t&&d(h);for(let t=0;t<q.length;t+=1)q[t].d();t&&d(v),t&&d(y),I=!1,T()}}}function rt(){}function it(t,e,n){let o,{blocks:c=[]}=e,{appLang:l="en"}=e,s={};return t.$$set=t=>{"blocks"in t&&n(0,c=t.blocks),"appLang"in t&&n(1,l=t.appLang)},t.$$.update=()=>{16&t.$$.dirty&&n(2,o=Object.keys(s).length)},[c,l,o,function(t){const{block:e}=t.detail;(t=>s.hasOwnProperty(t.id))(e)?function(t){const{[t]:e,...o}=s;n(4,s=o)}(e.id):function(t){n(4,s={...s,[t.id]:t}),console.log(s)}(e)},s,function(e,o){t.$$.not_equal(o.isSelected,e)&&(o.isSelected=e,n(0,c))}]}const at=JSON.parse(document.getElementById("record-data").textContent);APP_LANG;return new class extends q{constructor(t){super(),T(this,t,it,st,l,{blocks:0,appLang:1})}}({target:document.getElementById("block-list"),props:{blocks:at}})}();
//# sourceMappingURL=blockList.js.map
