var recordList=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function l(){return Object.create(null)}function c(e){e.forEach(n)}function s(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let r;function i(e,t){return r||(r=document.createElement("a")),r.href=t,e===r.href}function a(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function u(e){let t;return a(e,(e=>t=e))(),t}function d(e,t,n){e.$$.on_destroy.push(a(t,n))}function f(e,n,l,c){return e[1]&&c?t(l.ctx.slice(),e[1](c(n))):l.ctx}function m(e,t){e.appendChild(t)}function p(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function $(e){return document.createElement(e)}function b(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function v(e){return document.createTextNode(e)}function y(){return v(" ")}function w(){return v("")}function k(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function _(e){return function(t){return t.preventDefault(),e.call(this,t)}}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const S=["width","height"];function N(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)null==t[l]?e.removeAttribute(l):"style"===l?e.style.cssText=t[l]:"__value"===l?e.value=e[l]=t[l]:n[l]&&n[l].set&&-1===S.indexOf(l)?e[l]=t[l]:x(e,l,t[l])}function L(e){return""===e?null:+e}function P(e,t){t=""+t,e.data!==t&&(e.data=t)}function A(e,t){e.value=null==t?"":t}function O(e,t,n){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function R(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function E(e,t,n){e.classList[n?"add":"remove"](t)}let j;function C(e){j=e}function I(){if(!j)throw new Error("Function called outside component initialization");return j}const F=[],M=[];let U=[];const T=[],z=Promise.resolve();let D=!1;function H(e){U.push(e)}const V=new Set;let B=0;function G(){if(0!==B)return;const e=j;do{try{for(;B<F.length;){const e=F[B];B++,C(e),J(e.$$)}}catch(e){throw F.length=0,B=0,e}for(C(null),F.length=0,B=0;M.length;)M.pop()();for(let e=0;e<U.length;e+=1){const t=U[e];V.has(t)||(V.add(t),t())}U.length=0}while(F.length);for(;T.length;)T.pop()();D=!1,V.clear(),C(e)}function J(e){if(null!==e.fragment){e.update(),c(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}const q=new Set;let W;function X(){W={r:0,c:[],p:W}}function Y(){W.r||c(W.c),W=W.p}function K(e,t){e&&e.i&&(q.delete(e),e.i(t))}function Q(e,t,n,l){if(e&&e.o){if(q.has(e))return;q.add(e),W.c.push((()=>{q.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}else l&&l()}function Z(e,t){Q(e,1,1,(()=>{t.delete(e.key)}))}function ee(e){e&&e.c()}function te(e,t,l,o){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,l),o||H((()=>{const t=e.$$.on_mount.map(n).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...t):c(t),e.$$.on_mount=[]})),i.forEach(H)}function ne(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];U.forEach((l=>-1===e.indexOf(l)?t.push(l):n.push(l))),n.forEach((e=>e())),U=t}(n.after_update),c(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function le(e,t){-1===e.$$.dirty[0]&&(F.push(e),D||(D=!0,z.then(G)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ce(t,n,s,o,r,i,a,u=[-1]){const d=j;C(t);const f=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:r,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:l(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(f.root);let m=!1;if(f.ctx=s?s(t,n.props||{},((e,n,...l)=>{const c=l.length?l[0]:n;return f.ctx&&r(f.ctx[e],f.ctx[e]=c)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](c),m&&le(t,e)),n})):[],f.update(),m=!0,c(f.before_update),f.fragment=!!o&&o(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(h)}else f.fragment&&f.fragment.c();n.intro&&K(t.$$.fragment),te(t,n.target,n.anchor,n.customElement),G()}C(d)}class se{$destroy(){ne(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const oe=[];function re(t,n=e){let l;const c=new Set;function s(e){if(o(t,e)&&(t=e,l)){const e=!oe.length;for(const e of c)e[1](),oe.push(e,t);if(e){for(let e=0;e<oe.length;e+=2)oe[e][0](oe[e+1]);oe.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(o,r=e){const i=[o,r];return c.add(i),1===c.size&&(l=n(s)||e),o(t),()=>{c.delete(i),0===c.size&&l&&(l(),l=null)}}}}function ie(t,n,l){const o=!Array.isArray(t),r=o?[t]:t,i=n.length<2;return u=t=>{let l=!1;const u=[];let d=0,f=e;const m=()=>{if(d)return;f();const l=n(o?u[0]:u,t);i?t(l):f=s(l)?l:e},p=r.map(((e,t)=>a(e,(e=>{u[t]=e,d&=~(1<<t),l&&m()}),(()=>{d|=1<<t}))));return l=!0,m(),function(){c(p),f(),l=!1}},{subscribe:re(l,u).subscribe};var u}const ae=APP_LANG,ue=APP_NAME;USER_ID,CSRF_TOKEN,ADDITIONAL_MODULES;const de="Regions";SAS_APP_URL;const fe=CANTALOUPE_APP_URL;function me(e=null,t="full",n="full"){if(!e)return"https://via.placeholder.com/96x96?text=No+Image";if((e=e.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const l=e[e.length-1].includes(",")?e.pop().replace(".jpg",""):t,c=e.join("_").replace(".jpg","");return`${fe??"http://localhost:8182"}/iiif/2/${c}.jpg/${l}/${n}/0/default.jpg`}MEDIA_PATH;const pe=function(){const e=re(JSON.parse(localStorage.getItem("documentSet"))||{}),{subscribe:t,get:n,update:l}=e;function c(e){localStorage.setItem("documentSet",JSON.stringify(e))}function s(e,t=!0){return t?e[de]??{}:Object.entries(e).filter((([e,t])=>e!==de))}function o(e,t,n){if(e[n]){const{[t]:l,...c}=e[n];e={...e,[n]:c}}return c(e),e}function r(e,t){return e.hasOwnProperty(t.type)||(e[t.type]={}),e[t.type]={...e[t.type],[t.id]:t},c(e),e}return{subscribe:t,save:()=>l((async e=>(console.log(e),await fetch(`${window.location.origin}/document-set/add`),e))),empty:e=>l((t=>(e?delete t[de]:Object.keys(t).forEach((e=>{e!==de&&delete t[e]})),c(t),t))),addAll:e=>l((t=>function(e,t){return t.forEach((t=>{e[t.type]||(e[t.type]={}),e[t.type][t.id]=t})),c(e),e}(t,e))),removeAll:(e,t)=>l((n=>function(e,t,n){return e[n]?(t.forEach((t=>{delete e[n][t]})),c(e),e):e}(n,e,t))),remove:(e,t)=>l((n=>o(n,e,t))),add:e=>l((t=>r(t,e))),toggle:e=>l((t=>t[e.type]?.[e.id]?o(t,e.id,e.type):r(t,e))),isSelected:ie(e,(e=>t=>e[t.type]?.hasOwnProperty(t.id)||!1)),selected:ie(e,(e=>t=>s(e,t))),nbSelected:ie(e,(e=>t=>{const n=s(e,t);return t?Object.keys(n).length:n.reduce(((e,[t,n])=>e+Object.keys(n).length),0)}))}}();function he(e,t,n){const l=e.slice();return l[6]=t[n][0],l[7]=t[n][1],l}function ge(e,t,n){const l=e.slice();return l[10]=t[n],l}function $e(e){let t,n,l,c;return{c(){t=$("div"),n=$("figure"),l=$("img"),i(l.src,c=me(e[0].img,"full","250,"))||x(l,"src",c),x(l,"alt","Record illustration"),x(n,"class","card image is-96x96 svelte-1pgj3bz"),x(t,"class","media-left")},m(e,c){p(e,t,c),m(t,n),m(n,l)},p(e,t){1&t&&!i(l.src,c=me(e[0].img,"full","250,"))&&x(l,"src",c)},d(e){e&&h(t)}}}function be(e){let t;return{c(){t=$("span"),t.innerHTML='<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span> \n                                <span style="margin-left: -0.5rem">Public</span>',x(t,"class","pl-3 icon-text is-size-7 is-center has-text-weight-normal")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function ve(e){let t,n,l=e[0].hasOwnProperty("iiif"),c=e[0].buttons.includes("regions"),s=l&&ye(e),o=c&&ke(e);return{c(){t=$("p"),s&&s.c(),n=y(),o&&o.c(),x(t,"class","subtitle is-6 mb-0 ml-2 pt-2")},m(e,l){p(e,t,l),s&&s.m(t,null),m(t,n),o&&o.m(t,null)},p(e,r){1&r&&(l=e[0].hasOwnProperty("iiif")),l?s?s.p(e,r):(s=ye(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),1&r&&(c=e[0].buttons.includes("regions")),c?o?o.p(e,r):(o=ke(e),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(e){e&&h(t),s&&s.d(),o&&o.d()}}}function ye(e){let t,n=e[0].iiif,l=[];for(let t=0;t<n.length;t+=1)l[t]=we(ge(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);p(e,t,n)},p(e,c){if(1&c){let s;for(n=e[0].iiif,s=0;s<n.length;s+=1){const o=ge(e,n,s);l[s]?l[s].p(o,c):(l[s]=we(o),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(e){g(l,e),e&&h(t)}}}function we(e){let t,n=e[10]+"";return{c(){t=$("span"),x(t,"class","tag logo mt-1")},m(e,l){p(e,t,l),t.innerHTML=n},p(e,l){1&l&&n!==(n=e[10]+"")&&(t.innerHTML=n)},d(e){e&&h(t)}}}function ke(e){let t,n,l,c,s;return{c(){t=$("a"),n=$("span"),l=y(),c=$("span"),c.textContent=""+("en"===ae?"Show regions":"Afficher les régions"),x(n,"class","iconify"),x(n,"data-icon","entypo:documents"),x(c,"class","ml-2"),x(t,"href",s=e[0].url+"regions/"),x(t,"class","button is-small is-rounded is-link px-2 py-1"),x(t,"title","en"===ae?"View image regions":"Afficher les régions d'images")},m(e,s){p(e,t,s),m(t,n),m(t,l),m(t,c)},p(e,n){1&n&&s!==(s=e[0].url+"regions/")&&x(t,"href",s)},d(e){e&&h(t)}}}function _e(e){let t,n,l,c,s;let o=("en"===ae?Ne:Se)(e);function r(e,t){return e[1]?Pe:Le}let i=r(e),a=i(e);return{c(){t=$("button"),o.c(),n=y(),l=b("svg"),a.c(),x(l,"xmlns","http://www.w3.org/2000/svg"),x(l,"viewBox","0 0 384 512"),x(l,"class","svelte-1pgj3bz"),x(t,"class","button"),E(t,"is-inverted",e[1])},m(r,i){p(r,t,i),o.m(t,null),m(t,n),m(t,l),a.m(l,null),c||(s=k(t,"click",e[5]),c=!0)},p(e,n){o.p(e,n),i!==(i=r(e))&&(a.d(1),a=i(e),a&&(a.c(),a.m(l,null))),2&n&&E(t,"is-inverted",e[1])},d(e){e&&h(t),o.d(),a.d(),c=!1,s()}}}function xe(e){let t,n,l=!e[0].is_finished&&e[0].api_tracking_id&&Ae(e);function c(e,t){return"SUCCESS"===e[0].status?Ee:"ERROR"===e[0].status?Re:Oe}let s=c(e),o=s(e);return{c(){l&&l.c(),t=y(),o.c(),n=w()},m(e,c){l&&l.m(e,c),p(e,t,c),o.m(e,c),p(e,n,c)},p(e,r){!e[0].is_finished&&e[0].api_tracking_id?l?l.p(e,r):(l=Ae(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),s===(s=c(e))&&o?o.p(e,r):(o.d(1),o=s(e),o&&(o.c(),o.m(n.parentNode,n)))},d(e){l&&l.d(e),e&&h(t),o.d(e),e&&h(n)}}}function Se(e){let t,n,l=e[1]?"Retirer de la":"Ajouter à la";return{c(){t=v(l),n=v(" sélection")},m(e,l){p(e,t,l),p(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Retirer de la":"Ajouter à la")&&P(t,l)},d(e){e&&h(t),e&&h(n)}}}function Ne(e){let t,n,l=e[1]?"Remove from":"Add to";return{c(){t=v(l),n=v(" selection")},m(e,l){p(e,t,l),p(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Remove from":"Add to")&&P(t,l)},d(e){e&&h(t),e&&h(n)}}}function Le(e){let t;return{c(){t=b("path"),x(t,"fill","currentColor"),x(t,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Pe(e){let t;return{c(){t=b("path"),x(t,"fill","currentColor"),x(t,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Ae(t){let n,l,c,s,o,r;return{c(){n=$("button"),l=$("i"),c=y(),s=$("span"),s.textContent=""+("en"===ae?"Cancel treatment":"Annuler le traitement"),x(l,"class","fa-solid fa-ban"),x(n,"class","button is-small is-rounded is-danger is-outlined px-2 py-1 mr-2"),x(n,"title","en"===ae?"Cancel treatment":"Annuler le traitement")},m(e,i){p(e,n,i),m(n,l),m(n,c),m(n,s),o||(r=k(n,"click",t[4]),o=!0)},p:e,d(e){e&&h(n),o=!1,r()}}}function Oe(e){let t,n,l=e[0].status+"";return{c(){t=$("span"),n=v(l),x(t,"class","tag is-info p-1 mb-1")},m(e,l){p(e,t,l),m(t,n)},p(e,t){1&t&&l!==(l=e[0].status+"")&&P(n,l)},d(e){e&&h(t)}}}function Re(e){let t,n,l=e[0].status+"";return{c(){t=$("span"),n=v(l),x(t,"class","tag is-danger p-1 mb-1")},m(e,l){p(e,t,l),m(t,n)},p(e,t){1&t&&l!==(l=e[0].status+"")&&P(n,l)},d(e){e&&h(t)}}}function Ee(e){let t,n,l=e[0].status+"";return{c(){t=$("span"),n=v(l),x(t,"class","tag is-success p-1 mb-1")},m(e,l){p(e,t,l),m(t,n)},p(e,t){1&t&&l!==(l=e[0].status+"")&&P(n,l)},d(e){e&&h(t)}}}function je(e){let t,n,l,c,s,o,r,i,a=e[6]+"",u=e[7]+"";return{c(){t=$("div"),n=$("div"),l=v(a),c=y(),s=$("div"),o=v(u),i=y(),x(n,"class","column is-3 is-bold"),x(s,"class",r="column is-8 "+("-"===e[7]?"faded":"")),x(t,"class","datum is-middle columns svelte-1pgj3bz")},m(e,r){p(e,t,r),m(t,n),m(n,l),m(t,c),m(t,s),m(s,o),m(t,i)},p(e,t){1&t&&a!==(a=e[6]+"")&&P(l,a),1&t&&u!==(u=e[7]+"")&&P(o,u),1&t&&r!==(r="column is-8 "+("-"===e[7]?"faded":""))&&x(s,"class",r)},d(e){e&&h(t)}}}function Ce(t){let n,l,c,s,o,r,i,a,u,d,f,b,w,k,_,S,N,L,A,O,R,E,j,C,I,F,M,U=t[0].type+"",T=t[0].id+"",z=t[0].title+"",D=t[0].user+"",H=t[0].updated_at+"",V="Witness"===t[0].class&&$e(t),B=t[0].is_public&&be(),G=t[0].buttons&&ve(t);function J(e,t){return"Treatment"===e[0].class?xe:_e}let q=J(t),W=q(t),X=Object.entries(t[0].metadata),Y=[];for(let e=0;e<X.length;e+=1)Y[e]=je(he(t,X,e));return{c(){n=$("div"),l=$("div"),c=$("div"),s=$("div"),V&&V.c(),o=y(),r=$("div"),i=$("a"),a=$("span"),u=v(U),d=v(" #"),f=v(T),b=y(),w=v(z),k=y(),B&&B.c(),S=y(),N=$("p"),L=v(D),A=y(),O=$("span"),R=v(H),E=y(),G&&G.c(),j=y(),C=$("div"),W.c(),I=y(),F=$("div"),M=$("div");for(let e=0;e<Y.length;e+=1)Y[e].c();x(a,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),x(i,"href",_=t[0].url),x(i,"class","title is-4 hoverable pt-2 svelte-1pgj3bz"),x(O,"class","tag p-1 mb-1"),x(N,"class","subtitle is-6 mb-0 ml-2 pt-2"),x(r,"class","media-content"),x(C,"class","media-right"),x(s,"class","media"),x(M,"class","grid metadata pt-2 svelte-1pgj3bz"),x(F,"class","content fixed-grid px-5"),x(c,"class","card-content"),x(l,"class","card mb-3"),x(n,"class","item")},m(e,t){p(e,n,t),m(n,l),m(l,c),m(c,s),V&&V.m(s,null),m(s,o),m(s,r),m(r,i),m(i,a),m(a,u),m(a,d),m(a,f),m(i,b),m(i,w),m(i,k),B&&B.m(i,null),m(r,S),m(r,N),m(N,L),m(N,A),m(N,O),m(O,R),m(r,E),G&&G.m(r,null),m(s,j),m(s,C),W.m(C,null),m(c,I),m(c,F),m(F,M);for(let e=0;e<Y.length;e+=1)Y[e]&&Y[e].m(M,null)},p(e,[t]){if("Witness"===e[0].class?V?V.p(e,t):(V=$e(e),V.c(),V.m(s,o)):V&&(V.d(1),V=null),1&t&&U!==(U=e[0].type+"")&&P(u,U),1&t&&T!==(T=e[0].id+"")&&P(f,T),1&t&&z!==(z=e[0].title+"")&&P(w,z),e[0].is_public?B||(B=be(),B.c(),B.m(i,null)):B&&(B.d(1),B=null),1&t&&_!==(_=e[0].url)&&x(i,"href",_),1&t&&D!==(D=e[0].user+"")&&P(L,D),1&t&&H!==(H=e[0].updated_at+"")&&P(R,H),e[0].buttons?G?G.p(e,t):(G=ve(e),G.c(),G.m(r,null)):G&&(G.d(1),G=null),q===(q=J(e))&&W?W.p(e,t):(W.d(1),W=q(e),W&&(W.c(),W.m(C,null))),1&t){let n;for(X=Object.entries(e[0].metadata),n=0;n<X.length;n+=1){const l=he(e,X,n);Y[n]?Y[n].p(l,t):(Y[n]=je(l),Y[n].c(),Y[n].m(M,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=X.length}},i:e,o:e,d(e){e&&h(n),V&&V.d(),B&&B.d(),G&&G.d(),W.d(),g(Y,e)}}}function Ie(e,t,n){let l,c;const{isSelected:s}=pe;d(e,s,(e=>n(3,c=e)));let{item:o}=t;return e.$$set=e=>{"item"in e&&n(0,o=e.item)},e.$$.update=()=>{9&e.$$.dirty&&n(1,l=c(o))},[o,l,s,c,()=>async function(e){if(confirm("en"===APP_LANG?"Are you sure you want to cancel treatment?":"Êtes-vous sûr de vouloir annuler le traitement en cours ?"))try{(await fetch(`/${ue}/cancel-treatment/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({treatment_id:e})})).ok?window.alert("en"===APP_LANG?"Successfully cancelled treatment":"Le traitement a été annulé"):window.alert("en"===APP_LANG?"Treatment could not be cancelled":"Le traitement n'a pas pu être annulé")}catch(e){window.alert("en"===APP_LANG?"Error connecting to API":"Erreur lors de la connexion à l'API")}}(o.id),()=>pe.toggle(o)]}class Fe extends se{constructor(e){super(),ce(this,e,Ie,Ce,o,{item:0})}}function Me(t){let n,l,c,s,o,r,i,a,u,d="en"===ae?"Selection":"Sélection";return{c(){n=$("div"),l=$("button"),c=$("span"),s=$("i"),o=y(),r=v(d),i=v("\n            ("),a=v(t[0]),u=v(")"),x(s,"class","fa-solid fa-book-bookmark"),x(c,"id","btn-content"),x(l,"id","set-btn"),x(l,"class","button px-5 py-4 is-link js-modal-trigger svelte-hs48f9"),x(l,"data-target","selection-modal"),x(n,"class","set-container svelte-hs48f9")},m(e,t){p(e,n,t),m(n,l),m(l,c),m(c,s),m(c,o),m(c,r),m(c,i),m(c,a),m(c,u)},p(e,[t]){1&t&&P(a,e[0])},i:e,o:e,d(e){e&&h(n)}}}function Ue(e,t,n){let{selectionLength:l=0}=t,c=l;return e.$$set=e=>{"selectionLength"in e&&n(0,l=e.selectionLength)},e.$$.update=()=>{if(3&e.$$.dirty&&l!==c){const e=l>c;n(1,c=l);const t=document.getElementById("btn-content");t&&t.animate([{transform:e?"translateY(-7px)":"translateX(-5px)"},{transform:e?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[l,c]}class Te extends se{constructor(e){super(),ce(this,e,Ue,Me,o,{selectionLength:0})}}function ze(t){let n,l,s,o,r,i,a,u,d,f,g="en"===ae?"Save selection":"Sauvegarder la sélection";return{c(){n=$("footer"),l=$("div"),s=$("button"),s.textContent=""+("en"===ae?"Clear selection":"Vider la sélection"),o=y(),r=$("button"),i=$("i"),a=y(),u=v(g),x(s,"class","button is-link is-light"),x(i,"class","fa-solid fa-floppy-disk"),x(r,"class","button is-link"),x(l,"class","buttons"),x(n,"class","modal-card-foot is-center")},m(e,c){p(e,n,c),m(n,l),m(l,s),m(l,o),m(l,r),m(r,i),m(r,a),m(r,u),d||(f=[k(s,"click",t[1]),k(r,"click",t[2])],d=!0)},p:e,i:e,o:e,d(e){e&&h(n),d=!1,c(f)}}}function De(e,t,n){let{isRegion:l=!0}=t;return e.$$set=e=>{"isRegion"in e&&n(0,l=e.isRegion)},[l,()=>pe.empty(l),()=>pe.save()]}class He extends se{constructor(e){super(),ce(this,e,De,ze,o,{isRegion:0})}}function Ve(e){let t,n,l,c,s,o,r,i,a,u,d,g,b,w,k,_,S,N,L,A="en"===ae?"Selected regions":"Regions sélectionnées";const O=e[3].default,R=function(e,t,n,l){if(e){const c=f(e,t,n,l);return e[0](c)}}(O,e,e[2],null);return N=new He({props:{isRegion:e[0]}}),{c(){t=$("div"),n=$("div"),l=y(),c=$("div"),s=$("div"),o=$("div"),r=$("i"),i=y(),a=v(A),u=v("\n                ("),d=v(e[1]),g=v(")"),b=y(),w=$("button"),k=y(),_=$("section"),R&&R.c(),S=y(),ee(N.$$.fragment),x(n,"class","modal-background"),x(r,"class","fa-solid fa-book-bookmark"),x(o,"class","title is-4 mb-0 media-content"),x(w,"class","delete media-left"),x(w,"aria-label","close"),x(s,"class","modal-card-head media mb-0"),x(_,"class","modal-card-body"),x(c,"class","modal-content"),x(t,"id","selection-modal"),x(t,"class","modal fade"),x(t,"tabindex","-1"),x(t,"aria-labelledby","selection-modal-label"),x(t,"aria-hidden","true")},m(e,f){p(e,t,f),m(t,n),m(t,l),m(t,c),m(c,s),m(s,o),m(o,r),m(o,i),m(o,a),m(o,u),m(o,d),m(o,g),m(s,b),m(s,w),m(c,k),m(c,_),R&&R.m(_,null),m(c,S),te(N,c,null),L=!0},p(e,[t]){(!L||2&t)&&P(d,e[1]),R&&R.p&&(!L||4&t)&&function(e,t,n,l,c,s){if(c){const o=f(t,n,l,s);e.p(o,c)}}(R,O,e,e[2],L?function(e,t,n,l){if(e[2]&&l){const c=e[2](l(n));if(void 0===t.dirty)return c;if("object"==typeof c){const e=[],n=Math.max(t.dirty.length,c.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|c[l];return e}return t.dirty|c}return t.dirty}(O,e[2],t,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[2]),null);const n={};1&t&&(n.isRegion=e[0]),N.$set(n)},i(e){L||(K(R,e),K(N.$$.fragment,e),L=!0)},o(e){Q(R,e),Q(N.$$.fragment,e),L=!1},d(e){e&&h(t),R&&R.d(e),ne(N)}}}function Be(e,t,n){let{$$slots:l={},$$scope:c}=t,{isRegion:s=!1}=t,{selectionLength:o=!1}=t;return e.$$set=e=>{"isRegion"in e&&n(0,s=e.isRegion),"selectionLength"in e&&n(1,o=e.selectionLength),"$$scope"in e&&n(2,c=e.$$scope)},[s,o,c,l]}class Ge extends se{constructor(e){super(),ce(this,e,Be,Ve,o,{isRegion:0,selectionLength:1})}}function Je(e,t,n){const l=e.slice();return l[13]=t[n],l[14]=t,l[15]=n,l}function qe(e,t,n){const l=e.slice();return l[16]=t[n],l}function We(e){let t,n,l,c,s,o,r,i,a,u,d="en"===ae?"Search":"Rechercher",f=e[0],b=[];for(let t=0;t<f.length;t+=1)b[t]=nt(Je(e,f,t));return{c(){t=$("form"),n=$("article");for(let e=0;e<b.length;e+=1)b[e].c();l=y(),c=$("div"),s=$("button"),o=$("i"),r=y(),i=v(d),x(n,"class","message grid"),x(o,"class","fa-solid fa-magnifying-glass"),x(s,"type","submit"),x(s,"class","button is-link is-outlined is-fullwidth"),x(c,"class","panel-block columns"),x(t,"class","fixed-grid container")},m(d,f){p(d,t,f),m(t,n);for(let e=0;e<b.length;e+=1)b[e]&&b[e].m(n,null);m(t,l),m(t,c),m(c,s),m(s,o),m(s,r),m(s,i),a||(u=k(t,"submit",e[3]),a=!0)},p(e,t){if(19&t){let l;for(f=e[0],l=0;l<f.length;l+=1){const c=Je(e,f,l);b[l]?b[l].p(c,t):(b[l]=nt(c),b[l].c(),b[l].m(n,null))}for(;l<b.length;l+=1)b[l].d(1);b.length=f.length}},d(e){e&&h(t),g(b,e),a=!1,u()}}}function Xe(e){let t,n,l,c,s;function o(){e[10].call(t,e[13])}return{c(){t=$("input"),x(t,"type","text"),x(t,"class","input is-small is-wide"),x(t,"id",n=e[13].name),x(t,"name",l=e[13].name)},m(n,l){p(n,t,l),A(t,e[1][e[13].name]),c||(s=k(t,"input",o),c=!0)},p(c,s){e=c,1&s&&n!==(n=e[13].name)&&x(t,"id",n),1&s&&l!==(l=e[13].name)&&x(t,"name",l),3&s&&t.value!==e[1][e[13].name]&&A(t,e[1][e[13].name])},d(e){e&&h(t),c=!1,s()}}}function Ye(e){let t,n,l,c,s;function o(){e[9].call(t,e[13])}return{c(){t=$("input"),x(t,"type","number"),x(t,"class","input is-small is-wide"),x(t,"id",n=e[13].name),x(t,"name",l=e[13].name)},m(n,l){p(n,t,l),A(t,e[1][e[13].name]),c||(s=k(t,"input",o),c=!0)},p(c,s){e=c,1&s&&n!==(n=e[13].name)&&x(t,"id",n),1&s&&l!==(l=e[13].name)&&x(t,"name",l),3&s&&L(t.value)!==e[1][e[13].name]&&A(t,e[1][e[13].name])},d(e){e&&h(t),c=!1,s()}}}function Ke(e){let t,n,l,c,s,o;function r(){e[8].call(n,e[13])}return{c(){t=v("}\n                            "),n=$("input"),x(n,"type","date"),x(n,"class","input is-small is-wide"),x(n,"id",l=e[13].name),x(n,"name",c=e[13].name)},m(l,c){p(l,t,c),p(l,n,c),A(n,e[1][e[13].name]),s||(o=k(n,"input",r),s=!0)},p(t,s){e=t,1&s&&l!==(l=e[13].name)&&x(n,"id",l),1&s&&c!==(c=e[13].name)&&x(n,"name",c),3&s&&A(n,e[1][e[13].name])},d(e){e&&h(t),e&&h(n),s=!1,o()}}}function Qe(e){let t,n,l,c,s;function o(){e[7].call(t,e[13])}return{c(){t=$("input"),x(t,"type","checkbox"),x(t,"id",n=e[13].name),x(t,"name",l=e[13].name)},m(n,l){p(n,t,l),t.checked=e[1][e[13].name],c||(s=k(t,"change",o),c=!0)},p(c,s){e=c,1&s&&n!==(n=e[13].name)&&x(t,"id",n),1&s&&l!==(l=e[13].name)&&x(t,"name",l),3&s&&(t.checked=e[1][e[13].name])},d(e){e&&h(t),c=!1,s()}}}function Ze(e){let n,l,c,s,o,r,i,a,u=!e[4](e[13]),d=u&&et(),f=e[13].choices,b=[];for(let t=0;t<f.length;t+=1)b[t]=tt(qe(e,f,t));let v=[{id:s=e[13].name},{name:o=e[13].name},{class:"is-wide"},e[4](e[13])?{size:3,multiple:!0}:{}],y={};for(let e=0;e<v.length;e+=1)y=t(y,v[e]);function _(){e[6].call(l,e[13])}return{c(){n=$("div"),l=$("select"),d&&d.c(),c=w();for(let e=0;e<b.length;e+=1)b[e].c();N(l,y),void 0===e[1][e[13].name]&&H(_),x(n,"class",r="select is-small is-wide "+(e[4](e[13])?"is-multiple":""))},m(t,s){p(t,n,s),m(n,l),d&&d.m(l,null),m(l,c);for(let e=0;e<b.length;e+=1)b[e]&&b[e].m(l,null);"value"in y&&(y.multiple?R:O)(l,y.value),l.autofocus&&l.focus(),O(l,e[1][e[13].name],!0),i||(a=k(l,"change",_),i=!0)},p(t,i){if(e=t,1&i&&(u=!e[4](e[13])),u?d||(d=et(),d.c(),d.m(l,c)):d&&(d.d(1),d=null),1&i){let t;for(f=e[13].choices,t=0;t<f.length;t+=1){const n=qe(e,f,t);b[t]?b[t].p(n,i):(b[t]=tt(n),b[t].c(),b[t].m(l,null))}for(;t<b.length;t+=1)b[t].d(1);b.length=f.length}N(l,y=function(e,t){const n={},l={},c={$$scope:1};let s=e.length;for(;s--;){const o=e[s],r=t[s];if(r){for(const e in o)e in r||(l[e]=1);for(const e in r)c[e]||(n[e]=r[e],c[e]=1);e[s]=r}else for(const e in o)c[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}(v,[1&i&&s!==(s=e[13].name)&&{id:s},1&i&&o!==(o=e[13].name)&&{name:o},{class:"is-wide"},1&i&&(e[4](e[13])?{size:3,multiple:!0}:{})])),17&i&&"value"in y&&(y.multiple?R:O)(l,y.value),3&i&&O(l,e[1][e[13].name]),1&i&&r!==(r="select is-small is-wide "+(e[4](e[13])?"is-multiple":""))&&x(n,"class",r)},d(e){e&&h(n),d&&d.d(),g(b,e),i=!1,a()}}}function et(e){let t;return{c(){t=$("option"),t.textContent="Select ...",t.__value="",t.value=t.__value,t.disabled=!0,t.selected=!0,x(t,"class","faded")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function tt(e){let t,n,l,c=e[16].label+"";return{c(){t=$("option"),n=v(c),t.__value=l=e[16].value,t.value=t.__value},m(e,l){p(e,t,l),m(t,n)},p(e,s){1&s&&c!==(c=e[16].label+"")&&P(n,c),1&s&&l!==(l=e[16].value)&&(t.__value=l,t.value=t.__value)},d(e){e&&h(t)}}}function nt(e){let t,n,l,c,s,o,r,i,a,u=e[13].label+"";function d(e,t){return 1&t&&(r=null),1&t&&(i=null),null==r&&(r=!!e[13].type.includes("ChoiceField")),r?Ze:"BooleanField"===e[13].type?Qe:(null==i&&(i=!!e[13].type.includes("Date")),i?Ke:"IntegerField"===e[13].type||"FloatField"===e[13].type?Ye:Xe)}let f=d(e,-1),g=f(e);return{c(){t=$("div"),n=$("label"),l=v(u),s=y(),o=$("div"),g.c(),a=y(),x(n,"for",c=e[13].name),x(n,"class","label column is-small is-3"),x(o,"class","control has-icons-right column is-8"),x(t,"class","field columns is-middle")},m(e,c){p(e,t,c),m(t,n),m(n,l),m(t,s),m(t,o),g.m(o,null),m(t,a)},p(e,t){1&t&&u!==(u=e[13].label+"")&&P(l,u),1&t&&c!==(c=e[13].name)&&x(n,"for",c),f===(f=d(e,t))&&g?g.p(e,t):(g.d(1),g=f(e),g&&(g.c(),g.m(o,null)))},d(e){e&&h(t),g.d()}}}function lt(t){let n,l=t[0].length>0&&We(t);return{c(){l&&l.c(),n=w()},m(e,t){l&&l.m(e,t),p(e,n,t)},p(e,[t]){e[0].length>0?l?l.p(e,t):(l=We(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:e,o:e,d(e){l&&l.d(e),e&&h(n)}}}function ct(e,t,n){let l,{recordsStore:c}=t;const{recordSearch:s,searchParams:o}=c;d(e,o,(e=>n(11,l=e)));let{searchFields:r=[]}=t,i={};var a;a=()=>{const e=l??new URLSearchParams(window.location.search);r.forEach((t=>{n(1,i[t.name]=e.get(t.name)||t.initial||"",i)}))},I().$$.on_mount.push(a);return e.$$set=e=>{"recordsStore"in e&&n(5,c=e.recordsStore),"searchFields"in e&&n(0,r=e.searchFields)},[r,i,o,function(e){e.preventDefault(),s(i)},e=>e.type.includes("Multiple"),c,function(e){i[e.name]=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(1,i),n(0,r)},function(e){i[e.name]=this.checked,n(1,i),n(0,r)},function(e){i[e.name]=this.value,n(1,i),n(0,r)},function(e){i[e.name]=L(this.value),n(1,i),n(0,r)},function(e){i[e.name]=this.value,n(1,i),n(0,r)}]}class st extends se{constructor(e){super(),ce(this,e,ct,lt,o,{recordsStore:5,searchFields:0})}}function ot(e){let t,n,l,c,s,o,r,i,a,u=e[2]>1&&rt(e),d=e[2]<e[1]&&ut(e);return{c(){t=$("nav"),n=$("ul"),u&&u.c(),l=y(),c=$("li"),s=$("a"),o=v(e[2]),r=y(),d&&d.c(),x(s,"class","pagination-link is-current"),x(s,"href",null),x(n,"class","pagination-list"),x(t,"class","pagination is-centered"),x(t,"aria-label","pagination")},m(f,h){p(f,t,h),m(t,n),u&&u.m(n,null),m(n,l),m(n,c),m(c,s),m(s,o),m(n,r),d&&d.m(n,null),i||(a=k(s,"click",_(e[8])),i=!0)},p(e,t){e[2]>1?u?u.p(e,t):(u=rt(e),u.c(),u.m(n,l)):u&&(u.d(1),u=null),4&t&&P(o,e[2]),e[2]<e[1]?d?d.p(e,t):(d=ut(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&h(t),u&&u.d(),d&&d.d(),i=!1,a()}}}function rt(e){let t,n,l,c,s,o,r=e[2]-1>1&&it(e);return{c(){t=$("li"),n=$("a"),n.textContent="1",l=y(),r&&r.c(),c=w(),x(n,"class","pagination-link"),x(n,"href",null)},m(i,a){p(i,t,a),m(t,n),p(i,l,a),r&&r.m(i,a),p(i,c,a),s||(o=k(n,"click",_(e[6])),s=!0)},p(e,t){e[2]-1>1?r?r.p(e,t):(r=it(e),r.c(),r.m(c.parentNode,c)):r&&(r.d(1),r=null)},d(e){e&&h(t),e&&h(l),r&&r.d(e),e&&h(c),s=!1,o()}}}function it(e){let t,n,l,c,s,o,r=e[2]-1+"",i=e[2]-1>2&&at();return{c(){i&&i.c(),t=y(),n=$("li"),l=$("a"),c=v(r),x(l,"class","pagination-link"),x(l,"href",null)},m(r,a){i&&i.m(r,a),p(r,t,a),p(r,n,a),m(n,l),m(l,c),s||(o=k(l,"click",_(e[7])),s=!0)},p(e,n){e[2]-1>2?i||(i=at(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),4&n&&r!==(r=e[2]-1+"")&&P(c,r)},d(e){i&&i.d(e),e&&h(t),e&&h(n),s=!1,o()}}}function at(e){let t;return{c(){t=$("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>'},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function ut(e){let t,n,l,c,s,o,r=e[2]+1<e[1]&&dt(e);return{c(){r&&r.c(),t=y(),n=$("li"),l=$("a"),c=v(e[1]),x(l,"class","pagination-link"),x(l,"href",null)},m(i,a){r&&r.m(i,a),p(i,t,a),p(i,n,a),m(n,l),m(l,c),s||(o=k(l,"click",_(e[10])),s=!0)},p(e,n){e[2]+1<e[1]?r?r.p(e,n):(r=dt(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),2&n&&P(c,e[1])},d(e){r&&r.d(e),e&&h(t),e&&h(n),s=!1,o()}}}function dt(e){let t,n,l,c,s,o,r,i=e[2]+1+"",a=e[2]+2<e[1]&&ft();return{c(){t=$("li"),n=$("a"),l=v(i),c=y(),a&&a.c(),s=w(),x(n,"class","pagination-link"),x(n,"href",null)},m(i,u){p(i,t,u),m(t,n),m(n,l),p(i,c,u),a&&a.m(i,u),p(i,s,u),o||(r=k(n,"click",_(e[9])),o=!0)},p(e,t){4&t&&i!==(i=e[2]+1+"")&&P(l,i),e[2]+2<e[1]?a||(a=ft(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(e){e&&h(t),e&&h(c),a&&a.d(e),e&&h(s),o=!1,r()}}}function ft(e){let t;return{c(){t=$("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>'},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function mt(t){let n,l=t[1]>1&&ot(t);return{c(){l&&l.c(),n=w()},m(e,t){l&&l.m(e,t),p(e,n,t)},p(e,[t]){e[1]>1?l?l.p(e,t):(l=ot(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:e,o:e,d(e){l&&l.d(e),e&&h(n)}}}function pt(e,t,n){let l,c,{store:s}=t;const{currentPage:o}=s;d(e,o,(e=>n(2,c=e)));let{nbOfItems:r}=t,{pageLength:i=50}=t;return e.$$set=e=>{"store"in e&&n(0,s=e.store),"nbOfItems"in e&&n(4,r=e.nbOfItems),"pageLength"in e&&n(5,i=e.pageLength)},e.$$.update=()=>{48&e.$$.dirty&&n(1,l=Math.ceil(r/i))},[s,l,c,o,r,i,()=>s.handlePageUpdate(1),()=>s.handlePageUpdate(c-1),()=>s.handlePageUpdate(c),()=>s.handlePageUpdate(c+1),()=>s.handlePageUpdate(l)]}class ht extends se{constructor(e){super(),ce(this,e,pt,mt,o,{store:0,nbOfItems:4,pageLength:5})}}function gt(e){const t=e,n=re(1),l=re([]),c=re(0),s=re(new URLSearchParams(window.location.search));async function o(){const e=u(s);e.set("p",`${u(n)}`);try{const s=await fetch(`${window.location.origin}/search/${t}/?${e.toString()}`),o=await s.json();l.set(o.results),c.set(o.count),n.set(o.current_page),e.set("p",String(u(n)));const r=`${window.location.pathname}?${e.toString()}`;return history.pushState(null,"",r),o}catch(e){throw console.error("Error fetching page:",e),e}}!function(e,t){if("undefined"!=typeof window){const n=parseInt(new URLSearchParams(window.location.search).get(t));if(!isNaN(n))return e.set(n),n}e.set(1)}(n,"p");let r=o();function i(e){!function(e,t,n){if(t.set(e),"undefined"!=typeof window){const t=new URL(window.location.href);t.searchParams.set(n,e),window.history.pushState({},"",t)}}(e,n,"p"),r=o()}return{currentPage:n,pageRecords:l,resultPage:r,resultNumber:c,fetchPage:o,handlePageUpdate:i,recordSearch:function(e){const t=new URLSearchParams(e);s.set(t),i(1)}}}function $t(e,t,n){const l=e.slice();return l[15]=t[n][0],l[16]=t[n][1],l}function bt(e,t,n){const l=e.slice();return l[19]=t[n][0],l[20]=t[n][1],l}function vt(e,t,n){const l=e.slice();return l[24]=t[n],l}function yt(t){let n,l,c,s,o="en"===ae?"Error when retrieving records: ":"Erreur lors de la récupération des enregistrements : ",r=t[27]+"";return{c(){n=$("div"),l=v(o),c=y(),s=v(r),x(n,"class","faded is-center")},m(e,t){p(e,n,t),m(n,l),m(n,c),m(n,s)},p:e,i:e,o:e,d(e){e&&h(n)}}}function wt(e){let t,n,l=0!==e[3].length&&kt(e);return{c(){l&&l.c(),t=w()},m(e,c){l&&l.m(e,c),p(e,t,c),n=!0},p(e,n){0!==e[3].length?l?(l.p(e,n),8&n&&K(l,1)):(l=kt(e),l.c(),K(l,1),l.m(t.parentNode,t)):l&&(X(),Q(l,1,1,(()=>{l=null})),Y())},i(e){n||(K(l),n=!0)},o(e){Q(l),n=!1},d(e){l&&l.d(e),e&&h(t)}}}function kt(e){let t,n,l,s,o,r,i=[],a=new Map;t=new ht({props:{store:e[7],nbOfItems:e[4]}});let u=e[3];const d=e=>e[24].id;for(let t=0;t<u.length;t+=1){let n=vt(e,u,t),l=d(n);a.set(l,i[t]=xt(l,n))}let f=null;return u.length||(f=_t()),o=new ht({props:{store:e[7],nbOfItems:e[4]}}),{c(){ee(t.$$.fragment),n=y(),l=$("div");for(let e=0;e<i.length;e+=1)i[e].c();f&&f.c(),s=y(),ee(o.$$.fragment)},m(e,c){te(t,e,c),p(e,n,c),p(e,l,c);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(l,null);f&&f.m(l,null),p(e,s,c),te(o,e,c),r=!0},p(e,n){const s={};16&n&&(s.nbOfItems=e[4]),t.$set(s),8&n&&(u=e[3],X(),i=function(e,t,n,l,s,o,r,i,a,u,d,f){let m=e.length,p=o.length,h=m;const g={};for(;h--;)g[e[h].key]=h;const $=[],b=new Map,v=new Map,y=[];for(h=p;h--;){const e=f(s,o,h),c=n(e);let i=r.get(c);i?l&&y.push((()=>i.p(e,t))):(i=u(c,e),i.c()),b.set(c,$[h]=i),c in g&&v.set(c,Math.abs(h-g[c]))}const w=new Set,k=new Set;function _(e){K(e,1),e.m(i,d),r.set(e.key,e),d=e.first,p--}for(;m&&p;){const t=$[p-1],n=e[m-1],l=t.key,c=n.key;t===n?(d=t.first,m--,p--):b.has(c)?!r.has(l)||w.has(l)?_(t):k.has(c)?m--:v.get(l)>v.get(c)?(k.add(l),_(t)):(w.add(c),m--):(a(n,r),m--)}for(;m--;){const t=e[m];b.has(t.key)||a(t,r)}for(;p;)_($[p-1]);return c(y),$}(i,n,d,1,e,u,a,l,Z,xt,null,vt),Y(),!u.length&&f?f.p(e,n):u.length?f&&(f.d(1),f=null):(f=_t(),f.c(),f.m(l,null)));const r={};16&n&&(r.nbOfItems=e[4]),o.$set(r)},i(e){if(!r){K(t.$$.fragment,e);for(let e=0;e<u.length;e+=1)K(i[e]);K(o.$$.fragment,e),r=!0}},o(e){Q(t.$$.fragment,e);for(let e=0;e<i.length;e+=1)Q(i[e]);Q(o.$$.fragment,e),r=!1},d(e){ne(t,e),e&&h(n),e&&h(l);for(let e=0;e<i.length;e+=1)i[e].d();f&&f.d(),e&&h(s),ne(o,e)}}}function _t(t){let n;return{c(){n=$("p"),n.textContent=""+("en"===ae?"No records found":"Aucun enregistrement trouvé")},m(e,t){p(e,n,t)},p:e,d(e){e&&h(n)}}}function xt(e,t){let n,l,c;return l=new Fe({props:{item:t[24]}}),{key:e,first:null,c(){n=w(),ee(l.$$.fragment),this.first=n},m(e,t){p(e,n,t),te(l,e,t),c=!0},p(e,n){t=e;const c={};8&n&&(c.item=t[24]),l.$set(c)},i(e){c||(K(l.$$.fragment,e),c=!0)},o(e){Q(l.$$.fragment,e),c=!1},d(e){e&&h(n),ne(l,e)}}}function St(t){let n;return{c(){n=$("div"),n.textContent=""+("en"===ae?"Retrieving records...":"Récupération des enregistrements..."),x(n,"class","faded is-center")},m(e,t){p(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function Nt(t){let n,l,c;return{c(){n=$("tr"),l=$("td"),l.textContent=""+("en"===ae?"No documents in selection":"Aucun document sélectionné"),c=y()},m(e,t){p(e,n,t),m(n,l),m(n,c)},p:e,d(e){e&&h(n)}}}function Lt(t){let n,l,c;return{c(){n=$("tr"),l=$("td"),l.textContent=""+("en"===ae?"No documents in selection":"Aucun document sélectionné"),c=y()},m(e,t){p(e,n,t),m(n,l),m(n,c)},p:e,d(e){e&&h(n)}}}function Pt(e){let t,n,l,c,s,o,r,i,a,u,d,f,g,b,w,_,S=e[19]+"",N=e[20].title+"";function L(){return e[14](e[19],e[15])}return{c(){t=$("tr"),n=$("th"),l=$("span"),c=v("#"),s=v(S),o=y(),r=$("td"),i=$("a"),a=v(N),d=y(),f=$("td"),g=$("button"),b=y(),x(l,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),x(n,"class","is-narrow is-3"),x(i,"href",u=e[20].url),x(i,"target","_blank"),x(g,"class","delete"),x(g,"aria-label","close"),x(f,"class","is-narrow")},m(e,u){p(e,t,u),m(t,n),m(n,l),m(l,c),m(l,s),m(t,o),m(t,r),m(r,i),m(i,a),m(t,d),m(t,f),m(f,g),m(t,b),w||(_=k(g,"click",L),w=!0)},p(t,n){e=t,4&n&&S!==(S=e[19]+"")&&P(s,S),4&n&&N!==(N=e[20].title+"")&&P(a,N),4&n&&u!==(u=e[20].url)&&x(i,"href",u)},d(e){e&&h(t),w=!1,_()}}}function At(e){let t,n,l,c,s,o,r=e[15]+"",i=Object.entries(e[16]),a=[];for(let t=0;t<i.length;t+=1)a[t]=Pt(bt(e,i,t));let u=null;return i.length||(u=Lt()),{c(){t=$("h3"),n=v(r),l=y(),c=$("table"),s=$("tbody");for(let e=0;e<a.length;e+=1)a[e].c();u&&u.c(),o=y(),x(c,"class","table pl-2 is-fullwidth")},m(e,r){p(e,t,r),m(t,n),p(e,l,r),p(e,c,r),m(c,s);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(s,null);u&&u.m(s,null),m(c,o)},p(e,t){if(4&t&&r!==(r=e[15]+"")&&P(n,r),4&t){let n;for(i=Object.entries(e[16]),n=0;n<i.length;n+=1){const l=bt(e,i,n);a[n]?a[n].p(l,t):(a[n]=Pt(l),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length,!i.length&&u?u.p(e,t):i.length?u&&(u.d(1),u=null):(u=Lt(),u.c(),u.m(s,null))}},d(e){e&&h(t),e&&h(l),e&&h(c),g(a,e),u&&u.d()}}}function Ot(e){let t,n=e[2],l=[];for(let t=0;t<n.length;t+=1)l[t]=At($t(e,n,t));let c=null;return n.length||(c=Nt()),{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w(),c&&c.c()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);p(e,t,n),c&&c.m(e,n)},p(e,s){if(4&s){let o;for(n=e[2],o=0;o<n.length;o+=1){const c=$t(e,n,o);l[o]?l[o].p(c,s):(l[o]=At(c),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length,!n.length&&c?c.p(e,s):n.length?c&&(c.d(1),c=null):(c=Nt(),c.c(),c.m(t.parentNode,t))}},d(e){g(l,e),e&&h(t),c&&c.d(e)}}}function Rt(e){let t,n,l,c,s,o,r;t=new Te({props:{selectionLength:e[1]}}),l=new st({props:{recordsStore:e[7],searchFields:e[0]}});let i={ctx:e,current:null,token:null,hasCatch:!0,pending:St,then:wt,catch:yt,value:23,error:27,blocks:[,,,]};return function(e,t){const n=t.token={};function l(e,l,c,s){if(t.token!==n)return;t.resolved=s;let o=t.ctx;void 0!==c&&(o=o.slice(),o[c]=s);const r=e&&(t.current=e)(o);let i=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==l&&e&&(X(),Q(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),Y())})):t.block.d(1),r.c(),K(r,1),r.m(t.mount(),t.anchor),i=!0),t.block=r,t.blocks&&(t.blocks[l]=r),i&&G()}if(!(c=e)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then){if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}else{const n=I();if(e.then((e=>{C(n),l(t.then,1,t.value,e),C(null)}),(e=>{if(C(n),l(t.catch,2,t.error,e),C(null),!t.hasCatch)throw e})),t.current!==t.pending)return l(t.pending,0),!0}var c}(e[9],i),o=new Ge({props:{selectionLength:e[1],$$slots:{default:[Ot]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment),n=y(),ee(l.$$.fragment),c=y(),i.block.c(),s=y(),ee(o.$$.fragment)},m(e,a){te(t,e,a),p(e,n,a),te(l,e,a),p(e,c,a),i.block.m(e,i.anchor=a),i.mount=()=>s.parentNode,i.anchor=s,p(e,s,a),te(o,e,a),r=!0},p(n,[c]){e=n;const s={};2&c&&(s.selectionLength=e[1]),t.$set(s);const r={};1&c&&(r.searchFields=e[0]),l.$set(r),function(e,t,n){const l=t.slice(),{resolved:c}=e;e.current===e.then&&(l[e.value]=c),e.current===e.catch&&(l[e.error]=c),e.block.p(l,n)}(i,e,c);const a={};2&c&&(a.selectionLength=e[1]),268435460&c&&(a.$$scope={dirty:c,ctx:e}),o.$set(a)},i(e){r||(K(t.$$.fragment,e),K(l.$$.fragment,e),K(i.block),K(o.$$.fragment,e),r=!0)},o(e){Q(t.$$.fragment,e),Q(l.$$.fragment,e);for(let e=0;e<3;e+=1){Q(i.blocks[e])}Q(o.$$.fragment,e),r=!1},d(e){ne(t,e),e&&h(n),ne(l,e),e&&h(c),i.block.d(e),i.token=null,i=null,e&&h(s),ne(o,e)}}}function Et(e,t,n){let l,c,s,o,r,i;const{selected:a,nbSelected:u}=pe;d(e,a,(e=>n(13,o=e))),d(e,u,(e=>n(12,s=e)));let{modelName:f=""}=t;var m,p;m="modelName",p=f,I().$$.context.set(m,p);const h=gt(f),{pageRecords:g,resultPage:$,resultNumber:b}=h;d(e,g,(e=>n(3,r=e))),d(e,b,(e=>n(4,i=e)));let{searchFields:v=[]}=t;return e.$$set=e=>{"modelName"in e&&n(11,f=e.modelName),"searchFields"in e&&n(0,v=e.searchFields)},e.$$.update=()=>{8192&e.$$.dirty&&n(2,l=o(!1)),4096&e.$$.dirty&&n(1,c=s(!1))},[v,c,l,r,i,a,u,h,g,$,b,f,s,o,(e,t)=>pe.remove(e,t)]}return new class extends se{constructor(e){super(),ce(this,e,Et,Rt,o,{modelName:11,searchFields:0})}}({target:document.getElementById("record-list"),props:{searchFields:searchFields,modelName:modelName}})}();
//# sourceMappingURL=recordList.js.map
