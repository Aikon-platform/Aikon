var recordList=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l,s;function i(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function u(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function a(t,e,n){t.$$.on_destroy.push(u(e,n))}function d(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function f(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function y(){return b(" ")}function v(){return b("")}function w(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function k(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e,n){t.classList[n?"add":"remove"](e)}function S(t){s=t}function L(){if(!s)throw new Error("Function called outside component initialization");return s}const A=[],R=[];let E=[];const P=[],N=Promise.resolve();let j=!1;function O(t){E.push(t)}const C=new Set;let M=0;function I(){if(0!==M)return;const t=s;do{try{for(;M<A.length;){const t=A[M];M++,S(t),T(t.$$)}}catch(t){throw A.length=0,M=0,t}for(S(null),A.length=0,M=0;R.length;)R.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];C.has(e)||(C.add(e),e())}E.length=0}while(A.length);for(;P.length;)P.pop()();j=!1,C.clear(),S(t)}function T(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const U=new Set;let V;function H(){V={r:0,c:[],p:V}}function z(){V.r||o(V.c),V=V.p}function D(t,e){t&&t.i&&(U.delete(t),t.i(e))}function q(t,e,n,o){if(t&&t.o){if(U.has(t))return;U.add(t),V.c.push((()=>{U.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function B(t,e){const n=e.token={};function o(t,o,r,c){if(e.token!==n)return;e.resolved=c;let l=e.ctx;void 0!==r&&(l=l.slice(),l[r]=c);const s=t&&(e.current=t)(l);let i=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(H(),q(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),z())})):e.block.d(1),s.c(),D(s,1),s.m(e.mount(),e.anchor),i=!0),e.block=s,e.blocks&&(e.blocks[o]=s),i&&I()}if(!(r=t)||"object"!=typeof r&&"function"!=typeof r||"function"!=typeof r.then){if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}else{const n=L();if(t.then((t=>{S(n),o(e.then,1,e.value,t),S(null)}),(t=>{if(S(n),o(e.catch,2,e.error,t),S(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}var r}function F(t,e){q(t,1,1,(()=>{e.delete(t.key)}))}function J(t){t&&t.c()}function X(t,n,c,l){const{fragment:s,after_update:i}=t.$$;s&&s.m(n,c),l||O((()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(O)}function Y(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];E.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),E=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(A.push(t),j||(j=!0,N.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,r,c,l,i,u,a,d=[-1]){const f=s;S(e);const p=e.$$={fragment:null,ctx:[],props:u,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:r.target||f.$$.root};a&&a(p.root);let h=!1;if(p.ctx=c?c(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),h&&G(e,t)),n})):[],p.update(),h=!0,o(p.before_update),p.fragment=!!l&&l(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(g)}else p.fragment&&p.fragment.c();r.intro&&D(e.$$.fragment),X(e,r.target,r.anchor,r.customElement),I()}S(f)}class Q{$destroy(){Y(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const W=[];function Z(e,n=t){let o;const r=new Set;function l(t){if(c(e,t)&&(e=t,o)){const t=!W.length;for(const t of r)t[1](),W.push(t,e);if(t){for(let t=0;t<W.length;t+=2)W[t][0](W[t+1]);W.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(c,s=t){const i=[c,s];return r.add(i),1===r.size&&(o=n(l)||t),c(e),()=>{r.delete(i),0===r.size&&o&&(o(),o=null)}}}}function tt(e,n,c){const l=!Array.isArray(e),s=l?[e]:e,i=n.length<2;return a=e=>{let c=!1;const a=[];let d=0,f=t;const p=()=>{if(d)return;f();const o=n(l?a[0]:a,e);i?e(o):f=r(o)?o:t},g=s.map(((t,e)=>u(t,(t=>{a[e]=t,d&=~(1<<e),c&&p()}),(()=>{d|=1<<e}))));return c=!0,p(),function(){o(g),f(),c=!1}},{subscribe:Z(c,a).subscribe};var a}const et=APP_LANG;USER_ID,CSRF_TOKEN,ADDITIONAL_MODULES;const nt="Regions";SAS_APP_URL;const ot=CANTALOUPE_APP_URL;function rt(t=null,e="full",n="full"){if(!t)return"https://via.placeholder.com/96x96?text=No+Image";if((t=t.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const o=t[t.length-1].includes(",")?t.pop().replace(".jpg",""):e,r=t.join("_").replace(".jpg","");return`${ot??"http://localhost:8182"}/iiif/2/${r}.jpg/${o}/${n}/0/default.jpg`}MEDIA_PATH;const ct=function(){const t=Z(JSON.parse(localStorage.getItem("documentSet"))||{}),{subscribe:e,get:n,update:o}=t;function r(t){localStorage.setItem("documentSet",JSON.stringify(t))}function c(t,e=!0){return e?t[nt]??{}:Object.entries(t).filter((([t,e])=>t!==nt))}function l(t,e,n){if(t[n]){const{[e]:o,...r}=t[n];t={...t,[n]:r}}return r(t),t}function s(t,e){return t.hasOwnProperty(e.type)||(t[e.type]={}),t[e.type]={...t[e.type],[e.id]:e},r(t),t}return{subscribe:e,save:()=>o((t=>(console.log(t),t))),empty:t=>o((e=>(t?delete e[nt]:Object.keys(e).forEach((t=>{t!==nt&&delete e[t]})),r(e),e))),addAll:t=>o((e=>function(t,e){return e.forEach((e=>{t[e.type]||(t[e.type]={}),t[e.type][e.id]=e})),r(t),t}(e,t))),removeAll:(t,e)=>o((n=>function(t,e,n){return t[n]?(e.forEach((e=>{delete t[n][e]})),r(t),t):t}(n,t,e))),remove:(t,e)=>o((n=>l(n,t,e))),add:t=>o((e=>s(e,t))),toggle:t=>o((e=>e[t.type]?.[t.id]?l(e,t.id,t.type):s(e,t))),toggleAll:(t,e,n)=>o((t=>{})),isSelected:tt(t,(t=>e=>t[e.type]?.hasOwnProperty(e.id)||!1)),selected:tt(t,(t=>e=>c(t,e))),nbSelected:tt(t,(t=>e=>{const n=c(t,e);return e?Object.keys(n).length:n.reduce(((t,[e,n])=>t+Object.keys(n).length),0)}))}}();function lt(t,e,n){const o=t.slice();return o[5]=e[n][0],o[6]=e[n][1],o}function st(t,e,n){const o=t.slice();return o[9]=e[n],o}function it(t){let e;return{c(){e=m("span"),e.innerHTML='<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span> \n                                <span style="margin-left: -0.5rem">Public</span>',k(e,"class","pl-3 icon-text is-size-7 is-center has-text-weight-normal")},m(t,n){p(t,e,n)},d(t){t&&g(e)}}}function ut(t){let e,n,o=t[0].hasOwnProperty("iiif"),r=t[0].buttons.includes("regions"),c=o&&at(t),l=r&&ft(t);return{c(){e=m("p"),c&&c.c(),n=y(),l&&l.c(),k(e,"class","subtitle is-6 mb-0 ml-2 pt-2")},m(t,o){p(t,e,o),c&&c.m(e,null),f(e,n),l&&l.m(e,null)},p(t,s){1&s&&(o=t[0].hasOwnProperty("iiif")),o?c?c.p(t,s):(c=at(t),c.c(),c.m(e,n)):c&&(c.d(1),c=null),1&s&&(r=t[0].buttons.includes("regions")),r?l?l.p(t,s):(l=ft(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(t){t&&g(e),c&&c.d(),l&&l.d()}}}function at(t){let e,n=t[0].iiif,o=[];for(let e=0;e<n.length;e+=1)o[e]=dt(st(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=v()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);p(t,e,n)},p(t,r){if(1&r){let c;for(n=t[0].iiif,c=0;c<n.length;c+=1){const l=st(t,n,c);o[c]?o[c].p(l,r):(o[c]=dt(l),o[c].c(),o[c].m(e.parentNode,e))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}},d(t){h(o,t),t&&g(e)}}}function dt(t){let e,n=t[9]+"";return{c(){e=m("span"),k(e,"class","tag logo mt-1")},m(t,o){p(t,e,o),e.innerHTML=n},p(t,o){1&o&&n!==(n=t[9]+"")&&(e.innerHTML=n)},d(t){t&&g(e)}}}function ft(t){let e,n,o,r,c;return{c(){e=m("a"),n=m("span"),o=y(),r=m("span"),r.textContent=""+("en"===et?"Show regions":"Afficher les régions"),k(n,"class","iconify"),k(n,"data-icon","entypo:documents"),k(r,"class","ml-2"),k(e,"href",c=t[0].url+"regions/"),k(e,"class","button is-small is-rounded is-link px-2 py-1"),k(e,"title","en"===et?"View image regions":"Afficher les régions d'images")},m(t,c){p(t,e,c),f(e,n),f(e,o),f(e,r)},p(t,n){1&n&&c!==(c=t[0].url+"regions/")&&k(e,"href",c)},d(t){t&&g(e)}}}function pt(t){let e,n,o=t[1]?"Retirer de la":"Ajouter à la";return{c(){e=b(o),n=b(" sélection")},m(t,o){p(t,e,o),p(t,n,o)},p(t,n){2&n&&o!==(o=t[1]?"Retirer de la":"Ajouter à la")&&x(e,o)},d(t){t&&g(e),t&&g(n)}}}function gt(t){let e,n,o=t[1]?"Remove from":"Add to";return{c(){e=b(o),n=b(" selection")},m(t,o){p(t,e,o),p(t,n,o)},p(t,n){2&n&&o!==(o=t[1]?"Remove from":"Add to")&&x(e,o)},d(t){t&&g(e),t&&g(n)}}}function ht(t){let e;return{c(){e=$("path"),k(e,"fill","currentColor"),k(e,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(t,n){p(t,e,n)},d(t){t&&g(e)}}}function mt(t){let e;return{c(){e=$("path"),k(e,"fill","currentColor"),k(e,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(t,n){p(t,e,n)},d(t){t&&g(e)}}}function $t(t){let e,n,o,r,c,l,s,i=t[5]+"",u=t[6]+"";return{c(){e=m("tr"),n=m("th"),o=b(i),r=y(),c=m("td"),l=b(u),s=y(),k(n,"class","is-narrow is-3")},m(t,i){p(t,e,i),f(e,n),f(n,o),f(e,r),f(e,c),f(c,l),f(e,s)},p(t,e){1&e&&i!==(i=t[5]+"")&&x(o,i),1&e&&u!==(u=t[6]+"")&&x(l,u)},d(t){t&&g(e)}}}function bt(e){let n,o,r,c,l,s,u,a,d,v,S,L,A,R,E,P,N,j,O,C,M,I,T,U,V,H,z,D,q,B,F,J,X,Y,G,K,Q,W=e[0].type+"",Z=e[0].id+"",tt=e[0].title+"",nt=e[0].user+"",ot=e[0].updated_at+"",ct=e[0].is_public&&it(),st=0!==e[0].buttons.length&&ut(e);let at=("en"===et?gt:pt)(e);function dt(t,e){return t[1]?mt:ht}let ft=dt(e),bt=ft(e),yt=Object.entries(e[0].metadata),vt=[];for(let t=0;t<yt.length;t+=1)vt[t]=$t(lt(e,yt,t));return{c(){n=m("div"),o=m("div"),r=m("div"),c=m("div"),l=m("div"),s=m("figure"),u=m("img"),d=y(),v=m("div"),S=m("a"),L=m("span"),A=b(W),R=b(" #"),E=b(Z),P=y(),N=b(tt),j=y(),ct&&ct.c(),C=y(),M=m("p"),I=b(nt),T=y(),U=m("span"),V=b(ot),H=y(),st&&st.c(),z=y(),D=m("div"),q=m("button"),at.c(),B=y(),F=$("svg"),bt.c(),J=y(),X=m("div"),Y=m("table"),G=m("tbody");for(let t=0;t<vt.length;t+=1)vt[t].c();i(u.src,a=rt(e[0].img,"full","250,"))||k(u,"src",a),k(u,"alt","Record illustration"),k(s,"class","card image is-96x96 svelte-xqp9nk"),k(l,"class","media-left"),k(L,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),k(S,"href",O=e[0].url),k(S,"class","title is-4 hoverable pt-2 svelte-xqp9nk"),k(U,"class","tag p-1 mb-1"),k(M,"class","subtitle is-6 mb-0 ml-2 pt-2"),k(v,"class","media-content"),k(F,"xmlns","http://www.w3.org/2000/svg"),k(F,"viewBox","0 0 384 512"),k(F,"class","svelte-xqp9nk"),k(q,"class","button"),_(q,"is-inverted",e[1]),k(D,"class","media-right"),k(c,"class","media"),k(Y,"class","table pl-2 is-fullwidth"),k(X,"class","content"),k(r,"class","card-content"),k(o,"class","card mb-3"),k(n,"class","item")},m(t,i){p(t,n,i),f(n,o),f(o,r),f(r,c),f(c,l),f(l,s),f(s,u),f(c,d),f(c,v),f(v,S),f(S,L),f(L,A),f(L,R),f(L,E),f(S,P),f(S,N),f(S,j),ct&&ct.m(S,null),f(v,C),f(v,M),f(M,I),f(M,T),f(M,U),f(U,V),f(v,H),st&&st.m(v,null),f(c,z),f(c,D),f(D,q),at.m(q,null),f(q,B),f(q,F),bt.m(F,null),f(r,J),f(r,X),f(X,Y),f(Y,G);for(let t=0;t<vt.length;t+=1)vt[t]&&vt[t].m(G,null);K||(Q=w(q,"click",e[4]),K=!0)},p(t,[e]){if(1&e&&!i(u.src,a=rt(t[0].img,"full","250,"))&&k(u,"src",a),1&e&&W!==(W=t[0].type+"")&&x(A,W),1&e&&Z!==(Z=t[0].id+"")&&x(E,Z),1&e&&tt!==(tt=t[0].title+"")&&x(N,tt),t[0].is_public?ct||(ct=it(),ct.c(),ct.m(S,null)):ct&&(ct.d(1),ct=null),1&e&&O!==(O=t[0].url)&&k(S,"href",O),1&e&&nt!==(nt=t[0].user+"")&&x(I,nt),1&e&&ot!==(ot=t[0].updated_at+"")&&x(V,ot),0!==t[0].buttons.length?st?st.p(t,e):(st=ut(t),st.c(),st.m(v,null)):st&&(st.d(1),st=null),at.p(t,e),ft!==(ft=dt(t))&&(bt.d(1),bt=ft(t),bt&&(bt.c(),bt.m(F,null))),2&e&&_(q,"is-inverted",t[1]),1&e){let n;for(yt=Object.entries(t[0].metadata),n=0;n<yt.length;n+=1){const o=lt(t,yt,n);vt[n]?vt[n].p(o,e):(vt[n]=$t(o),vt[n].c(),vt[n].m(G,null))}for(;n<vt.length;n+=1)vt[n].d(1);vt.length=yt.length}},i:t,o:t,d(t){t&&g(n),ct&&ct.d(),st&&st.d(),at.d(),bt.d(),h(vt,t),K=!1,Q()}}}function yt(t,e,n){let o,r;const{isSelected:c}=ct;a(t,c,(t=>n(3,r=t)));let{item:l}=e;return t.$$set=t=>{"item"in t&&n(0,l=t.item)},t.$$.update=()=>{9&t.$$.dirty&&n(1,o=r(l))},[l,o,c,r,()=>ct.toggle(l)]}class vt extends Q{constructor(t){super(),K(this,t,yt,bt,c,{item:0})}}const wt=function(){const t=Z(1),e=Z([]),n=Z(0);async function o(o=null){o||(o=`p=${function(t){let e;return u(t,(t=>e=t))(),e}(t)}`);try{const r=await fetch(`${window.location.origin}/search/witness/?${o}`),c=await r.json();return e.set(c.results),n.set(c.count),t.set(c.current_page),c}catch(t){throw console.error("Error fetching page:",t),t}}!function(t,e){if("undefined"!=typeof window){const n=parseInt(new URLSearchParams(window.location.search).get(e));if(!isNaN(n))return t.set(n),n}t.set(1)}(t,"p");let r=o();return{currentPage:t,pageRecords:e,resultPage:r,fetchPage:o,handlePageUpdate:function(e){!function(t,e,n){if(e.set(t),"undefined"!=typeof window){const e=new URL(window.location.href);e.searchParams.set(n,t),window.history.pushState({},"",e)}}(e,t,"p")}}}();function kt(e){let n,o,r,c,l,s,i,u,a,d="en"===et?"Selection":"Sélection";return{c(){n=m("div"),o=m("button"),r=m("span"),c=m("i"),l=y(),s=b(d),i=b("\n            ("),u=b(e[0]),a=b(")"),k(c,"class","fa-solid fa-book-bookmark"),k(r,"id","btn-content"),k(o,"id","set-btn"),k(o,"class","button px-5 py-4 is-link js-modal-trigger svelte-hs48f9"),k(o,"data-target","selection-modal"),k(n,"class","set-container svelte-hs48f9")},m(t,e){p(t,n,e),f(n,o),f(o,r),f(r,c),f(r,l),f(r,s),f(r,i),f(r,u),f(r,a)},p(t,[e]){1&e&&x(u,t[0])},i:t,o:t,d(t){t&&g(n)}}}function xt(t,e,n){let{selectionLength:o=0}=e,r=o;return t.$$set=t=>{"selectionLength"in t&&n(0,o=t.selectionLength)},t.$$.update=()=>{if(3&t.$$.dirty&&o!==r){const t=o>r;n(1,r=o);const e=document.getElementById("btn-content");e&&e.animate([{transform:t?"translateY(-7px)":"translateX(-5px)"},{transform:t?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[o,r]}class _t extends Q{constructor(t){super(),K(this,t,xt,kt,c,{selectionLength:0})}}function St(e){let n,r,c,l,s,i,u,a,d,h,$="en"===et?"Save selection":"Sauvegarder la sélection";return{c(){n=m("footer"),r=m("div"),c=m("button"),c.textContent=""+("en"===et?"Clear selection":"Vider la sélection"),l=y(),s=m("button"),i=m("i"),u=y(),a=b($),k(c,"class","button is-link is-light"),k(i,"class","fa-solid fa-floppy-disk"),k(s,"class","button is-link"),k(r,"class","buttons"),k(n,"class","modal-card-foot is-center")},m(t,o){p(t,n,o),f(n,r),f(r,c),f(r,l),f(r,s),f(s,i),f(s,u),f(s,a),d||(h=[w(c,"click",e[1]),w(s,"click",e[2])],d=!0)},p:t,i:t,o:t,d(t){t&&g(n),d=!1,o(h)}}}function Lt(t,e,n){let{isRegion:o=!0}=e;return t.$$set=t=>{"isRegion"in t&&n(0,o=t.isRegion)},[o,()=>ct.empty(o),()=>ct.save()]}class At extends Q{constructor(t){super(),K(this,t,Lt,St,c,{isRegion:0})}}function Rt(t){let e,n,o,r,c,l,s,i,u,a,h,$,v,w,_,S,L,A,R,E="en"===et?"Selected regions":"Regions sélectionnées";const P=t[3].default,N=function(t,e,n,o){if(t){const r=d(t,e,n,o);return t[0](r)}}(P,t,t[2],null);return A=new At({props:{isRegion:t[0]}}),{c(){e=m("div"),n=m("div"),o=y(),r=m("div"),c=m("div"),l=m("div"),s=m("i"),i=y(),u=b(E),a=b("\n                ("),h=b(t[1]),$=b(")"),v=y(),w=m("button"),_=y(),S=m("section"),N&&N.c(),L=y(),J(A.$$.fragment),k(n,"class","modal-background"),k(s,"class","fa-solid fa-book-bookmark"),k(l,"class","title is-4 mb-0 media-content"),k(w,"class","delete media-left"),k(w,"aria-label","close"),k(c,"class","modal-card-head media mb-0"),k(S,"class","modal-card-body"),k(r,"class","modal-content"),k(e,"id","selection-modal"),k(e,"class","modal fade"),k(e,"tabindex","-1"),k(e,"aria-labelledby","selection-modal-label"),k(e,"aria-hidden","true")},m(t,d){p(t,e,d),f(e,n),f(e,o),f(e,r),f(r,c),f(c,l),f(l,s),f(l,i),f(l,u),f(l,a),f(l,h),f(l,$),f(c,v),f(c,w),f(r,_),f(r,S),N&&N.m(S,null),f(r,L),X(A,r,null),R=!0},p(t,[e]){(!R||2&e)&&x(h,t[1]),N&&N.p&&(!R||4&e)&&function(t,e,n,o,r,c){if(r){const l=d(e,n,o,c);t.p(l,r)}}(N,P,t,t[2],R?function(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|r[o];return t}return e.dirty|r}return e.dirty}(P,t[2],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[2]),null);const n={};1&e&&(n.isRegion=t[0]),A.$set(n)},i(t){R||(D(N,t),D(A.$$.fragment,t),R=!0)},o(t){q(N,t),q(A.$$.fragment,t),R=!1},d(t){t&&g(e),N&&N.d(t),Y(A)}}}function Et(t,e,n){let{$$slots:o={},$$scope:r}=e,{isRegion:c=!1}=e,{selectionLength:l=!1}=e;return t.$$set=t=>{"isRegion"in t&&n(0,c=t.isRegion),"selectionLength"in t&&n(1,l=t.selectionLength),"$$scope"in t&&n(2,r=t.$$scope)},[c,l,r,o]}class Pt extends Q{constructor(t){super(),K(this,t,Et,Rt,c,{isRegion:0,selectionLength:1})}}function Nt(e){let n,o,r;return{c(){n=m("form"),n.innerHTML='<button type="submit">Search</button>'},m(t,c){p(t,n,c),o||(r=w(n,"submit",e[0]),o=!0)},p:t,i:t,o:t,d(t){t&&g(n),o=!1,r()}}}function jt(t){const{resultPage:e,fetchPage:n}=wt;return[function(t){t.preventDefault();const o=t.target,r=new FormData(o),c=new URLSearchParams(r).toString();e.update(n(c))}]}class Ot extends Q{constructor(t){super(),K(this,t,jt,Nt,c,{})}}function Ct(t,e,n){const o=t.slice();return o[10]=e[n][0],o[11]=e[n][1],o}function Mt(t,e,n){const o=t.slice();return o[14]=e[n][0],o[15]=e[n][1],o}function It(t,e,n){const o=t.slice();return o[19]=e[n],o}function Tt(e){let n,o,r,c,l="en"===et?"Error when retrieving records: ":"Erreur lors de la récupération des enregistrements : ",s=e[22]+"";return{c(){n=m("div"),o=b(l),r=y(),c=b(s),k(n,"class","faded is-center")},m(t,e){p(t,n,e),f(n,o),f(n,r),f(n,c)},p:t,i:t,o:t,d(t){t&&g(n)}}}function Ut(t){let e,n,o=0!==t[2].length&&Vt(t);return{c(){o&&o.c(),e=v()},m(t,r){o&&o.m(t,r),p(t,e,r),n=!0},p(t,n){0!==t[2].length?o?(o.p(t,n),4&n&&D(o,1)):(o=Vt(t),o.c(),D(o,1),o.m(e.parentNode,e)):o&&(H(),q(o,1,1,(()=>{o=null})),z())},i(t){n||(D(o),n=!0)},o(t){q(o),n=!1},d(t){o&&o.d(t),t&&g(e)}}}function Vt(t){let e,n,r=[],c=new Map,l=t[2];const s=t=>t[19].id;for(let e=0;e<l.length;e+=1){let n=It(t,l,e),o=s(n);c.set(o,r[e]=zt(o,n))}let i=null;return l.length||(i=Ht()),{c(){e=m("div");for(let t=0;t<r.length;t+=1)r[t].c();i&&i.c()},m(t,o){p(t,e,o);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null);i&&i.m(e,null),n=!0},p(t,n){4&n&&(l=t[2],H(),r=function(t,e,n,r,c,l,s,i,u,a,d,f){let p=t.length,g=l.length,h=p;const m={};for(;h--;)m[t[h].key]=h;const $=[],b=new Map,y=new Map,v=[];for(h=g;h--;){const t=f(c,l,h),o=n(t);let i=s.get(o);i?r&&v.push((()=>i.p(t,e))):(i=a(o,t),i.c()),b.set(o,$[h]=i),o in m&&y.set(o,Math.abs(h-m[o]))}const w=new Set,k=new Set;function x(t){D(t,1),t.m(i,d),s.set(t.key,t),d=t.first,g--}for(;p&&g;){const e=$[g-1],n=t[p-1],o=e.key,r=n.key;e===n?(d=e.first,p--,g--):b.has(r)?!s.has(o)||w.has(o)?x(e):k.has(r)?p--:y.get(o)>y.get(r)?(k.add(o),x(e)):(w.add(r),p--):(u(n,s),p--)}for(;p--;){const e=t[p];b.has(e.key)||u(e,s)}for(;g;)x($[g-1]);return o(v),$}(r,n,s,1,t,l,c,e,F,zt,null,It),z(),!l.length&&i?i.p(t,n):l.length?i&&(i.d(1),i=null):(i=Ht(),i.c(),i.m(e,null)))},i(t){if(!n){for(let t=0;t<l.length;t+=1)D(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)q(r[t]);n=!1},d(t){t&&g(e);for(let t=0;t<r.length;t+=1)r[t].d();i&&i.d()}}}function Ht(e){let n;return{c(){n=m("p"),n.textContent=""+("en"===et?"No records found":"Aucun enregistrement trouvé")},m(t,e){p(t,n,e)},p:t,d(t){t&&g(n)}}}function zt(t,e){let n,o,r;return o=new vt({props:{item:e[19]}}),{key:t,first:null,c(){n=v(),J(o.$$.fragment),this.first=n},m(t,e){p(t,n,e),X(o,t,e),r=!0},p(t,n){e=t;const r={};4&n&&(r.item=e[19]),o.$set(r)},i(t){r||(D(o.$$.fragment,t),r=!0)},o(t){q(o.$$.fragment,t),r=!1},d(t){t&&g(n),Y(o,t)}}}function Dt(e){let n;return{c(){n=m("div"),n.textContent=""+("en"===et?"Retrieving records...":"Récupération des enregistrements..."),k(n,"class","faded is-center")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&g(n)}}}function qt(e){let n,o,r;return{c(){n=m("tr"),o=m("td"),o.textContent=""+("en"===et?"No documents in selection":"Aucun document sélectionné"),r=y()},m(t,e){p(t,n,e),f(n,o),f(n,r)},p:t,d(t){t&&g(n)}}}function Bt(e){let n,o,r;return{c(){n=m("tr"),o=m("td"),o.textContent=""+("en"===et?"No documents in selection":"Aucun document sélectionné"),r=y()},m(t,e){p(t,n,e),f(n,o),f(n,r)},p:t,d(t){t&&g(n)}}}function Ft(t){let e,n,o,r,c,l,s,i,u,a,d,h,$,v,_,S,L=t[14]+"",A=t[15].title+"";function R(){return t[9](t[14],t[10])}return{c(){e=m("tr"),n=m("th"),o=m("span"),r=b("#"),c=b(L),l=y(),s=m("td"),i=m("a"),u=b(A),d=y(),h=m("td"),$=m("button"),v=y(),k(o,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),k(n,"class","is-narrow is-3"),k(i,"href",a=t[15].url),k(i,"target","_blank"),k($,"class","delete"),k($,"aria-label","close"),k(h,"class","is-narrow")},m(t,a){p(t,e,a),f(e,n),f(n,o),f(o,r),f(o,c),f(e,l),f(e,s),f(s,i),f(i,u),f(e,d),f(e,h),f(h,$),f(e,v),_||(S=w($,"click",R),_=!0)},p(e,n){t=e,2&n&&L!==(L=t[14]+"")&&x(c,L),2&n&&A!==(A=t[15].title+"")&&x(u,A),2&n&&a!==(a=t[15].url)&&k(i,"href",a)},d(t){t&&g(e),_=!1,S()}}}function Jt(t){let e,n,o,r,c,l,s=t[10]+"",i=Object.entries(t[11]),u=[];for(let e=0;e<i.length;e+=1)u[e]=Ft(Mt(t,i,e));let a=null;return i.length||(a=Bt()),{c(){e=m("h3"),n=b(s),o=y(),r=m("table"),c=m("tbody");for(let t=0;t<u.length;t+=1)u[t].c();a&&a.c(),l=y(),k(r,"class","table pl-2 is-fullwidth")},m(t,s){p(t,e,s),f(e,n),p(t,o,s),p(t,r,s),f(r,c);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(c,null);a&&a.m(c,null),f(r,l)},p(t,e){if(2&e&&s!==(s=t[10]+"")&&x(n,s),2&e){let n;for(i=Object.entries(t[11]),n=0;n<i.length;n+=1){const o=Mt(t,i,n);u[n]?u[n].p(o,e):(u[n]=Ft(o),u[n].c(),u[n].m(c,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=i.length,!i.length&&a?a.p(t,e):i.length?a&&(a.d(1),a=null):(a=Bt(),a.c(),a.m(c,null))}},d(t){t&&g(e),t&&g(o),t&&g(r),h(u,t),a&&a.d()}}}function Xt(t){let e,n=t[1],o=[];for(let e=0;e<n.length;e+=1)o[e]=Jt(Ct(t,n,e));let r=null;return n.length||(r=qt()),{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=v(),r&&r.c()},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);p(t,e,n),r&&r.m(t,n)},p(t,c){if(2&c){let l;for(n=t[1],l=0;l<n.length;l+=1){const r=Ct(t,n,l);o[l]?o[l].p(r,c):(o[l]=Jt(r),o[l].c(),o[l].m(e.parentNode,e))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length,!n.length&&r?r.p(t,c):n.length?r&&(r.d(1),r=null):(r=qt(),r.c(),r.m(e.parentNode,e))}},d(t){h(o,t),t&&g(e),r&&r.d(t)}}}function Yt(t){let e,n,o,r,c,l,s;e=new _t({props:{selectionLength:t[0]}}),o=new Ot({});let i={ctx:t,current:null,token:null,hasCatch:!0,pending:Dt,then:Ut,catch:Tt,value:18,error:22,blocks:[,,,]};return B(t[4],i),l=new Pt({props:{selectionLength:t[0],$$slots:{default:[Xt]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment),n=y(),J(o.$$.fragment),r=y(),i.block.c(),c=y(),J(l.$$.fragment)},m(t,u){X(e,t,u),p(t,n,u),X(o,t,u),p(t,r,u),i.block.m(t,i.anchor=u),i.mount=()=>c.parentNode,i.anchor=c,p(t,c,u),X(l,t,u),s=!0},p(n,[o]){t=n;const r={};1&o&&(r.selectionLength=t[0]),e.$set(r),function(t,e,n){const o=e.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,n)}(i,t,o);const c={};1&o&&(c.selectionLength=t[0]),8388610&o&&(c.$$scope={dirty:o,ctx:t}),l.$set(c)},i(t){s||(D(e.$$.fragment,t),D(o.$$.fragment,t),D(i.block),D(l.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),q(o.$$.fragment,t);for(let t=0;t<3;t+=1){q(i.blocks[t])}q(l.$$.fragment,t),s=!1},d(t){Y(e,t),t&&g(n),Y(o,t),t&&g(r),i.block.d(t),i.token=null,i=null,t&&g(c),Y(l,t)}}}function Gt(t,e,n){let o,r,c,l,s;const{pageRecords:i,resultPage:u}=wt;a(t,i,(t=>n(2,s=t)));const{selected:d,nbSelected:f}=ct;a(t,d,(t=>n(8,l=t))),a(t,f,(t=>n(7,c=t)));return t.$$.update=()=>{256&t.$$.dirty&&n(1,o=l(!1)),128&t.$$.dirty&&n(0,r=c(!1))},[r,o,s,i,u,d,f,c,l,(t,e)=>ct.remove(t,e)]}return new class extends Q{constructor(t){super(),K(this,t,Gt,Yt,c,{})}}({target:document.getElementById("record-list"),props:{}})}();
//# sourceMappingURL=recordList.js.map
