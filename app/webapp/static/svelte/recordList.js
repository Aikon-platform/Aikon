var recordList=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function l(){return Object.create(null)}function s(e){e.forEach(n)}function r(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let o;function i(e,t){return o||(o=document.createElement("a")),o.href=t,e===o.href}function a(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function u(e){let t;return a(e,(e=>t=e))(),t}function d(e,t,n){e.$$.on_destroy.push(a(t,n))}function m(e,t,n,l){if(e){const s=f(e,t,n,l);return e[0](s)}}function f(e,n,l,s){return e[1]&&s?t(l.ctx.slice(),e[1](s(n))):l.ctx}function p(e,t,n,l){if(e[2]&&l){const s=e[2](l(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|s[l];return e}return t.dirty|s}return t.dirty}function g(e,t,n,l,s,r){if(s){const c=f(t,n,l,r);e.p(c,s)}}function h(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function $(e,t){e.appendChild(t)}function b(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode&&e.parentNode.removeChild(e)}function v(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function k(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function x(e){return document.createTextNode(e)}function _(){return x(" ")}function S(){return x("")}function O(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function L(e){return function(t){return t.preventDefault(),e.call(this,t)}}function P(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const A=["width","height"];function N(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)null==t[l]?e.removeAttribute(l):"style"===l?e.style.cssText=t[l]:"__value"===l?e.value=e[l]=t[l]:n[l]&&n[l].set&&-1===A.indexOf(l)?e[l]=t[l]:P(e,l,t[l])}function R(e){return""===e?null:+e}function E(e,t){t=""+t,e.data!==t&&(e.data=t)}function j(e,t){e.value=null==t?"":t}function C(e,t,n){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function T(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function M(e,t,n){e.classList[n?"add":"remove"](t)}let I;function F(e){I=e}function U(){if(!I)throw new Error("Function called outside component initialization");return I}function H(e,t){return U().$$.context.set(e,t),t}const V=[],D=[];let G=[];const z=[],B=Promise.resolve();let q=!1;function J(e){G.push(e)}const X=new Set;let K=0;function Y(){if(0!==K)return;const e=I;do{try{for(;K<V.length;){const e=V[K];K++,F(e),W(e.$$)}}catch(e){throw V.length=0,K=0,e}for(F(null),V.length=0,K=0;D.length;)D.pop()();for(let e=0;e<G.length;e+=1){const t=G[e];X.has(t)||(X.add(t),t())}G.length=0}while(V.length);for(;z.length;)z.pop()();q=!1,X.clear(),F(e)}function W(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}const Q=new Set;let Z;function ee(){Z={r:0,c:[],p:Z}}function te(){Z.r||s(Z.c),Z=Z.p}function ne(e,t){e&&e.i&&(Q.delete(e),e.i(t))}function le(e,t,n,l){if(e&&e.o){if(Q.has(e))return;Q.add(e),Z.c.push((()=>{Q.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}else l&&l()}function se(e,t){le(e,1,1,(()=>{t.delete(e.key)}))}function re(e){e&&e.c()}function ce(e,t,l,c){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,l),c||J((()=>{const t=e.$$.on_mount.map(n).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...t):s(t),e.$$.on_mount=[]})),i.forEach(J)}function oe(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];G.forEach((l=>-1===e.indexOf(l)?t.push(l):n.push(l))),n.forEach((e=>e())),G=t}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ie(e,t){-1===e.$$.dirty[0]&&(V.push(e),q||(q=!0,B.then(Y)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ae(t,n,r,c,o,i,a,u=[-1]){const d=I;F(t);const m=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:o,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:l(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(m.root);let f=!1;if(m.ctx=r?r(t,n.props||{},((e,n,...l)=>{const s=l.length?l[0]:n;return m.ctx&&o(m.ctx[e],m.ctx[e]=s)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](s),f&&ie(t,e)),n})):[],m.update(),f=!0,s(m.before_update),m.fragment=!!c&&c(m.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);m.fragment&&m.fragment.l(e),e.forEach(y)}else m.fragment&&m.fragment.c();n.intro&&ne(t.$$.fragment),ce(t,n.target,n.anchor,n.customElement),Y()}F(d)}class ue{$destroy(){oe(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const de=APP_LANG,me=APP_NAME,fe=WEBAPP_NAME;USER_ID;const pe=CSRF_TOKEN;ADDITIONAL_MODULES;const ge="Regions";SAS_APP_URL;const he=CANTALOUPE_APP_URL;MEDIA_PATH;const $e=[];function be(t,n=e){let l;const s=new Set;function r(e){if(c(t,e)&&(t=e,l)){const e=!$e.length;for(const e of s)e[1](),$e.push(e,t);if(e){for(let e=0;e<$e.length;e+=2)$e[e][0]($e[e+1]);$e.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(c,o=e){const i=[c,o];return s.add(i),1===s.size&&(l=n(r)||e),c(t),()=>{s.delete(i),0===s.size&&l&&(l(),l=null)}}}}function ye(t,n,l){const c=!Array.isArray(t),o=c?[t]:t,i=n.length<2;return u=t=>{let l=!1;const u=[];let d=0,m=e;const f=()=>{if(d)return;m();const l=n(c?u[0]:u,t);i?t(l):m=r(l)?l:e},p=o.map(((e,t)=>a(e,(e=>{u[t]=e,d&=~(1<<t),l&&f()}),(()=>{d|=1<<t}))));return l=!0,f(),function(){s(p),m(),l=!1}},{subscribe:be(l,u).subscribe};var u}const ve=function(){const e={id:null,type:"documentSet",title:"en"===de?"Document set":"Set de document",selected:{}},t={id:null,type:"regionsSet",title:"en"===de?"Regions set":"Set de régions",selected:{}},n=be({records:JSON.parse(localStorage.getItem("documentSet"))||e,regions:JSON.parse(localStorage.getItem("regionsSet"))||t}),{subscribe:l,update:s,get:r}=n,c=be(!1);function o(e,t=!1){c.set(t),localStorage.setItem(e.type,JSON.stringify(e))}function i(e,t){return e[t?"regions":"records"]?.selected||{}}function a(e,t=!0){const n=i(e,t);return t?n[ge]??{}:Object.entries(n)}function u(e,t,n){const l=n===ge?"regions":"records",s=e[l],{[t]:r,...c}=s.selected[n];return e[l]={...s,selected:{...s.selected,[n]:c}},o(e[l]),e}function d(e,t,n=!0){const l=t.class===ge?"regions":"records",s=e[l],r=s.selected,c=t.class===ge?t:{title:t.title,url:t.url};return e[l]={...s,selected:{...r,[t.class]:{...r[t.class]||{},[t.id]:c}}},n&&o(e[l]),e}function m(e,t){return e[t.class.toLowerCase().includes("regions")?"regions":"records"].id===t.id}return{subscribe:l,save:e=>s((t=>function(e,t){const n=t?"regions-set":"document-set";if(t)return window.alert("Region set management is not yet implemented"),e;let l=e[t?"regions":"records"],r={};Object.entries(l.selected).forEach((([e,t])=>{r[e]=Object.keys(t)}));const o=null!==l.id?`${l.id}/change`:"add";return fetch(`${window.location.origin}/${me}/${n}/${o}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":pe},body:JSON.stringify({title:l.title,selection:l,...r})}).then((e=>e.json())).then((e=>{if(!e?.document_set_id)throw new Error("Failed to save selection");s((n=>{const l=n[t?"regions":"records"];return l.id=e.document_set_id,l.title=e.document_set_title,c.set(!0),n}))})).catch((e=>console.error("Error:",e))),e}(t,e))),empty:n=>s((l=>(l[n?"regions":"records"]=n?t:e,o(l[n?"regions":"records"]),l))),removeAll:(e,t)=>s((n=>function(e,t,n){const l=n===ge?"regions":"records",s=e[l];let r=s.selected[n];return r&&Object.keys(r).length?(t.forEach((e=>{delete r[e]})),e[l]={...s,selected:{...s.selected,[n]:r}},o(e[l]),e):e}(n,e,t))),remove:(e,t)=>s((n=>u(n,e,t))),addAll:e=>s((t=>function(e,t){const n=t[0].type===ge;return t.forEach((t=>{e=d(e,t,!1)})),o(e[n?"regions":"records"]),e}(t,e))),add:e=>s((t=>d(t,e))),toggle:e=>s((t=>{const n=i(t,e.class===ge);return n[e.class]?.[e.id]?u(t,e.id,e.class):d(t,e)})),updateTitle:(e,t)=>s((n=>{const l=t?"regions":"records";return n[l]={...n[l],title:e},o(n[l],!0),n})),isSaved:c,isSelected:ye(n,(e=>t=>i(e,t.class===ge)[t.class]?.hasOwnProperty(t.id)||!1)),isSetSelected:ye(n,(e=>t=>m(e,t))),selected:ye(n,(e=>t=>a(e,t))),nbSelected:ye(n,(e=>t=>{const n=a(e,t);return t?Object.keys(n).length:n.reduce(((e,[t,n])=>e+Object.keys(n).length),0)})),selectionTitle:ye(n,(e=>t=>e[t?"regions":"records"].title)),selection:ye(n,(e=>t=>e[t?"regions":"records"])),toggleSet:n=>s((l=>m(l,n)?function(n,l){const s=l.class.toLowerCase().includes("regions");return n[s?"regions":"records"]=s?t:e,n}(l,n):function(e,t){return e[t.class.toLowerCase().includes("regions")?"regions":"records"]=t.selection,e}(l,n)))}}();function we(e){let t,n,l=e[1]?"Retirer de la":"Ajouter à la";return{c(){t=x(l),n=x(" sélection")},m(e,l){b(e,t,l),b(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Retirer de la":"Ajouter à la")&&E(t,l)},d(e){e&&y(t),e&&y(n)}}}function ke(e){let t,n,l=e[1]?"Remove from":"Add to";return{c(){t=x(l),n=x(" selection")},m(e,l){b(e,t,l),b(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Remove from":"Add to")&&E(t,l)},d(e){e&&y(t),e&&y(n)}}}function xe(e){let t;return{c(){t=k("path"),P(t,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function _e(e){let t;return{c(){t=k("path"),P(t,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function Se(t){let n,l,s,r,c;let o=("en"===de?ke:we)(t);function i(e,t){return e[1]?_e:xe}let a=i(t),u=a(t);return{c(){n=w("button"),o.c(),l=_(),s=k("svg"),u.c(),P(s,"xmlns","http://www.w3.org/2000/svg"),P(s,"viewBox","0 0 384 512"),P(s,"class","svelte-135nggd"),P(n,"class","button"),M(n,"is-inverted",t[1])},m(e,i){b(e,n,i),o.m(n,null),$(n,l),$(n,s),u.m(s,null),r||(c=O(n,"click",t[4]),r=!0)},p(e,[t]){o.p(e,t),a!==(a=i(e))&&(u.d(1),u=a(e),u&&(u.c(),u.m(s,null))),2&t&&M(n,"is-inverted",e[1])},i:e,o:e,d(e){e&&y(n),o.d(),u.d(),r=!1,c()}}}function Oe(e,t,n){let l,s;const{isSelected:r}=ve;d(e,r,(e=>n(3,s=e)));let{item:c}=t;return e.$$set=e=>{"item"in e&&n(0,c=e.item)},e.$$.update=()=>{9&e.$$.dirty&&n(1,l=s(c))},[c,l,r,s,()=>ve.toggle(c)]}class Le extends ue{constructor(e){super(),ae(this,e,Oe,Se,c,{item:0})}}function Pe(e=null,t="full",n="full"){if(!e)return"https://via.placeholder.com/96x96?text=No+Image";if((e=e.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const l=e[e.length-1].includes(",")?e.pop().replace(".jpg",""):t,s=e.join("_").replace(".jpg","");return`${he??"http://localhost:8182"}/iiif/2/${s}.jpg/${l}/${n}/0/default.jpg`}const Ae=e=>({}),Ne=e=>({}),Re=e=>({}),Ee=e=>({});function je(e,t,n){const l=e.slice();return l[4]=t[n],l}function Ce(e){let t,n,l,s;return{c(){t=w("div"),n=w("figure"),l=w("img"),i(l.src,s=Pe(e[0].img,"full","250,"))||P(l,"src",s),P(l,"alt","Record illustration"),P(n,"class","card image is-96x96 svelte-1bxybuh"),P(t,"class","media-left")},m(e,s){b(e,t,s),$(t,n),$(n,l)},p(e,t){1&t&&!i(l.src,s=Pe(e[0].img,"full","250,"))&&P(l,"src",s)},d(e){e&&y(t)}}}function Te(e){let t;return{c(){t=w("span"),t.innerHTML='<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span> \n                                <span style="margin-left: -0.5rem">Public</span>',P(t,"class","pl-3 icon-text is-size-7 is-center has-text-weight-normal")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function Me(e){let t,n=e[0].user+"";return{c(){t=x(n)},m(e,n){b(e,t,n)},p(e,l){1&l&&n!==(n=e[0].user+"")&&E(t,n)},d(e){e&&y(t)}}}function Ie(e){let t,n,l=e[0].updated_at+"";return{c(){t=w("span"),n=x(l),P(t,"class","tag p-1 mb-1")},m(e,l){b(e,t,l),$(t,n)},p(e,t){1&t&&l!==(l=e[0].updated_at+"")&&E(n,l)},d(e){e&&y(t)}}}function Fe(e){let t,n,l=e[0].hasOwnProperty("iiif"),s=e[0].buttons.hasOwnProperty("regions"),r=l&&Ue(e),c=s&&Ve(e);return{c(){t=w("p"),r&&r.c(),n=_(),c&&c.c(),P(t,"class","subtitle is-6 mb-0 ml-2 pt-2 is-middle")},m(e,l){b(e,t,l),r&&r.m(t,null),$(t,n),c&&c.m(t,null)},p(e,o){1&o&&(l=e[0].hasOwnProperty("iiif")),l?r?r.p(e,o):(r=Ue(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),1&o&&(s=e[0].buttons.hasOwnProperty("regions")),s?c?c.p(e,o):(c=Ve(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(e){e&&y(t),r&&r.d(),c&&c.d()}}}function Ue(e){let t,n=e[0].iiif,l=[];for(let t=0;t<n.length;t+=1)l[t]=He(je(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=S()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);b(e,t,n)},p(e,s){if(1&s){let r;for(n=e[0].iiif,r=0;r<n.length;r+=1){const c=je(e,n,r);l[r]?l[r].p(c,s):(l[r]=He(c),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){v(l,e),e&&y(t)}}}function He(e){let t,n=e[4]+"";return{c(){t=w("span"),P(t,"class","tag logo mt-1")},m(e,l){b(e,t,l),t.innerHTML=n},p(e,l){1&l&&n!==(n=e[4]+"")&&(t.innerHTML=n)},d(e){e&&y(t)}}}function Ve(e){let t,n,l,s,r;return{c(){t=w("a"),n=w("span"),l=_(),s=w("span"),s.textContent=""+("en"===de?"Show regions":"Afficher les régions"),P(n,"class","iconify"),P(n,"data-icon","entypo:documents"),P(s,"class","ml-2"),P(t,"href",r=e[0].buttons.regions),P(t,"class","regions-btn button is-small is-rounded is-link px-2 svelte-1bxybuh"),P(t,"title","en"===de?"View image regions":"Afficher les régions d'images")},m(e,r){b(e,t,r),$(t,n),$(t,l),$(t,s)},p(e,n){1&n&&r!==(r=e[0].buttons.regions)&&P(t,"href",r)},d(e){e&&y(t)}}}function De(e){let t,n,l,s,r,c,o,i,a,u,d,f,v,k,S,O,L,A,N,R,j,C,T,M,I=e[0].hasOwnProperty("img"),F=e[0].type+"",U=e[0].id+"",H=e[0].title+"",V=e[0].hasOwnProperty("is_public")&&e[0].is_public,D=e[0].hasOwnProperty("buttons")&&0!==Object.keys(e[0].buttons).length,G=I&&Ce(e),z=V&&Te(),B=e[0].user&&Me(e),q=e[0].updated_at&&Ie(e),J=D&&Fe(e);const X=e[3].buttons,K=m(X,e,e[2],Ee),Y=e[3].body,W=m(Y,e,e[2],Ne);return{c(){t=w("div"),n=w("div"),l=w("div"),s=w("div"),G&&G.c(),r=_(),c=w("div"),o=w("a"),i=w("span"),a=x(F),u=x(" #"),d=x(U),f=_(),v=x(H),k=_(),z&&z.c(),O=_(),L=w("p"),B&&B.c(),A=_(),q&&q.c(),N=_(),J&&J.c(),R=_(),j=w("div"),K&&K.c(),C=_(),T=w("div"),W&&W.c(),P(i,"class","tag px-2 py-1 mb-1 mr-1 is-dark is-rounded"),P(o,"href",S=e[1]?e[0].url:null),P(o,"class","title is-4 "+(e[1]?"hoverable":"")+" pt-2 svelte-1bxybuh"),P(L,"class","subtitle is-6 mb-0 ml-2 pt-2"),P(c,"class","media-content"),P(j,"class","media-right"),P(s,"class","media"),P(T,"class","content fixed-grid px-5"),P(l,"class","card-content"),P(n,"class","card mb-3"),P(t,"class","item")},m(e,m){b(e,t,m),$(t,n),$(n,l),$(l,s),G&&G.m(s,null),$(s,r),$(s,c),$(c,o),$(o,i),$(i,a),$(i,u),$(i,d),$(o,f),$(o,v),$(o,k),z&&z.m(o,null),$(c,O),$(c,L),B&&B.m(L,null),$(L,A),q&&q.m(L,null),$(c,N),J&&J.m(c,null),$(s,R),$(s,j),K&&K.m(j,null),$(l,C),$(l,T),W&&W.m(T,null),M=!0},p(e,[t]){1&t&&(I=e[0].hasOwnProperty("img")),I?G?G.p(e,t):(G=Ce(e),G.c(),G.m(s,r)):G&&(G.d(1),G=null),(!M||1&t)&&F!==(F=e[0].type+"")&&E(a,F),(!M||1&t)&&U!==(U=e[0].id+"")&&E(d,U),(!M||1&t)&&H!==(H=e[0].title+"")&&E(v,H),1&t&&(V=e[0].hasOwnProperty("is_public")&&e[0].is_public),V?z||(z=Te(),z.c(),z.m(o,null)):z&&(z.d(1),z=null),(!M||1&t&&S!==(S=e[1]?e[0].url:null))&&P(o,"href",S),e[0].user?B?B.p(e,t):(B=Me(e),B.c(),B.m(L,A)):B&&(B.d(1),B=null),e[0].updated_at?q?q.p(e,t):(q=Ie(e),q.c(),q.m(L,null)):q&&(q.d(1),q=null),1&t&&(D=e[0].hasOwnProperty("buttons")&&0!==Object.keys(e[0].buttons).length),D?J?J.p(e,t):(J=Fe(e),J.c(),J.m(c,null)):J&&(J.d(1),J=null),K&&K.p&&(!M||4&t)&&g(K,X,e,e[2],M?p(X,e[2],t,Re):h(e[2]),Ee),W&&W.p&&(!M||4&t)&&g(W,Y,e,e[2],M?p(Y,e[2],t,Ae):h(e[2]),Ne)},i(e){M||(ne(K,e),ne(W,e),M=!0)},o(e){le(K,e),le(W,e),M=!1},d(e){e&&y(t),G&&G.d(),z&&z.d(),B&&B.d(),q&&q.d(),J&&J.d(),K&&K.d(e),W&&W.d(e)}}}function Ge(e,t,n){let{$$slots:l={},$$scope:s}=t,{item:r}=t;const c=r.hasOwnProperty("url")&&""!==r.url;return e.$$set=e=>{"item"in e&&n(0,r=e.item),"$$scope"in e&&n(2,s=e.$$scope)},[r,c,s,l]}class ze extends ue{constructor(e){super(),ae(this,e,Ge,De,c,{item:0})}}function Be(e,t,n){const l=e.slice();return l[1]=t[n][0],l[2]=t[n][1],l}function qe(e){let t,n,l;return n=new Le({props:{item:e[0]}}),{c(){t=w("div"),re(n.$$.fragment),P(t,"slot","buttons")},m(e,s){b(e,t,s),ce(n,t,null),l=!0},p(e,t){const l={};1&t&&(l.item=e[0]),n.$set(l)},i(e){l||(ne(n.$$.fragment,e),l=!0)},o(e){le(n.$$.fragment,e),l=!1},d(e){e&&y(t),oe(n)}}}function Je(e){let t,n,l,s,r,c,o,i=e[1]+"",a=e[2]+"";return{c(){t=w("div"),n=w("div"),l=x(i),s=_(),r=w("div"),o=_(),P(n,"class","column is-4 is-bold"),P(r,"class",c="column is-8 "+("-"===e[2]?"faded":"")),P(t,"class","datum is-middle columns svelte-ln5qdg")},m(e,c){b(e,t,c),$(t,n),$(n,l),$(t,s),$(t,r),r.innerHTML=a,$(t,o)},p(e,t){1&t&&i!==(i=e[1]+"")&&E(l,i),1&t&&a!==(a=e[2]+"")&&(r.innerHTML=a),1&t&&c!==(c="column is-8 "+("-"===e[2]?"faded":""))&&P(r,"class",c)},d(e){e&&y(t)}}}function Xe(e){let t,n=Object.entries(e[0].metadata),l=[];for(let t=0;t<n.length;t+=1)l[t]=Je(Be(e,n,t));return{c(){t=w("div");for(let e=0;e<l.length;e+=1)l[e].c();P(t,"slot","body"),P(t,"class","grid metadata pt-2 svelte-ln5qdg")},m(e,n){b(e,t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(e,s){if(1&s){let r;for(n=Object.entries(e[0].metadata),r=0;r<n.length;r+=1){const c=Be(e,n,r);l[r]?l[r].p(c,s):(l[r]=Je(c),l[r].c(),l[r].m(t,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){e&&y(t),v(l,e)}}}function Ke(e){let t,n;return t=new ze({props:{item:e[0],$$slots:{body:[Xe],buttons:[qe]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment)},m(e,l){ce(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.item=e[0]),33&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(ne(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function Ye(e,t,n){let{item:l}=t;return e.$$set=e=>{"item"in e&&n(0,l=e.item)},[l]}class We extends ue{constructor(e){super(),ae(this,e,Ye,Ke,c,{item:0})}}function Qe(t){let n,l,s,r,c,o,i,a,u,d="en"===de?"Selection":"Sélection";return{c(){n=w("div"),l=w("button"),s=w("span"),r=w("i"),c=_(),o=x(d),i=x("\n            ("),a=x(t[0]),u=x(")"),P(r,"class","fa-solid fa-book-bookmark"),P(s,"id","btn-content"),P(l,"id","set-btn"),P(l,"class","button px-5 py-4 is-link js-modal-trigger svelte-hs48f9"),P(l,"data-target","selection-modal"),P(n,"class","set-container svelte-hs48f9")},m(e,t){b(e,n,t),$(n,l),$(l,s),$(s,r),$(s,c),$(s,o),$(s,i),$(s,a),$(s,u)},p(e,[t]){1&t&&E(a,e[0])},i:e,o:e,d(e){e&&y(n)}}}function Ze(e,t,n){let{selectionLength:l=0}=t,s=l;return e.$$set=e=>{"selectionLength"in e&&n(0,l=e.selectionLength)},e.$$.update=()=>{if(3&e.$$.dirty&&l!==s){const e=l>s;n(1,s=l);const t=document.getElementById("btn-content");t&&t.animate([{transform:e?"translateY(-7px)":"translateX(-5px)"},{transform:e?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[l,s]}class et extends ue{constructor(e){super(),ae(this,e,Ze,Qe,c,{selectionLength:0})}}function tt(t){let n,l,s,r,c,o,i,a="en"===de?"Save selection":"Sauvegarder la sélection";return{c(){n=w("button"),l=w("span"),s=w("i"),r=_(),c=x(a),P(s,"class","fa-solid fa-floppy-disk"),P(n,"class","button is-link")},m(e,a){b(e,n,a),$(n,l),$(l,s),$(l,r),$(l,c),o||(i=O(n,"click",t[6]),o=!0)},p:e,d(e){e&&y(n),o=!1,i()}}}function nt(e){let t,n,l,s,r,c,o="en"===de?"Go to treatment":"Accéder au traitement";return{c(){t=w("a"),n=w("span"),l=w("i"),s=_(),r=x(o),P(l,"class","fa-solid fa-gear"),P(t,"class","button is-link"),P(t,"href",c="/"+me+"/treatment/add/?document_set="+e[2](e[0]).id)},m(e,c){b(e,t,c),$(t,n),$(n,l),$(n,s),$(n,r)},p(e,n){5&n&&c!==(c="/"+me+"/treatment/add/?document_set="+e[2](e[0]).id)&&P(t,"href",c)},d(e){e&&y(t)}}}function lt(t){let n,l,s,r,c,o;function i(e,t){return e[1]?nt:tt}let a=i(t),u=a(t);return{c(){n=w("footer"),l=w("div"),s=w("button"),s.textContent=""+("en"===de?"Clear selection":"Vider la sélection"),r=_(),u.c(),P(s,"class","button button-close is-link is-light"),P(l,"class","buttons"),P(n,"class","modal-card-foot is-center")},m(e,i){b(e,n,i),$(n,l),$(l,s),$(l,r),u.m(l,null),c||(o=O(s,"click",t[5]),c=!0)},p(e,[t]){a===(a=i(e))&&u?u.p(e,t):(u.d(1),u=a(e),u&&(u.c(),u.m(l,null)))},i:e,o:e,d(e){e&&y(n),u.d(),c=!1,o()}}}function st(e,t,n){let l,s;const{isSaved:r,selection:c}=ve;d(e,r,(e=>n(1,l=e))),d(e,c,(e=>n(2,s=e)));let{isRegion:o=!0}=t;return e.$$set=e=>{"isRegion"in e&&n(0,o=e.isRegion)},[o,l,s,r,c,()=>ve.empty(o),()=>ve.save(o)]}class rt extends ue{constructor(e){super(),ae(this,e,st,lt,c,{isRegion:0})}}function ct(e){let t,n,l,r,c,o,i=e[5](e[0])+"";return{c(){t=w("span"),n=x(i),l=_(),r=w("span"),r.innerHTML='<i class="fas fa-edit"></i>',P(r,"class","pl-3 smaller has-text-link")},m(s,i){b(s,t,i),$(t,n),$(t,l),$(t,r),c||(o=[O(t,"click",e[7]),O(t,"keyup",null)],c=!0)},p(e,t){33&t&&i!==(i=e[5](e[0])+"")&&E(n,i)},d(e){e&&y(t),c=!1,s(o)}}}function ot(e){let t,n,l;return{c(){t=w("input"),P(t,"class","input selection-title svelte-sgypdx")},m(s,r){b(s,t,r),e[12](t),j(t,e[4]),n||(l=[O(t,"input",e[13]),O(t,"keydown",e[8]),O(t,"blur",e[9])],n=!0)},p(e,n){16&n&&t.value!==e[4]&&j(t,e[4])},d(r){r&&y(t),e[12](null),n=!1,s(l)}}}function it(e){let t,n,l,s,r,c,o,i,a,u,d,f,v,k,S,O,L,A;function N(e,t){return e[2]?ot:ct}let R=N(e),j=R(e);const C=e[11].default,T=m(C,e,e[10],null);return L=new rt({props:{isRegion:e[0]}}),{c(){t=w("div"),n=w("div"),l=_(),s=w("div"),r=w("div"),c=w("div"),o=w("i"),i=_(),j.c(),a=x("\n                ("),u=x(e[1]),d=x(")"),f=_(),v=w("button"),k=_(),S=w("section"),T&&T.c(),O=_(),re(L.$$.fragment),P(n,"class","modal-background"),P(o,"class","fa-solid fa-book-bookmark"),P(c,"class","title is-4 mb-0 media-content"),P(v,"class","delete media-left"),P(v,"aria-label","close"),P(r,"class","modal-card-head media mb-0 is-middle"),P(S,"class","modal-card-body"),P(s,"class","modal-content"),P(t,"id","selection-modal"),P(t,"class","modal fade"),P(t,"tabindex","-1"),P(t,"aria-labelledby","selection-modal-label"),P(t,"aria-hidden","true")},m(e,m){b(e,t,m),$(t,n),$(t,l),$(t,s),$(s,r),$(r,c),$(c,o),$(c,i),j.m(c,null),$(c,a),$(c,u),$(c,d),$(r,f),$(r,v),$(s,k),$(s,S),T&&T.m(S,null),$(s,O),ce(L,s,null),A=!0},p(e,[t]){R===(R=N(e))&&j?j.p(e,t):(j.d(1),j=R(e),j&&(j.c(),j.m(c,a))),(!A||2&t)&&E(u,e[1]),T&&T.p&&(!A||1024&t)&&g(T,C,e,e[10],A?p(C,e[10],t,null):h(e[10]),null);const n={};1&t&&(n.isRegion=e[0]),L.$set(n)},i(e){A||(ne(T,e),ne(L.$$.fragment,e),A=!0)},o(e){le(T,e),le(L.$$.fragment,e),A=!1},d(e){e&&y(t),j.d(),T&&T.d(e),oe(L)}}}function at(e,t,n){let l,{$$slots:s={},$$scope:r}=t;const{selectionTitle:c,updateTitle:o,save:i}=ve;d(e,c,(e=>n(5,l=e)));let a,u,{isRegion:m=!1}=t,{selectionLength:f=!1}=t,p=!1;function g(){n(2,p=!1),o(u,m),i(m)}return e.$$set=e=>{"isRegion"in e&&n(0,m=e.isRegion),"selectionLength"in e&&n(1,f=e.selectionLength),"$$scope"in e&&n(10,r=e.$$scope)},[m,f,p,a,u,l,c,function(){n(2,p=!0),n(4,u=l(m)),setTimeout((()=>a&&a.focus()),0)},function(e){"Enter"===e.key&&g()},g,r,s,function(e){D[e?"unshift":"push"]((()=>{a=e,n(3,a)}))},function(){u=this.value,n(4,u)}]}class ut extends ue{constructor(e){super(),ae(this,e,at,it,c,{isRegion:0,selectionLength:1})}}function dt(e,t,n){const l=e.slice();return l[13]=t[n],l[14]=t,l[15]=n,l}function mt(e,t,n){const l=e.slice();return l[16]=t[n],l}function ft(e){let t,n,l,s,r,c,o,i,a,u,d="en"===de?"Search":"Rechercher",m=e[0],f=[];for(let t=0;t<m.length;t+=1)f[t]=wt(dt(e,m,t));return{c(){t=w("form"),n=w("article");for(let e=0;e<f.length;e+=1)f[e].c();l=_(),s=w("div"),r=w("button"),c=w("i"),o=_(),i=x(d),P(n,"class","message grid"),P(c,"class","fa-solid fa-magnifying-glass"),P(r,"type","submit"),P(r,"class","button is-link is-outlined is-fullwidth"),P(s,"class","panel-block columns"),P(t,"class","fixed-grid is-center")},m(d,m){b(d,t,m),$(t,n);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(n,null);$(t,l),$(t,s),$(s,r),$(r,c),$(r,o),$(r,i),a||(u=O(t,"submit",e[3]),a=!0)},p(e,t){if(19&t){let l;for(m=e[0],l=0;l<m.length;l+=1){const s=dt(e,m,l);f[l]?f[l].p(s,t):(f[l]=wt(s),f[l].c(),f[l].m(n,null))}for(;l<f.length;l+=1)f[l].d(1);f.length=m.length}},d(e){e&&y(t),v(f,e),a=!1,u()}}}function pt(e){let t,n,l,s,r;function c(){e[10].call(t,e[13])}return{c(){t=w("input"),P(t,"type","text"),P(t,"class","input is-small is-wide"),P(t,"id",n=e[13].name),P(t,"name",l=e[13].name)},m(n,l){b(n,t,l),j(t,e[1][e[13].name]),s||(r=O(t,"input",c),s=!0)},p(s,r){e=s,1&r&&n!==(n=e[13].name)&&P(t,"id",n),1&r&&l!==(l=e[13].name)&&P(t,"name",l),3&r&&t.value!==e[1][e[13].name]&&j(t,e[1][e[13].name])},d(e){e&&y(t),s=!1,r()}}}function gt(e){let t,n,l,s,r;function c(){e[9].call(t,e[13])}return{c(){t=w("input"),P(t,"type","number"),P(t,"class","input is-small is-wide"),P(t,"id",n=e[13].name),P(t,"name",l=e[13].name)},m(n,l){b(n,t,l),j(t,e[1][e[13].name]),s||(r=O(t,"input",c),s=!0)},p(s,r){e=s,1&r&&n!==(n=e[13].name)&&P(t,"id",n),1&r&&l!==(l=e[13].name)&&P(t,"name",l),3&r&&R(t.value)!==e[1][e[13].name]&&j(t,e[1][e[13].name])},d(e){e&&y(t),s=!1,r()}}}function ht(e){let t,n,l,s,r,c;function o(){e[8].call(n,e[13])}return{c(){t=x("}\n                            "),n=w("input"),P(n,"type","date"),P(n,"class","input is-small is-wide"),P(n,"id",l=e[13].name),P(n,"name",s=e[13].name)},m(l,s){b(l,t,s),b(l,n,s),j(n,e[1][e[13].name]),r||(c=O(n,"input",o),r=!0)},p(t,r){e=t,1&r&&l!==(l=e[13].name)&&P(n,"id",l),1&r&&s!==(s=e[13].name)&&P(n,"name",s),3&r&&j(n,e[1][e[13].name])},d(e){e&&y(t),e&&y(n),r=!1,c()}}}function $t(e){let t,n,l,s,r;function c(){e[7].call(t,e[13])}return{c(){t=w("input"),P(t,"type","checkbox"),P(t,"id",n=e[13].name),P(t,"name",l=e[13].name)},m(n,l){b(n,t,l),t.checked=e[1][e[13].name],s||(r=O(t,"change",c),s=!0)},p(s,r){e=s,1&r&&n!==(n=e[13].name)&&P(t,"id",n),1&r&&l!==(l=e[13].name)&&P(t,"name",l),3&r&&(t.checked=e[1][e[13].name])},d(e){e&&y(t),s=!1,r()}}}function bt(e){let n,l,s,r,c,o,i,a,u=!e[4](e[13]),d=u&&yt(),m=e[13].choices,f=[];for(let t=0;t<m.length;t+=1)f[t]=vt(mt(e,m,t));let p=[{id:r=e[13].name},{name:c=e[13].name},{class:"is-wide"},e[4](e[13])?{size:3,multiple:!0}:{}],g={};for(let e=0;e<p.length;e+=1)g=t(g,p[e]);function h(){e[6].call(l,e[13])}return{c(){n=w("div"),l=w("select"),d&&d.c(),s=S();for(let e=0;e<f.length;e+=1)f[e].c();N(l,g),void 0===e[1][e[13].name]&&J(h),M(l,"svelte-wwfwxh",!0),P(n,"class",o="select is-small is-wide "+(e[4](e[13])?"is-multiple":""))},m(t,r){b(t,n,r),$(n,l),d&&d.m(l,null),$(l,s);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(l,null);"value"in g&&(g.multiple?T:C)(l,g.value),l.autofocus&&l.focus(),C(l,e[1][e[13].name],!0),i||(a=O(l,"change",h),i=!0)},p(t,i){if(e=t,1&i&&(u=!e[4](e[13])),u?d||(d=yt(),d.c(),d.m(l,s)):d&&(d.d(1),d=null),1&i){let t;for(m=e[13].choices,t=0;t<m.length;t+=1){const n=mt(e,m,t);f[t]?f[t].p(n,i):(f[t]=vt(n),f[t].c(),f[t].m(l,null))}for(;t<f.length;t+=1)f[t].d(1);f.length=m.length}N(l,g=function(e,t){const n={},l={},s={$$scope:1};let r=e.length;for(;r--;){const c=e[r],o=t[r];if(o){for(const e in c)e in o||(l[e]=1);for(const e in o)s[e]||(n[e]=o[e],s[e]=1);e[r]=o}else for(const e in c)s[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}(p,[1&i&&r!==(r=e[13].name)&&{id:r},1&i&&c!==(c=e[13].name)&&{name:c},{class:"is-wide"},1&i&&(e[4](e[13])?{size:3,multiple:!0}:{})])),17&i&&"value"in g&&(g.multiple?T:C)(l,g.value),3&i&&C(l,e[1][e[13].name]),M(l,"svelte-wwfwxh",!0),1&i&&o!==(o="select is-small is-wide "+(e[4](e[13])?"is-multiple":""))&&P(n,"class",o)},d(e){e&&y(n),d&&d.d(),v(f,e),i=!1,a()}}}function yt(e){let t;return{c(){t=w("option"),t.textContent="Select ...",t.__value="",t.value=t.__value,t.disabled=!0,t.selected=!0,P(t,"class","faded")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function vt(e){let t,n,l,s=e[16].label+"";return{c(){t=w("option"),n=x(s),t.__value=l=e[16].value,t.value=t.__value},m(e,l){b(e,t,l),$(t,n)},p(e,r){1&r&&s!==(s=e[16].label+"")&&E(n,s),1&r&&l!==(l=e[16].value)&&(t.__value=l,t.value=t.__value)},d(e){e&&y(t)}}}function wt(e){let t,n,l,s,r,c,o,i,a,u=e[13].label+"";function d(e,t){return 1&t&&(o=null),1&t&&(i=null),null==o&&(o=!!e[13].type.includes("ChoiceField")),o?bt:"BooleanField"===e[13].type?$t:(null==i&&(i=!!e[13].type.includes("Date")),i?ht:"IntegerField"===e[13].type||"FloatField"===e[13].type?gt:pt)}let m=d(e,-1),f=m(e);return{c(){t=w("div"),n=w("label"),l=x(u),r=_(),c=w("div"),f.c(),a=_(),P(n,"for",s=e[13].name),P(n,"class","label column is-small is-3 svelte-wwfwxh"),P(c,"class","control has-icons-right column is-9"),P(t,"class","search-field field columns is-middle svelte-wwfwxh")},m(e,s){b(e,t,s),$(t,n),$(n,l),$(t,r),$(t,c),f.m(c,null),$(t,a)},p(e,t){1&t&&u!==(u=e[13].label+"")&&E(l,u),1&t&&s!==(s=e[13].name)&&P(n,"for",s),m===(m=d(e,t))&&f?f.p(e,t):(f.d(1),f=m(e),f&&(f.c(),f.m(c,null)))},d(e){e&&y(t),f.d()}}}function kt(t){let n,l=t[0].length>0&&ft(t);return{c(){l&&l.c(),n=S()},m(e,t){l&&l.m(e,t),b(e,n,t)},p(e,[t]){e[0].length>0?l?l.p(e,t):(l=ft(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:e,o:e,d(e){l&&l.d(e),e&&y(n)}}}function xt(e,t,n){let l,{recordsStore:s}=t;const{recordSearch:r,searchParams:c}=s;d(e,c,(e=>n(11,l=e)));let{searchFields:o=[]}=t,i={};var a;a=()=>{const e=l??new URLSearchParams(window.location.search);o.forEach((t=>{n(1,i[t.name]=e.get(t.name)||t.initial||"",i)}))},U().$$.on_mount.push(a);return e.$$set=e=>{"recordsStore"in e&&n(5,s=e.recordsStore),"searchFields"in e&&n(0,o=e.searchFields)},[o,i,c,function(e){e.preventDefault(),r(i)},e=>e.type.includes("Multiple"),s,function(e){i[e.name]=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(1,i),n(0,o)},function(e){i[e.name]=this.checked,n(1,i),n(0,o)},function(e){i[e.name]=this.value,n(1,i),n(0,o)},function(e){i[e.name]=R(this.value),n(1,i),n(0,o)},function(e){i[e.name]=this.value,n(1,i),n(0,o)}]}class _t extends ue{constructor(e){super(),ae(this,e,xt,kt,c,{recordsStore:5,searchFields:0})}}function St(e){let t,n,l,s,r,c,o,i,a,u=e[4]>1&&Ot(e),d=e[4]<e[3]&&At(e);return{c(){t=w("nav"),n=w("ul"),u&&u.c(),l=_(),s=w("li"),r=w("a"),c=x(e[4]),o=_(),d&&d.c(),P(r,"class","pagination-link is-current"),P(r,"href",null),P(n,"class","pagination-list ml-0"),P(t,"class","pagination is-centered mb-2"),P(t,"aria-label","pagination")},m(m,f){b(m,t,f),$(t,n),u&&u.m(n,null),$(n,l),$(n,s),$(s,r),$(r,c),$(n,o),d&&d.m(n,null),i||(a=O(r,"click",L(e[8])),i=!0)},p(e,t){e[4]>1?u?u.p(e,t):(u=Ot(e),u.c(),u.m(n,l)):u&&(u.d(1),u=null),16&t&&E(c,e[4]),e[4]<e[3]?d?d.p(e,t):(d=At(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&y(t),u&&u.d(),d&&d.d(),i=!1,a()}}}function Ot(e){let t,n,l,s,r,c,o=e[4]-1>1&&Lt(e);return{c(){t=w("li"),n=w("a"),n.textContent="1",l=_(),o&&o.c(),s=S(),P(n,"class","pagination-link"),P(n,"href",null)},m(i,a){b(i,t,a),$(t,n),b(i,l,a),o&&o.m(i,a),b(i,s,a),r||(c=O(n,"click",L(e[6])),r=!0)},p(e,t){e[4]-1>1?o?o.p(e,t):(o=Lt(e),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},d(e){e&&y(t),e&&y(l),o&&o.d(e),e&&y(s),r=!1,c()}}}function Lt(e){let t,n,l,s,r,c,o=e[4]-1+"",i=e[4]-1>2&&Pt();return{c(){i&&i.c(),t=_(),n=w("li"),l=w("a"),s=x(o),P(l,"class","pagination-link"),P(l,"href",null)},m(o,a){i&&i.m(o,a),b(o,t,a),b(o,n,a),$(n,l),$(l,s),r||(c=O(l,"click",L(e[7])),r=!0)},p(e,n){e[4]-1>2?i||(i=Pt(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),16&n&&o!==(o=e[4]-1+"")&&E(s,o)},d(e){i&&i.d(e),e&&y(t),e&&y(n),r=!1,c()}}}function Pt(e){let t;return{c(){t=w("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>'},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function At(e){let t,n,l,s,r,c,o=e[4]+1<e[3]&&Nt(e);return{c(){o&&o.c(),t=_(),n=w("li"),l=w("a"),s=x(e[3]),P(l,"class","pagination-link"),P(l,"href",null)},m(i,a){o&&o.m(i,a),b(i,t,a),b(i,n,a),$(n,l),$(l,s),r||(c=O(l,"click",L(e[10])),r=!0)},p(e,n){e[4]+1<e[3]?o?o.p(e,n):(o=Nt(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),8&n&&E(s,e[3])},d(e){o&&o.d(e),e&&y(t),e&&y(n),r=!1,c()}}}function Nt(e){let t,n,l,s,r,c,o,i=e[4]+1+"",a=e[4]+2<e[3]&&Rt();return{c(){t=w("li"),n=w("a"),l=x(i),s=_(),a&&a.c(),r=S(),P(n,"class","pagination-link"),P(n,"href",null)},m(i,u){b(i,t,u),$(t,n),$(n,l),b(i,s,u),a&&a.m(i,u),b(i,r,u),c||(o=O(n,"click",L(e[9])),c=!0)},p(e,t){16&t&&i!==(i=e[4]+1+"")&&E(l,i),e[4]+2<e[3]?a||(a=Rt(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(e){e&&y(t),e&&y(s),a&&a.d(e),e&&y(r),c=!1,o()}}}function Rt(e){let t;return{c(){t=w("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>'},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function Et(t){let n,l,s,r,c,o,i,a=t[4]*t[2]-t[2]+1+"",u=Math.min(t[4]*t[2],t[1])+"",d=t[3]>1&&St(t);return{c(){d&&d.c(),n=_(),l=w("div"),s=x(a),r=x(" - "),c=x(u),o=x(" / "),i=x(t[1]),P(l,"class","is-size-7 is-center mb-4")},m(e,t){d&&d.m(e,t),b(e,n,t),b(e,l,t),$(l,s),$(l,r),$(l,c),$(l,o),$(l,i)},p(e,[t]){e[3]>1?d?d.p(e,t):(d=St(e),d.c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null),20&t&&a!==(a=e[4]*e[2]-e[2]+1+"")&&E(s,a),22&t&&u!==(u=Math.min(e[4]*e[2],e[1])+"")&&E(c,u),2&t&&E(i,e[1])},i:e,o:e,d(e){d&&d.d(e),e&&y(n),e&&y(l)}}}function jt(e,t,n){let l,s,{store:r}=t;const{currentPage:c}=r;d(e,c,(e=>n(4,s=e)));let{nbOfItems:o}=t,{pageLength:i=50}=t;return e.$$set=e=>{"store"in e&&n(0,r=e.store),"nbOfItems"in e&&n(1,o=e.nbOfItems),"pageLength"in e&&n(2,i=e.pageLength)},e.$$.update=()=>{6&e.$$.dirty&&n(3,l=Math.ceil(o/i))},[r,o,i,l,s,c,()=>r.handlePageUpdate(1),()=>r.handlePageUpdate(s-1),()=>r.handlePageUpdate(s),()=>r.handlePageUpdate(s+1),()=>r.handlePageUpdate(l)]}class Ct extends ue{constructor(e){super(),ae(this,e,jt,Et,c,{store:0,nbOfItems:1,pageLength:2})}}function Tt(t){let n,l,s,r,c,o,i,a,u,d,m,f,p,g,h;return{c(){n=w("button"),l=_(),s=w("div"),r=w("div"),c=_(),o=w("div"),i=w("div"),i.innerHTML='<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div> \n            <button class="delete media-left" aria-label="close"></button>',a=_(),u=w("section"),d=_(),m=w("footer"),f=w("div"),p=w("button"),p.textContent=""+("en"===de?"Cancel":"Annuler"),g=_(),h=w("button"),h.textContent="OK",P(n,"id","hidden-msg-btn"),P(n,"class","js-modal-trigger"),P(n,"data-target","msg-modal"),n.hidden=!0,P(r,"id","modal-bkg"),P(r,"class","modal-background"),P(i,"class","modal-card-head media mb-0"),P(u,"id","modal-body"),P(u,"class","modal-card-body"),P(p,"id","cancel-btn"),P(p,"class","button is-link is-light button-close"),P(h,"id","ok-btn"),P(h,"class","button is-link button-close"),P(f,"class","buttons"),P(m,"id","modal-footer"),P(m,"class","modal-card-foot is-center pt-3"),m.hidden=!0,P(o,"class","modal-content"),P(s,"id","msg-modal"),P(s,"class","modal fade"),P(s,"tabindex","-1"),P(s,"aria-labelledby","selection-modal-label"),P(s,"aria-hidden","true")},m(e,t){b(e,n,t),b(e,l,t),b(e,s,t),$(s,r),$(s,c),$(s,o),$(o,i),$(o,a),$(o,u),$(o,d),$(o,m),$(m,f),$(f,p),$(f,g),$(f,h)},p:e,i:e,o:e,d(e){e&&y(n),e&&y(l),e&&y(s)}}}class Mt extends ue{constructor(e){super(),ae(this,e,null,Tt,c,{})}}function It(e){const t=e,n=be(1),l=be([]),s=be(0),r=be(new URLSearchParams(window.location.search));async function c(){const e=u(r);e.set("p",`${u(n)}`);try{const r=await fetch(`${window.location.origin}/search/${t}/?${e.toString()}`),c=await r.json();l.set(c.results),s.set(c.count),n.set(c.current_page),e.set("p",String(u(n)));const o=`${window.location.pathname}?${e.toString()}`;return history.pushState(null,"",o),c}catch(e){throw console.error("Error fetching page:",e),e}}!function(e,t){if("undefined"!=typeof window){const n=parseInt(new URLSearchParams(window.location.search).get(t));if(!isNaN(n))return e.set(n),n}e.set(1)}(n,"p");let o=c();function i(e){!function(e,t,n){if(t.set(e),"undefined"!=typeof window){const t=new URL(window.location.href);t.searchParams.set(n,e),window.history.pushState({},"",t)}}(e,n,"p"),o=c()}return{currentPage:n,pageRecords:l,resultPage:o,resultNumber:s,fetchPage:c,handlePageUpdate:i,recordSearch:function(e){const t=new URLSearchParams(e);r.set(t),i(1)}}}function Ft(e,t,n){const l=e.slice();return l[5]=t[n][0],l[6]=t[n][1],l}function Ut(e,t,n){const l=e.slice();return l[9]=t[n][0],l[10]=t[n][1],l}function Ht(e,t,n){const l=e.slice();return l[9]=t[n][0],l[10]=t[n][1],l}function Vt(e){let t,n,l=e[1]?"Retirer de la":"Charger dans la";return{c(){t=x(l),n=x(" sélection")},m(e,l){b(e,t,l),b(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Retirer de la":"Charger dans la")&&E(t,l)},d(e){e&&y(t),e&&y(n)}}}function Dt(e){let t,n,l=e[1]?"Unload from":"Load to";return{c(){t=x(l),n=x(" selection")},m(e,l){b(e,t,l),b(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Unload from":"Load to")&&E(t,l)},d(e){e&&y(t),e&&y(n)}}}function Gt(e){let t;return{c(){t=k("path"),P(t,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function zt(e){let t;return{c(){t=k("path"),P(t,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(e,n){b(e,t,n)},d(e){e&&y(t)}}}function Bt(e){let t,n,l,s,r,c;let o=("en"===de?Dt:Vt)(e);function i(e,t){return e[1]?zt:Gt}let a=i(e),u=a(e);return{c(){t=w("div"),n=w("button"),o.c(),l=_(),s=k("svg"),u.c(),P(s,"xmlns","http://www.w3.org/2000/svg"),P(s,"viewBox","0 0 384 512"),P(n,"class","button"),M(n,"is-inverted",e[1]),P(t,"slot","buttons")},m(i,a){b(i,t,a),$(t,n),o.m(n,null),$(n,l),$(n,s),u.m(s,null),r||(c=O(n,"click",e[4]),r=!0)},p(e,t){o.p(e,t),a!==(a=i(e))&&(u.d(1),u=a(e),u&&(u.c(),u.m(s,null))),2&t&&M(n,"is-inverted",e[1])},d(e){e&&y(t),o.d(),u.d(),r=!1,c()}}}function qt(e){let t,n,l,s,r,c,o,i=e[10].task_type+"",a=e[9]+"";return{c(){t=w("a"),n=x(i),l=x(" #"),s=x(a),r=_(),P(t,"href",c=e[10].url),P(t,"class",o="tag is-rounded is-small "+Wt(e[10].status))},m(e,c){b(e,t,c),$(t,n),$(t,l),$(t,s),$(t,r)},p(e,l){1&l&&i!==(i=e[10].task_type+"")&&E(n,i),1&l&&a!==(a=e[9]+"")&&E(s,a),1&l&&c!==(c=e[10].url)&&P(t,"href",c),1&l&&o!==(o="tag is-rounded is-small "+Wt(e[10].status))&&P(t,"class",o)},d(e){e&&y(t)}}}function Jt(e){let t,n,l,s,r,c,o,i,a=e[5]+"",u=e[9]+"",d=e[10].title+"";return{c(){t=w("div"),n=w("span"),l=x(a),s=x(" #"),r=x(u),c=_(),o=x(d),i=_(),P(n,"class","tag is-rounded is-accent")},m(e,a){b(e,t,a),$(t,n),$(n,l),$(n,s),$(n,r),$(t,c),$(t,o),$(t,i)},p(e,t){1&t&&a!==(a=e[5]+"")&&E(l,a),1&t&&u!==(u=e[9]+"")&&E(r,u),1&t&&d!==(d=e[10].title+"")&&E(o,d)},d(e){e&&y(t)}}}function Xt(e){let t,n=Object.entries(e[6]),l=[];for(let t=0;t<n.length;t+=1)l[t]=Jt(Ut(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=S()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);b(e,t,n)},p(e,s){if(1&s){let r;for(n=Object.entries(e[6]),r=0;r<n.length;r+=1){const c=Ut(e,n,r);l[r]?l[r].p(c,s):(l[r]=Jt(c),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){v(l,e),e&&y(t)}}}function Kt(e){let t,n,l,s,r=Object.entries(e[0].treatments),c=[];for(let t=0;t<r.length;t+=1)c[t]=qt(Ht(e,r,t));let o=Object.entries(e[0].selection.selected),i=[];for(let t=0;t<o.length;t+=1)i[t]=Xt(Ft(e,o,t));return{c(){t=w("div"),n=w("div");for(let e=0;e<c.length;e+=1)c[e].c();l=_(),s=w("div");for(let e=0;e<i.length;e+=1)i[e].c();P(n,"class","tags container"),P(s,"class","grid"),P(t,"slot","body")},m(e,r){b(e,t,r),$(t,n);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(n,null);$(t,l),$(t,s);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(s,null)},p(e,t){if(1&t){let l;for(r=Object.entries(e[0].treatments),l=0;l<r.length;l+=1){const s=Ht(e,r,l);c[l]?c[l].p(s,t):(c[l]=qt(s),c[l].c(),c[l].m(n,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=r.length}if(1&t){let n;for(o=Object.entries(e[0].selection.selected),n=0;n<o.length;n+=1){const l=Ft(e,o,n);i[n]?i[n].p(l,t):(i[n]=Xt(l),i[n].c(),i[n].m(s,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(e){e&&y(t),v(c,e),v(i,e)}}}function Yt(e){let t,n;return t=new ze({props:{item:e[0],$$slots:{body:[Kt],buttons:[Bt]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment)},m(e,l){ce(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.item=e[0]),32771&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(ne(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function Wt(e){return e?"CANCELLED"===e?"is-info":"ERROR"===e?"is-danger":"IN PROGRESS"===e?"is-warning":"PENDING"===e||"STARTED"===e?"is-info":"SUCCESS"===e?"is-success":"is-dark":"is-dark"}function Qt(e,t,n){let l,s;const{isSetSelected:r}=ve;d(e,r,(e=>n(3,s=e)));let{item:c}=t;return e.$$set=e=>{"item"in e&&n(0,c=e.item)},e.$$.update=()=>{9&e.$$.dirty&&n(1,l=s(c))},[c,l,r,s,()=>ve.toggleSet(c)]}let Zt=class extends ue{constructor(e){super(),ae(this,e,Qt,Yt,c,{item:0})}};function en(e,t,n){const l=e.slice();return l[3]=t[n][0],l[4]=t[n][1],l}function tn(e,t,n){const l=e.slice();return l[7]=t[n][0],l[8]=t[n][1],l}function nn(e){let t,n,l,s,r;return{c(){t=w("a"),n=w("i"),l=_(),s=w("span"),s.textContent=""+("en"===de?"Relaunch same treatment":"Relancer le même traitement"),P(n,"class","fa-solid fa-arrow-rotate-left"),P(t,"href",r="add/"+e[0].query_parameters),P(t,"class","button is-small is-rounded is-primary is-outlined px-2 py-1 mr-2"),P(t,"title","en"===de?"Relaunch same treatment":"Relancer le même traitement")},m(e,r){b(e,t,r),$(t,n),$(t,l),$(t,s)},p(e,n){1&n&&r!==(r="add/"+e[0].query_parameters)&&P(t,"href",r)},d(e){e&&y(t)}}}function ln(t){let n,l,s,r,c,o;return{c(){n=w("button"),l=w("i"),s=_(),r=w("span"),r.textContent=""+("en"===de?"Cancel treatment":"Annuler le traitement"),P(l,"class","fa-solid fa-ban"),P(n,"class","button is-small is-rounded is-danger is-outlined px-2 py-1 mr-2"),P(n,"title","en"===de?"Cancel treatment":"Annuler le traitement")},m(e,i){b(e,n,i),$(n,l),$(n,s),$(n,r),c||(o=O(n,"click",t[1]),c=!0)},p:e,d(e){e&&y(n),c=!1,o()}}}function sn(e){let t,n,l=e[0].status+"";return{c(){t=w("span"),n=x(l),P(t,"class","tag is-info p-1 mb-1")},m(e,l){b(e,t,l),$(t,n)},p(e,t){1&t&&l!==(l=e[0].status+"")&&E(n,l)},d(e){e&&y(t)}}}function rn(e){let t,n,l=e[0].status+"";return{c(){t=w("span"),n=x(l),P(t,"class","tag is-danger p-1 mb-1")},m(e,l){b(e,t,l),$(t,n)},p(e,t){1&t&&l!==(l=e[0].status+"")&&E(n,l)},d(e){e&&y(t)}}}function cn(e){let t,n,l=e[0].status+"";return{c(){t=w("span"),n=x(l),P(t,"class","tag is-success p-1 mb-1")},m(e,l){b(e,t,l),$(t,n)},p(e,t){1&t&&l!==(l=e[0].status+"")&&E(n,l)},d(e){e&&y(t)}}}function on(e){let t,n,l,s,r,c;function o(e,t){return!e[0].is_finished&&e[0].api_tracking_id?ln:e[0].is_finished&&"ERROR"===e[0].status?nn:void 0}let i=o(e),a=i&&i(e);function u(e,t){return"SUCCESS"===e[0].status?cn:"ERROR"===e[0].status?rn:sn}let d=u(e),m=d(e);return{c(){t=w("div"),a&&a.c(),n=_(),m.c(),l=_(),s=w("button"),P(s,"class","delete is-medium"),P(s,"title","en"===de?"Delete treatment":"Supprimer le traitement"),P(t,"slot","buttons")},m(o,i){b(o,t,i),a&&a.m(t,null),$(t,n),m.m(t,null),$(t,l),$(t,s),r||(c=O(s,"click",e[2]),r=!0)},p(e,s){i===(i=o(e))&&a?a.p(e,s):(a&&a.d(1),a=i&&i(e),a&&(a.c(),a.m(t,n))),d===(d=u(e))&&m?m.p(e,s):(m.d(1),m=d(e),m&&(m.c(),m.m(t,l)))},d(e){e&&y(t),a&&a.d(),m.d(),r=!1,c()}}}function an(e){let t,n=Object.entries(e[0].selection.selected),l=[];for(let t=0;t<n.length;t+=1)l[t]=dn(en(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=S()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);b(e,t,n)},p(e,s){if(1&s){let r;for(n=Object.entries(e[0].selection.selected),r=0;r<n.length;r+=1){const c=en(e,n,r);l[r]?l[r].p(c,s):(l[r]=dn(c),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){v(l,e),e&&y(t)}}}function un(e){let t,n,l,s,r,c,o,i,a=e[3]+"",u=e[7]+"",d=e[8].title+"";return{c(){t=w("div"),n=w("span"),l=x(a),s=x(" #"),r=x(u),c=_(),o=x(d),i=_(),P(n,"class","tag is-rounded is-accent")},m(e,a){b(e,t,a),$(t,n),$(n,l),$(n,s),$(n,r),$(t,c),$(t,o),$(t,i)},p(e,t){1&t&&a!==(a=e[3]+"")&&E(l,a),1&t&&u!==(u=e[7]+"")&&E(r,u),1&t&&d!==(d=e[8].title+"")&&E(o,d)},d(e){e&&y(t)}}}function dn(e){let t,n=Object.entries(e[4]),l=[];for(let t=0;t<n.length;t+=1)l[t]=un(tn(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=S()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);b(e,t,n)},p(e,s){if(1&s){let r;for(n=Object.entries(e[4]),r=0;r<n.length;r+=1){const c=tn(e,n,r);l[r]?l[r].p(c,s):(l[r]=un(c),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){v(l,e),e&&y(t)}}}function mn(e){let t,n=e[0].hasOwnProperty("selection")&&e[0].selection.hasOwnProperty("selected")&&e[0].selection.selected,l=n&&an(e);return{c(){t=w("div"),l&&l.c(),P(t,"slot","body"),P(t,"class","pt-2 grid")},m(e,n){b(e,t,n),l&&l.m(t,null)},p(e,s){1&s&&(n=e[0].hasOwnProperty("selection")&&e[0].selection.hasOwnProperty("selected")&&e[0].selection.selected),n?l?l.p(e,s):(l=an(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(e){e&&y(t),l&&l.d()}}}function fn(e){let t,n;return t=new ze({props:{item:e[0],$$slots:{body:[mn],buttons:[on]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment)},m(e,l){ce(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.item=e[0]),2049&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(ne(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function pn(e,t,n){let{item:l}=t;return e.$$set=e=>{"item"in e&&n(0,l=e.item)},[l,()=>async function(e){if(confirm("en"===APP_LANG?"Are you sure you want to cancel treatment?":"Êtes-vous sûr de vouloir annuler le traitement en cours ?"))try{(await fetch(`/${me}/treatment/${e}/cancel`,{method:"GET"})).ok?window.alert("en"===APP_LANG?"Successfully cancelled treatment":"Le traitement a été annulé"):window.alert("en"===APP_LANG?"Treatment could not be cancelled":"Le traitement n'a pas pu être annulé")}catch(e){window.alert("en"===APP_LANG?"Error connecting to API":"Erreur lors de la connexion à l'API")}}(l.id),()=>async function(e){confirm("en"===APP_LANG?"Are you sure you want to delete treatment?":"Êtes-vous sûr de vouloir supprimer le traitement ?")&&((await fetch(`/${me}/treatment/${e}/delete`,{method:"GET"})).ok?window.alert("en"===APP_LANG?"Successfully deleted treatment":"Le traitement a été supprimé"):window.alert("en"===APP_LANG?"Treatment could not be deleted":"Le traitement n'a pas pu être supprimé"))}(l.id)]}class gn extends ue{constructor(e){super(),ae(this,e,pn,fn,c,{item:0})}}function hn(e,t,n){const l=e.slice();return l[16]=t[n][0],l[17]=t[n][1],l}function $n(e,t,n){const l=e.slice();return l[20]=t[n][0],l[21]=t[n][1],l}function bn(e,t,n){const l=e.slice();return l[25]=t[n],l}function yn(e){let t,n;function l(e,t){return 2&t&&(n=null),null==n&&(n=!!e[1].includes("Treatment")),n?wn:vn}let s=l(e,-1),r=s(e);return{c(){t=w("span"),r.c(),P(t,"class","is-right")},m(e,n){b(e,t,n),r.m(t,null)},p(e,n){s===(s=l(e,n))&&r?r.p(e,n):(r.d(1),r=s(e),r&&(r.c(),r.m(t,null)))},d(e){e&&y(t),r.d()}}}function vn(e){let t,n,l,s,r;return{c(){t=w("a"),n=w("i"),l=_(),s=w("span"),s.textContent=""+("en"===de?"Add":"Ajouter"),P(n,"class","fa-solid fa-plus"),P(t,"href",r="/"+me+"-admin/"+fe+"/"+e[0]+"/add/"),P(t,"class","button is-rounded is-primary mb-4"),P(t,"title","en"===de?"Add":"Ajouter")},m(e,r){b(e,t,r),$(t,n),$(t,l),$(t,s)},p(e,n){1&n&&r!==(r="/"+me+"-admin/"+fe+"/"+e[0]+"/add/")&&P(t,"href",r)},d(e){e&&y(t)}}}function wn(e){let t,n,l,s,r;return{c(){t=w("a"),n=w("i"),l=_(),s=w("span"),s.textContent=""+("en"===de?"Add":"Ajouter"),P(n,"class","fa-solid fa-plus"),P(t,"href",r="/"+me+"/"+e[0]+"/add/"),P(t,"class","button is-rounded is-primary mb-4"),P(t,"title","en"===de?"Add":"Ajouter")},m(e,r){b(e,t,r),$(t,n),$(t,l),$(t,s)},p(e,n){1&n&&r!==(r="/"+me+"/"+e[0]+"/add/")&&P(t,"href",r)},d(e){e&&y(t)}}}function kn(t){let n,l,s,r,c="en"===de?"Error when retrieving records: ":"Erreur lors de la récupération des enregistrements : ",o=t[28]+"";return{c(){n=w("div"),l=x(c),s=_(),r=x(o),P(n,"class","faded is-center")},m(e,t){b(e,n,t),$(n,l),$(n,s),$(n,r)},p:e,i:e,o:e,d(e){e&&y(n)}}}function xn(e){let t,n,l=0!==e[5].length&&_n(e);return{c(){l&&l.c(),t=S()},m(e,s){l&&l.m(e,s),b(e,t,s),n=!0},p(e,n){0!==e[5].length?l?(l.p(e,n),32&n&&ne(l,1)):(l=_n(e),l.c(),ne(l,1),l.m(t.parentNode,t)):l&&(ee(),le(l,1,1,(()=>{l=null})),te())},i(e){n||(ne(l),n=!0)},o(e){le(l),n=!1},d(e){l&&l.d(e),e&&y(t)}}}function _n(e){let t,n,l,r,c,o,i=[],a=new Map;t=new Ct({props:{store:e[9],nbOfItems:e[6],pageLength:e[5].length}});let u=e[5];const d=e=>e[25].id;for(let t=0;t<u.length;t+=1){let n=bn(e,u,t),l=d(n);a.set(l,i[t]=An(l,n))}let m=null;return u.length||(m=Sn()),c=new Ct({props:{store:e[9],nbOfItems:e[6],pageLength:e[5].length}}),{c(){re(t.$$.fragment),n=_(),l=w("div");for(let e=0;e<i.length;e+=1)i[e].c();m&&m.c(),r=_(),re(c.$$.fragment)},m(e,s){ce(t,e,s),b(e,n,s),b(e,l,s);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(l,null);m&&m.m(l,null),b(e,r,s),ce(c,e,s),o=!0},p(e,n){const r={};64&n&&(r.nbOfItems=e[6]),32&n&&(r.pageLength=e[5].length),t.$set(r),32&n&&(u=e[5],ee(),i=function(e,t,n,l,r,c,o,i,a,u,d,m){let f=e.length,p=c.length,g=f;const h={};for(;g--;)h[e[g].key]=g;const $=[],b=new Map,y=new Map,v=[];for(g=p;g--;){const e=m(r,c,g),s=n(e);let i=o.get(s);i?l&&v.push((()=>i.p(e,t))):(i=u(s,e),i.c()),b.set(s,$[g]=i),s in h&&y.set(s,Math.abs(g-h[s]))}const w=new Set,k=new Set;function x(e){ne(e,1),e.m(i,d),o.set(e.key,e),d=e.first,p--}for(;f&&p;){const t=$[p-1],n=e[f-1],l=t.key,s=n.key;t===n?(d=t.first,f--,p--):b.has(s)?!o.has(l)||w.has(l)?x(t):k.has(s)?f--:y.get(l)>y.get(s)?(k.add(l),x(t)):(w.add(s),f--):(a(n,o),f--)}for(;f--;){const t=e[f];b.has(t.key)||a(t,o)}for(;p;)x($[p-1]);return s(v),$}(i,n,d,1,e,u,a,l,se,An,null,bn),te(),!u.length&&m?m.p(e,n):u.length?m&&(m.d(1),m=null):(m=Sn(),m.c(),m.m(l,null)));const o={};64&n&&(o.nbOfItems=e[6]),32&n&&(o.pageLength=e[5].length),c.$set(o)},i(e){if(!o){ne(t.$$.fragment,e);for(let e=0;e<u.length;e+=1)ne(i[e]);ne(c.$$.fragment,e),o=!0}},o(e){le(t.$$.fragment,e);for(let e=0;e<i.length;e+=1)le(i[e]);le(c.$$.fragment,e),o=!1},d(e){oe(t,e),e&&y(n),e&&y(l);for(let e=0;e<i.length;e+=1)i[e].d();m&&m.d(),e&&y(r),oe(c,e)}}}function Sn(t){let n;return{c(){n=w("p"),n.textContent=""+("en"===de?"No records found":"Aucun enregistrement trouvé")},m(e,t){b(e,n,t)},p:e,d(e){e&&y(n)}}}function On(e){let t,n;return t=new We({props:{item:e[25]}}),{c(){re(t.$$.fragment)},m(e,l){ce(t,e,l),n=!0},p(e,n){const l={};32&n&&(l.item=e[25]),t.$set(l)},i(e){n||(ne(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function Ln(e){let t,n;return t=new Zt({props:{item:e[25]}}),{c(){re(t.$$.fragment)},m(e,l){ce(t,e,l),n=!0},p(e,n){const l={};32&n&&(l.item=e[25]),t.$set(l)},i(e){n||(ne(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function Pn(e){let t,n;return t=new gn({props:{item:e[25]}}),{c(){re(t.$$.fragment)},m(e,l){ce(t,e,l),n=!0},p(e,n){const l={};32&n&&(l.item=e[25]),t.$set(l)},i(e){n||(ne(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function An(e,t){let n,l,s,r,c,o,i;const a=[Pn,Ln,On],u=[];function d(e,t){return 32&t&&(l=null),32&t&&(s=null),null==l&&(l=!!e[25].class.includes("Treatment")),l?0:(null==s&&(s=!!e[25].class.includes("Set")),s?1:2)}return r=d(t,-1),c=u[r]=a[r](t),{key:e,first:null,c(){n=S(),c.c(),o=S(),this.first=n},m(e,t){b(e,n,t),u[r].m(e,t),b(e,o,t),i=!0},p(e,n){let l=r;r=d(t=e,n),r===l?u[r].p(t,n):(ee(),le(u[l],1,1,(()=>{u[l]=null})),te(),c=u[r],c?c.p(t,n):(c=u[r]=a[r](t),c.c()),ne(c,1),c.m(o.parentNode,o))},i(e){i||(ne(c),i=!0)},o(e){le(c),i=!1},d(e){e&&y(n),u[r].d(e),e&&y(o)}}}function Nn(t){let n;return{c(){n=w("div"),n.textContent=""+("en"===de?"Retrieving records...":"Récupération des enregistrements..."),P(n,"class","faded is-center")},m(e,t){b(e,n,t)},p:e,i:e,o:e,d(e){e&&y(n)}}}function Rn(t){let n,l,s;return{c(){n=w("tr"),l=w("td"),l.textContent=""+("en"===de?"No documents in selection":"Aucun document sélectionné"),s=_()},m(e,t){b(e,n,t),$(n,l),$(n,s)},p:e,d(e){e&&y(n)}}}function En(e){let t,n,l,s,r,c,o=e[16]+"",i=Object.entries(e[17]),a=[];for(let t=0;t<i.length;t+=1)a[t]=jn($n(e,i,t));return{c(){t=w("h3"),n=x(o),l=_(),s=w("table"),r=w("tbody");for(let e=0;e<a.length;e+=1)a[e].c();c=_(),P(s,"class","table pl-2 is-fullwidth")},m(e,o){b(e,t,o),$(t,n),b(e,l,o),b(e,s,o),$(s,r);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(r,null);$(s,c)},p(e,t){if(16&t&&o!==(o=e[16]+"")&&E(n,o),16&t){let n;for(i=Object.entries(e[17]),n=0;n<i.length;n+=1){const l=$n(e,i,n);a[n]?a[n].p(l,t):(a[n]=jn(l),a[n].c(),a[n].m(r,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}},d(e){e&&y(t),e&&y(l),e&&y(s),v(a,e)}}}function jn(e){let t,n,l,s,r,c,o,i,a,u,d,m,f,p,g,h,v=e[20]+"",k=e[21].title+"";function S(){return e[15](e[20],e[16])}return{c(){t=w("tr"),n=w("th"),l=w("span"),s=x("#"),r=x(v),c=_(),o=w("td"),i=w("a"),a=x(k),d=_(),m=w("td"),f=w("button"),p=_(),P(l,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),P(n,"class","is-narrow is-3"),P(i,"href",u=e[21].url),P(i,"target","_blank"),P(f,"class","delete"),P(f,"aria-label","close"),P(m,"class","is-narrow")},m(e,u){b(e,t,u),$(t,n),$(n,l),$(l,s),$(l,r),$(t,c),$(t,o),$(o,i),$(i,a),$(t,d),$(t,m),$(m,f),b(e,p,u),g||(h=O(f,"click",S),g=!0)},p(t,n){e=t,16&n&&v!==(v=e[20]+"")&&E(r,v),16&n&&k!==(k=e[21].title+"")&&E(a,k),16&n&&u!==(u=e[21].url)&&P(i,"href",u)},d(e){e&&y(t),e&&y(p),g=!1,h()}}}function Cn(e){let t,n=Object.values(e[17]).length>0,l=n&&En(e);return{c(){l&&l.c(),t=S()},m(e,n){l&&l.m(e,n),b(e,t,n)},p(e,s){16&s&&(n=Object.values(e[17]).length>0),n?l?l.p(e,s):(l=En(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&y(t)}}}function Tn(e){let t,n=e[4],l=[];for(let t=0;t<n.length;t+=1)l[t]=Cn(hn(e,n,t));let s=null;return n.length||(s=Rn()),{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=S(),s&&s.c()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);b(e,t,n),s&&s.m(e,n)},p(e,r){if(16&r){let c;for(n=e[4],c=0;c<n.length;c+=1){const s=hn(e,n,c);l[c]?l[c].p(s,r):(l[c]=Cn(s),l[c].c(),l[c].m(t.parentNode,t))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length,!n.length&&s?s.p(e,r):n.length?s&&(s.d(1),s=null):(s=Rn(),s.c(),s.m(t.parentNode,t))}},d(e){v(l,e),e&&y(t),s&&s.d(e)}}}function Mn(e){let t,n,l,s,r,c,o,i,a,u,d=!e[1].includes("set");t=new Mt({}),l=new et({props:{selectionLength:e[3]}}),r=new _t({props:{recordsStore:e[9],searchFields:e[2]}});let m=d&&yn(e),f={ctx:e,current:null,token:null,hasCatch:!0,pending:Nn,then:xn,catch:kn,value:24,error:28,blocks:[,,,]};return function(e,t){const n=t.token={};function l(e,l,s,r){if(t.token!==n)return;t.resolved=r;let c=t.ctx;void 0!==s&&(c=c.slice(),c[s]=r);const o=e&&(t.current=e)(c);let i=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==l&&e&&(ee(),le(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),te())})):t.block.d(1),o.c(),ne(o,1),o.m(t.mount(),t.anchor),i=!0),t.block=o,t.blocks&&(t.blocks[l]=o),i&&Y()}if(!(s=e)||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then){if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}else{const n=U();if(e.then((e=>{F(n),l(t.then,1,t.value,e),F(null)}),(e=>{if(F(n),l(t.catch,2,t.error,e),F(null),!t.hasCatch)throw e})),t.current!==t.pending)return l(t.pending,0),!0}var s}(e[11],f),a=new ut({props:{selectionLength:e[3],$$slots:{default:[Tn]},$$scope:{ctx:e}}}),{c(){re(t.$$.fragment),n=_(),re(l.$$.fragment),s=_(),re(r.$$.fragment),c=_(),m&&m.c(),o=_(),f.block.c(),i=_(),re(a.$$.fragment)},m(e,d){ce(t,e,d),b(e,n,d),ce(l,e,d),b(e,s,d),ce(r,e,d),b(e,c,d),m&&m.m(e,d),b(e,o,d),f.block.m(e,f.anchor=d),f.mount=()=>i.parentNode,f.anchor=i,b(e,i,d),ce(a,e,d),u=!0},p(t,[n]){e=t;const s={};8&n&&(s.selectionLength=e[3]),l.$set(s);const c={};4&n&&(c.searchFields=e[2]),r.$set(c),2&n&&(d=!e[1].includes("set")),d?m?m.p(e,n):(m=yn(e),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null),function(e,t,n){const l=t.slice(),{resolved:s}=e;e.current===e.then&&(l[e.value]=s),e.current===e.catch&&(l[e.error]=s),e.block.p(l,n)}(f,e,n);const i={};8&n&&(i.selectionLength=e[3]),536870928&n&&(i.$$scope={dirty:n,ctx:e}),a.$set(i)},i(e){u||(ne(t.$$.fragment,e),ne(l.$$.fragment,e),ne(r.$$.fragment,e),ne(f.block),ne(a.$$.fragment,e),u=!0)},o(e){le(t.$$.fragment,e),le(l.$$.fragment,e),le(r.$$.fragment,e);for(let e=0;e<3;e+=1){le(f.blocks[e])}le(a.$$.fragment,e),u=!1},d(e){oe(t,e),e&&y(n),oe(l,e),e&&y(s),oe(r,e),e&&y(c),m&&m.d(e),e&&y(o),f.block.d(e),f.token=null,f=null,e&&y(i),oe(a,e)}}}function In(e,t,n){let l,s,r,c,o,i;const{selected:a,nbSelected:u}=ve;d(e,a,(e=>n(14,c=e))),d(e,u,(e=>n(13,r=e)));let{modelName:m=""}=t;H("modelName",m);let{modelTitle:f=""}=t;H("modelTitle",f);const p=It(m),{pageRecords:g,resultPage:h,resultNumber:$}=p;d(e,g,(e=>n(5,o=e))),d(e,$,(e=>n(6,i=e)));let{searchFields:b=[]}=t;return e.$$set=e=>{"modelName"in e&&n(0,m=e.modelName),"modelTitle"in e&&n(1,f=e.modelTitle),"searchFields"in e&&n(2,b=e.searchFields)},e.$$.update=()=>{16384&e.$$.dirty&&n(4,l=c(!1)),8192&e.$$.dirty&&n(3,s=r(!1))},[m,f,b,s,l,o,i,a,u,p,g,h,$,r,c,(e,t)=>ve.remove(e,t)]}return new class extends ue{constructor(e){super(),ae(this,e,In,Mn,c,{modelName:0,modelTitle:1,searchFields:2})}}({target:document.getElementById("record-list"),props:{searchFields:searchFields,modelName:modelName,modelTitle:modelTitle}})}();
//# sourceMappingURL=recordList.js.map
