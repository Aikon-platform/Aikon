var recordList=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function l(){return Object.create(null)}function o(e){e.forEach(n)}function s(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let r;function i(e,t){return r||(r=document.createElement("a")),r.href=t,e===r.href}function a(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function u(e){let t;return a(e,(e=>t=e))(),t}function d(e,t,n){e.$$.on_destroy.push(a(t,n))}function f(e,n,l,o){return e[1]&&o?t(l.ctx.slice(),e[1](o(n))):l.ctx}function m(e,t){e.appendChild(t)}function p(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function $(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function v(e){return document.createTextNode(e)}function y(){return v(" ")}function w(){return v("")}function k(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function x(e){return function(t){return t.preventDefault(),e.call(this,t)}}function _(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const S=["width","height"];function L(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)null==t[l]?e.removeAttribute(l):"style"===l?e.style.cssText=t[l]:"__value"===l?e.value=e[l]=t[l]:n[l]&&n[l].set&&-1===S.indexOf(l)?e[l]=t[l]:_(e,l,t[l])}function N(e){return""===e?null:+e}function O(e,t){t=""+t,e.data!==t&&(e.data=t)}function j(e,t){e.value=null==t?"":t}function R(e,t,n){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function P(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function A(e,t,n){e.classList[n?"add":"remove"](t)}let E;function C(e){E=e}function I(){if(!E)throw new Error("Function called outside component initialization");return E}const F=[],M=[];let T=[];const U=[],z=Promise.resolve();let D=!1;function H(e){T.push(e)}const V=new Set;let B=0;function J(){if(0!==B)return;const e=E;do{try{for(;B<F.length;){const e=F[B];B++,C(e),X(e.$$)}}catch(e){throw F.length=0,B=0,e}for(C(null),F.length=0,B=0;M.length;)M.pop()();for(let e=0;e<T.length;e+=1){const t=T[e];V.has(t)||(V.add(t),t())}T.length=0}while(F.length);for(;U.length;)U.pop()();D=!1,V.clear(),C(e)}function X(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}const q=new Set;let K;function Y(){K={r:0,c:[],p:K}}function G(){K.r||o(K.c),K=K.p}function Q(e,t){e&&e.i&&(q.delete(e),e.i(t))}function W(e,t,n,l){if(e&&e.o){if(q.has(e))return;q.add(e),K.c.push((()=>{q.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}else l&&l()}function Z(e,t){W(e,1,1,(()=>{t.delete(e.key)}))}function ee(e){e&&e.c()}function te(e,t,l,c){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,l),c||H((()=>{const t=e.$$.on_mount.map(n).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...t):o(t),e.$$.on_mount=[]})),i.forEach(H)}function ne(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];T.forEach((l=>-1===e.indexOf(l)?t.push(l):n.push(l))),n.forEach((e=>e())),T=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function le(e,t){-1===e.$$.dirty[0]&&(F.push(e),D||(D=!0,z.then(J)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(t,n,s,c,r,i,a,u=[-1]){const d=E;C(t);const f=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:r,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:l(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(f.root);let m=!1;if(f.ctx=s?s(t,n.props||{},((e,n,...l)=>{const o=l.length?l[0]:n;return f.ctx&&r(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),m&&le(t,e)),n})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!c&&c(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(g)}else f.fragment&&f.fragment.c();n.intro&&Q(t.$$.fragment),te(t,n.target,n.anchor,n.customElement),J()}C(d)}class se{$destroy(){ne(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ce=[];function re(t,n=e){let l;const o=new Set;function s(e){if(c(t,e)&&(t=e,l)){const e=!ce.length;for(const e of o)e[1](),ce.push(e,t);if(e){for(let e=0;e<ce.length;e+=2)ce[e][0](ce[e+1]);ce.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(c,r=e){const i=[c,r];return o.add(i),1===o.size&&(l=n(s)||e),c(t),()=>{o.delete(i),0===o.size&&l&&(l(),l=null)}}}}function ie(t,n,l){const c=!Array.isArray(t),r=c?[t]:t,i=n.length<2;return u=t=>{let l=!1;const u=[];let d=0,f=e;const m=()=>{if(d)return;f();const l=n(c?u[0]:u,t);i?t(l):f=s(l)?l:e},p=r.map(((e,t)=>a(e,(e=>{u[t]=e,d&=~(1<<t),l&&m()}),(()=>{d|=1<<t}))));return l=!0,m(),function(){o(p),f(),l=!1}},{subscribe:re(l,u).subscribe};var u}const ae=APP_LANG;USER_ID;const ue=CSRF_TOKEN;ADDITIONAL_MODULES;const de="Regions";SAS_APP_URL;const fe=CANTALOUPE_APP_URL;function me(e=null,t="full",n="full"){if(!e)return"https://via.placeholder.com/96x96?text=No+Image";if((e=e.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const l=e[e.length-1].includes(",")?e.pop().replace(".jpg",""):t,o=e.join("_").replace(".jpg","");return`${fe??"http://localhost:8182"}/iiif/2/${o}.jpg/${l}/${n}/0/default.jpg`}MEDIA_PATH;const pe=function(){const e={id:null,type:"documentSet",title:"en"===ae?"Document set":"Set de document",selected:{}},t={id:null,type:"regionsSet",title:"en"===ae?"Regions set":"Set de rÃ©gions",selected:{}},n=re({records:JSON.parse(localStorage.getItem("documentSet"))||e,regions:JSON.parse(localStorage.getItem("regionsSet"))||t}),{subscribe:l,update:o}=n;function s(e){localStorage.setItem(e.type,JSON.stringify(e))}function c(e,t){return e[t?"regions":"records"]?.selected||{}}function r(e,t=!0){const n=c(e,t);return t?n[de]??{}:Object.entries(n)}function i(e,t,n){const l=n===de?"regions":"records",o=e[l],{[t]:c,...r}=o.selected[n];return e[l]={...o,selected:{...o.selected,[n]:r}},s(e[l]),e}function a(e,t,n=!0){const l=t.type===de?"regions":"records",o=e[l],c=o.selected,r=t.type===de?t:{title:t.title,url:t.url};return e[l]={...o,selected:{...c,[t.type]:{...c[t.type]||{},[t.id]:r}}},n&&s(e[l]),e}return{subscribe:l,save:e=>o((t=>function(e,t){const n=t?"regions-set":"document-set";if(t)return window.alert("Region set management is not yet implemented"),e;let l=e[t?"regions":"records"],s={};Object.entries(l.selected).forEach((([e,t])=>{s[e]=Object.keys(t)}));const c=null!==l.id?`${l.id}/change`:"add";return fetch(`${window.location.origin}/${n}/${c}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":ue},body:JSON.stringify({title:l.title,...s})}).then((e=>e.json())).then((e=>{if(!e?.document_set_id)throw new Error("Failed to save selection");o((n=>{const l=n[t?"regions":"records"];return l.id=e.document_set_id,l.title=e.document_set_title,n}))})).catch((e=>console.error("Error:",e))),e}(t,e))),empty:e=>o((t=>(t[e?"regions":"records"].selected={},s(t[e?"regions":"records"]),t))),removeAll:(e,t)=>o((n=>function(e,t,n){const l=n===de?"regions":"records",o=e[l];let c=o.selected[n];return c&&Object.keys(c).length?(t.forEach((e=>{delete c[e]})),e[l]={...o,selected:{...o.selected,[n]:c}},s(e[l]),e):e}(n,e,t))),remove:(e,t)=>o((n=>i(n,e,t))),addAll:e=>o((t=>function(e,t){const n=t[0].type===de;return t.forEach((t=>{e=a(e,t,!1)})),s(e[n?"regions":"records"]),e}(t,e))),add:e=>o((t=>a(t,e))),toggle:e=>o((t=>{const n=c(t,e.type===de);return n[e.type]?.[e.id]?i(t,e.id,e.type):a(t,e)})),isSelected:ie(n,(e=>t=>c(e,t.type===de)[t.type]?.hasOwnProperty(t.id)||!1)),selected:ie(n,(e=>t=>r(e,t))),nbSelected:ie(n,(e=>t=>{const n=r(e,t);return t?Object.keys(n).length:n.reduce(((e,[t,n])=>e+Object.keys(n).length),0)})),selectionTitle:ie(n,(e=>t=>e[t?"regions":"records"].title))}}();function ge(e,t,n){const l=e.slice();return l[5]=t[n][0],l[6]=t[n][1],l}function he(e,t,n){const l=e.slice();return l[9]=t[n],l}function be(e){let t;return{c(){t=b("span"),t.innerHTML='<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span> \n                                <span style="margin-left: -0.5rem">Public</span>',_(t,"class","pl-3 icon-text is-size-7 is-center has-text-weight-normal")},m(e,n){p(e,t,n)},d(e){e&&g(t)}}}function $e(e){let t,n,l=e[0].hasOwnProperty("iiif"),o=e[0].buttons.includes("regions"),s=l&&ve(e),c=o&&we(e);return{c(){t=b("p"),s&&s.c(),n=y(),c&&c.c(),_(t,"class","subtitle is-6 mb-0 ml-2 pt-2")},m(e,l){p(e,t,l),s&&s.m(t,null),m(t,n),c&&c.m(t,null)},p(e,r){1&r&&(l=e[0].hasOwnProperty("iiif")),l?s?s.p(e,r):(s=ve(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),1&r&&(o=e[0].buttons.includes("regions")),o?c?c.p(e,r):(c=we(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(e){e&&g(t),s&&s.d(),c&&c.d()}}}function ve(e){let t,n=e[0].iiif,l=[];for(let t=0;t<n.length;t+=1)l[t]=ye(he(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);p(e,t,n)},p(e,o){if(1&o){let s;for(n=e[0].iiif,s=0;s<n.length;s+=1){const c=he(e,n,s);l[s]?l[s].p(c,o):(l[s]=ye(c),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(e){h(l,e),e&&g(t)}}}function ye(e){let t,n=e[9]+"";return{c(){t=b("span"),_(t,"class","tag logo mt-1")},m(e,l){p(e,t,l),t.innerHTML=n},p(e,l){1&l&&n!==(n=e[9]+"")&&(t.innerHTML=n)},d(e){e&&g(t)}}}function we(e){let t,n,l,o,s;return{c(){t=b("a"),n=b("span"),l=y(),o=b("span"),o.textContent=""+("en"===ae?"Show regions":"Afficher les rÃ©gions"),_(n,"class","iconify"),_(n,"data-icon","entypo:documents"),_(o,"class","ml-2"),_(t,"href",s=e[0].url+"regions/"),_(t,"class","button is-small is-rounded is-link px-2 py-1"),_(t,"title","en"===ae?"View image regions":"Afficher les rÃ©gions d'images")},m(e,s){p(e,t,s),m(t,n),m(t,l),m(t,o)},p(e,n){1&n&&s!==(s=e[0].url+"regions/")&&_(t,"href",s)},d(e){e&&g(t)}}}function ke(e){let t,n,l=e[1]?"Retirer de la":"Ajouter Ã  la";return{c(){t=v(l),n=v(" sÃ©lection")},m(e,l){p(e,t,l),p(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Retirer de la":"Ajouter Ã  la")&&O(t,l)},d(e){e&&g(t),e&&g(n)}}}function xe(e){let t,n,l=e[1]?"Remove from":"Add to";return{c(){t=v(l),n=v(" selection")},m(e,l){p(e,t,l),p(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Remove from":"Add to")&&O(t,l)},d(e){e&&g(t),e&&g(n)}}}function _e(e){let t;return{c(){t=$("path"),_(t,"fill","currentColor"),_(t,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(e,n){p(e,t,n)},d(e){e&&g(t)}}}function Se(e){let t;return{c(){t=$("path"),_(t,"fill","currentColor"),_(t,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(e,n){p(e,t,n)},d(e){e&&g(t)}}}function Le(e){let t,n,l,o,s,c,r,i,a=e[5]+"",u=e[6]+"";return{c(){t=b("div"),n=b("div"),l=v(a),o=y(),s=b("div"),c=v(u),i=y(),_(n,"class","column is-4 is-bold"),_(s,"class",r="column is-8 "+("-"===e[6]?"faded":"")),_(t,"class","datum is-middle columns svelte-1pgj3bz")},m(e,r){p(e,t,r),m(t,n),m(n,l),m(t,o),m(t,s),m(s,c),m(t,i)},p(e,t){1&t&&a!==(a=e[5]+"")&&O(l,a),1&t&&u!==(u=e[6]+"")&&O(c,u),1&t&&r!==(r="column is-8 "+("-"===e[6]?"faded":""))&&_(s,"class",r)},d(e){e&&g(t)}}}function Ne(t){let n,l,o,s,c,r,a,u,d,f,w,x,S,L,N,j,R,P,E,C,I,F,M,T,U,z,D,H,V,B,J,X,q,K,Y,G,Q=t[0].type+"",W=t[0].id+"",Z=t[0].title+"",ee=t[0].user+"",te=t[0].updated_at+"",ne=t[0].is_public&&be(),le=0!==t[0].buttons.length&&$e(t);let oe=("en"===ae?xe:ke)(t);function se(e,t){return e[1]?Se:_e}let ce=se(t),re=ce(t),ie=Object.entries(t[0].metadata),ue=[];for(let e=0;e<ie.length;e+=1)ue[e]=Le(ge(t,ie,e));return{c(){n=b("div"),l=b("div"),o=b("div"),s=b("div"),c=b("div"),r=b("figure"),a=b("img"),d=y(),f=b("div"),w=b("a"),x=b("span"),S=v(Q),L=v(" #"),N=v(W),j=y(),R=v(Z),P=y(),ne&&ne.c(),C=y(),I=b("p"),F=v(ee),M=y(),T=b("span"),U=v(te),z=y(),le&&le.c(),D=y(),H=b("div"),V=b("button"),oe.c(),B=y(),J=$("svg"),re.c(),X=y(),q=b("div"),K=b("div");for(let e=0;e<ue.length;e+=1)ue[e].c();i(a.src,u=me(t[0].img,"full","250,"))||_(a,"src",u),_(a,"alt","Record illustration"),_(r,"class","card image is-96x96 svelte-1pgj3bz"),_(c,"class","media-left"),_(x,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),_(w,"href",E=t[0].url),_(w,"class","title is-4 hoverable pt-2 svelte-1pgj3bz"),_(T,"class","tag p-1 mb-1"),_(I,"class","subtitle is-6 mb-0 ml-2 pt-2"),_(f,"class","media-content"),_(J,"xmlns","http://www.w3.org/2000/svg"),_(J,"viewBox","0 0 384 512"),_(J,"class","svelte-1pgj3bz"),_(V,"class","button"),A(V,"is-inverted",t[1]),_(H,"class","media-right"),_(s,"class","media"),_(K,"class","grid metadata pt-2 svelte-1pgj3bz"),_(q,"class","content fixed-grid px-5"),_(o,"class","card-content"),_(l,"class","card mb-3"),_(n,"class","item")},m(e,i){p(e,n,i),m(n,l),m(l,o),m(o,s),m(s,c),m(c,r),m(r,a),m(s,d),m(s,f),m(f,w),m(w,x),m(x,S),m(x,L),m(x,N),m(w,j),m(w,R),m(w,P),ne&&ne.m(w,null),m(f,C),m(f,I),m(I,F),m(I,M),m(I,T),m(T,U),m(f,z),le&&le.m(f,null),m(s,D),m(s,H),m(H,V),oe.m(V,null),m(V,B),m(V,J),re.m(J,null),m(o,X),m(o,q),m(q,K);for(let e=0;e<ue.length;e+=1)ue[e]&&ue[e].m(K,null);Y||(G=k(V,"click",t[4]),Y=!0)},p(e,[t]){if(1&t&&!i(a.src,u=me(e[0].img,"full","250,"))&&_(a,"src",u),1&t&&Q!==(Q=e[0].type+"")&&O(S,Q),1&t&&W!==(W=e[0].id+"")&&O(N,W),1&t&&Z!==(Z=e[0].title+"")&&O(R,Z),e[0].is_public?ne||(ne=be(),ne.c(),ne.m(w,null)):ne&&(ne.d(1),ne=null),1&t&&E!==(E=e[0].url)&&_(w,"href",E),1&t&&ee!==(ee=e[0].user+"")&&O(F,ee),1&t&&te!==(te=e[0].updated_at+"")&&O(U,te),0!==e[0].buttons.length?le?le.p(e,t):(le=$e(e),le.c(),le.m(f,null)):le&&(le.d(1),le=null),oe.p(e,t),ce!==(ce=se(e))&&(re.d(1),re=ce(e),re&&(re.c(),re.m(J,null))),2&t&&A(V,"is-inverted",e[1]),1&t){let n;for(ie=Object.entries(e[0].metadata),n=0;n<ie.length;n+=1){const l=ge(e,ie,n);ue[n]?ue[n].p(l,t):(ue[n]=Le(l),ue[n].c(),ue[n].m(K,null))}for(;n<ue.length;n+=1)ue[n].d(1);ue.length=ie.length}},i:e,o:e,d(e){e&&g(n),ne&&ne.d(),le&&le.d(),oe.d(),re.d(),h(ue,e),Y=!1,G()}}}function Oe(e,t,n){let l,o;const{isSelected:s}=pe;d(e,s,(e=>n(3,o=e)));let{item:c}=t;return e.$$set=e=>{"item"in e&&n(0,c=e.item)},e.$$.update=()=>{9&e.$$.dirty&&n(1,l=o(c))},[c,l,s,o,()=>pe.toggle(c)]}class je extends se{constructor(e){super(),oe(this,e,Oe,Ne,c,{item:0})}}function Re(t){let n,l,o,s,c,r,i,a,u,d="en"===ae?"Selection":"SÃ©lection";return{c(){n=b("div"),l=b("button"),o=b("span"),s=b("i"),c=y(),r=v(d),i=v("\n            ("),a=v(t[0]),u=v(")"),_(s,"class","fa-solid fa-book-bookmark"),_(o,"id","btn-content"),_(l,"id","set-btn"),_(l,"class","button px-5 py-4 is-link js-modal-trigger svelte-hs48f9"),_(l,"data-target","selection-modal"),_(n,"class","set-container svelte-hs48f9")},m(e,t){p(e,n,t),m(n,l),m(l,o),m(o,s),m(o,c),m(o,r),m(o,i),m(o,a),m(o,u)},p(e,[t]){1&t&&O(a,e[0])},i:e,o:e,d(e){e&&g(n)}}}function Pe(e,t,n){let{selectionLength:l=0}=t,o=l;return e.$$set=e=>{"selectionLength"in e&&n(0,l=e.selectionLength)},e.$$.update=()=>{if(3&e.$$.dirty&&l!==o){const e=l>o;n(1,o=l);const t=document.getElementById("btn-content");t&&t.animate([{transform:e?"translateY(-7px)":"translateX(-5px)"},{transform:e?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[l,o]}class Ae extends se{constructor(e){super(),oe(this,e,Pe,Re,c,{selectionLength:0})}}function Ee(t){let n,l,s,c,r,i,a,u,d,f,h="en"===ae?"Save selection":"Sauvegarder la sÃ©lection";return{c(){n=b("footer"),l=b("div"),s=b("button"),s.textContent=""+("en"===ae?"Clear selection":"Vider la sÃ©lection"),c=y(),r=b("button"),i=b("i"),a=y(),u=v(h),_(s,"class","button is-link is-light"),_(i,"class","fa-solid fa-floppy-disk"),_(r,"class","button is-link"),_(l,"class","buttons"),_(n,"class","modal-card-foot is-center")},m(e,o){p(e,n,o),m(n,l),m(l,s),m(l,c),m(l,r),m(r,i),m(r,a),m(r,u),d||(f=[k(s,"click",t[1]),k(r,"click",t[2])],d=!0)},p:e,i:e,o:e,d(e){e&&g(n),d=!1,o(f)}}}function Ce(e,t,n){let{isRegion:l=!0}=t;return e.$$set=e=>{"isRegion"in e&&n(0,l=e.isRegion)},[l,()=>pe.empty(l),()=>pe.save()]}class Ie extends se{constructor(e){super(),oe(this,e,Ce,Ee,c,{isRegion:0})}}function Fe(e){let t,n,l,o,s,c,r,i,a,u,d,h,$,w,k,x,S,L,N,j=e[2](e[0])+"";const R=e[5].default,P=function(e,t,n,l){if(e){const o=f(e,t,n,l);return e[0](o)}}(R,e,e[4],null);return L=new Ie({props:{isRegion:e[0]}}),{c(){t=b("div"),n=b("div"),l=y(),o=b("div"),s=b("div"),c=b("div"),r=b("i"),i=y(),a=v(j),u=v("\n                ("),d=v(e[1]),h=v(")"),$=y(),w=b("button"),k=y(),x=b("section"),P&&P.c(),S=y(),ee(L.$$.fragment),_(n,"class","modal-background"),_(r,"class","fa-solid fa-book-bookmark"),_(c,"class","title is-4 mb-0 media-content"),_(w,"class","delete media-left"),_(w,"aria-label","close"),_(s,"class","modal-card-head media mb-0"),_(x,"class","modal-card-body"),_(o,"class","modal-content"),_(t,"id","selection-modal"),_(t,"class","modal fade"),_(t,"tabindex","-1"),_(t,"aria-labelledby","selection-modal-label"),_(t,"aria-hidden","true")},m(e,f){p(e,t,f),m(t,n),m(t,l),m(t,o),m(o,s),m(s,c),m(c,r),m(c,i),m(c,a),m(c,u),m(c,d),m(c,h),m(s,$),m(s,w),m(o,k),m(o,x),P&&P.m(x,null),m(o,S),te(L,o,null),N=!0},p(e,[t]){(!N||5&t)&&j!==(j=e[2](e[0])+"")&&O(a,j),(!N||2&t)&&O(d,e[1]),P&&P.p&&(!N||16&t)&&function(e,t,n,l,o,s){if(o){const c=f(t,n,l,s);e.p(c,o)}}(P,R,e,e[4],N?function(e,t,n,l){if(e[2]&&l){const o=e[2](l(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|o[l];return e}return t.dirty|o}return t.dirty}(R,e[4],t,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[4]),null);const n={};1&t&&(n.isRegion=e[0]),L.$set(n)},i(e){N||(Q(P,e),Q(L.$$.fragment,e),N=!0)},o(e){W(P,e),W(L.$$.fragment,e),N=!1},d(e){e&&g(t),P&&P.d(e),ne(L)}}}function Me(e,t,n){let l,{$$slots:o={},$$scope:s}=t;const{selectionTitle:c}=pe;d(e,c,(e=>n(2,l=e)));let{isRegion:r=!1}=t,{selectionLength:i=!1}=t;return e.$$set=e=>{"isRegion"in e&&n(0,r=e.isRegion),"selectionLength"in e&&n(1,i=e.selectionLength),"$$scope"in e&&n(4,s=e.$$scope)},[r,i,l,c,s,o]}class Te extends se{constructor(e){super(),oe(this,e,Me,Fe,c,{isRegion:0,selectionLength:1})}}function Ue(e,t,n){const l=e.slice();return l[13]=t[n],l[14]=t,l[15]=n,l}function ze(e,t,n){const l=e.slice();return l[16]=t[n],l}function De(e){let t,n,l,o,s,c,r,i,a,u,d="en"===ae?"Search":"Rechercher",f=e[0],$=[];for(let t=0;t<f.length;t+=1)$[t]=Ye(Ue(e,f,t));return{c(){t=b("form"),n=b("article");for(let e=0;e<$.length;e+=1)$[e].c();l=y(),o=b("div"),s=b("button"),c=b("i"),r=y(),i=v(d),_(n,"class","message grid"),_(c,"class","fa-solid fa-magnifying-glass"),_(s,"type","submit"),_(s,"class","button is-link is-outlined is-fullwidth"),_(o,"class","panel-block columns"),_(t,"class","fixed-grid is-center")},m(d,f){p(d,t,f),m(t,n);for(let e=0;e<$.length;e+=1)$[e]&&$[e].m(n,null);m(t,l),m(t,o),m(o,s),m(s,c),m(s,r),m(s,i),a||(u=k(t,"submit",e[3]),a=!0)},p(e,t){if(19&t){let l;for(f=e[0],l=0;l<f.length;l+=1){const o=Ue(e,f,l);$[l]?$[l].p(o,t):($[l]=Ye(o),$[l].c(),$[l].m(n,null))}for(;l<$.length;l+=1)$[l].d(1);$.length=f.length}},d(e){e&&g(t),h($,e),a=!1,u()}}}function He(e){let t,n,l,o,s;function c(){e[10].call(t,e[13])}return{c(){t=b("input"),_(t,"type","text"),_(t,"class","input is-small is-wide"),_(t,"id",n=e[13].name),_(t,"name",l=e[13].name)},m(n,l){p(n,t,l),j(t,e[1][e[13].name]),o||(s=k(t,"input",c),o=!0)},p(o,s){e=o,1&s&&n!==(n=e[13].name)&&_(t,"id",n),1&s&&l!==(l=e[13].name)&&_(t,"name",l),3&s&&t.value!==e[1][e[13].name]&&j(t,e[1][e[13].name])},d(e){e&&g(t),o=!1,s()}}}function Ve(e){let t,n,l,o,s;function c(){e[9].call(t,e[13])}return{c(){t=b("input"),_(t,"type","number"),_(t,"class","input is-small is-wide"),_(t,"id",n=e[13].name),_(t,"name",l=e[13].name)},m(n,l){p(n,t,l),j(t,e[1][e[13].name]),o||(s=k(t,"input",c),o=!0)},p(o,s){e=o,1&s&&n!==(n=e[13].name)&&_(t,"id",n),1&s&&l!==(l=e[13].name)&&_(t,"name",l),3&s&&N(t.value)!==e[1][e[13].name]&&j(t,e[1][e[13].name])},d(e){e&&g(t),o=!1,s()}}}function Be(e){let t,n,l,o,s,c;function r(){e[8].call(n,e[13])}return{c(){t=v("}\n                            "),n=b("input"),_(n,"type","date"),_(n,"class","input is-small is-wide"),_(n,"id",l=e[13].name),_(n,"name",o=e[13].name)},m(l,o){p(l,t,o),p(l,n,o),j(n,e[1][e[13].name]),s||(c=k(n,"input",r),s=!0)},p(t,s){e=t,1&s&&l!==(l=e[13].name)&&_(n,"id",l),1&s&&o!==(o=e[13].name)&&_(n,"name",o),3&s&&j(n,e[1][e[13].name])},d(e){e&&g(t),e&&g(n),s=!1,c()}}}function Je(e){let t,n,l,o,s;function c(){e[7].call(t,e[13])}return{c(){t=b("input"),_(t,"type","checkbox"),_(t,"id",n=e[13].name),_(t,"name",l=e[13].name)},m(n,l){p(n,t,l),t.checked=e[1][e[13].name],o||(s=k(t,"change",c),o=!0)},p(o,s){e=o,1&s&&n!==(n=e[13].name)&&_(t,"id",n),1&s&&l!==(l=e[13].name)&&_(t,"name",l),3&s&&(t.checked=e[1][e[13].name])},d(e){e&&g(t),o=!1,s()}}}function Xe(e){let n,l,o,s,c,r,i,a,u=!e[4](e[13]),d=u&&qe(),f=e[13].choices,$=[];for(let t=0;t<f.length;t+=1)$[t]=Ke(ze(e,f,t));let v=[{id:s=e[13].name},{name:c=e[13].name},{class:"is-wide"},e[4](e[13])?{size:3,multiple:!0}:{}],y={};for(let e=0;e<v.length;e+=1)y=t(y,v[e]);function x(){e[6].call(l,e[13])}return{c(){n=b("div"),l=b("select"),d&&d.c(),o=w();for(let e=0;e<$.length;e+=1)$[e].c();L(l,y),void 0===e[1][e[13].name]&&H(x),_(n,"class",r="select is-small is-wide "+(e[4](e[13])?"is-multiple":""))},m(t,s){p(t,n,s),m(n,l),d&&d.m(l,null),m(l,o);for(let e=0;e<$.length;e+=1)$[e]&&$[e].m(l,null);"value"in y&&(y.multiple?P:R)(l,y.value),l.autofocus&&l.focus(),R(l,e[1][e[13].name],!0),i||(a=k(l,"change",x),i=!0)},p(t,i){if(e=t,1&i&&(u=!e[4](e[13])),u?d||(d=qe(),d.c(),d.m(l,o)):d&&(d.d(1),d=null),1&i){let t;for(f=e[13].choices,t=0;t<f.length;t+=1){const n=ze(e,f,t);$[t]?$[t].p(n,i):($[t]=Ke(n),$[t].c(),$[t].m(l,null))}for(;t<$.length;t+=1)$[t].d(1);$.length=f.length}L(l,y=function(e,t){const n={},l={},o={$$scope:1};let s=e.length;for(;s--;){const c=e[s],r=t[s];if(r){for(const e in c)e in r||(l[e]=1);for(const e in r)o[e]||(n[e]=r[e],o[e]=1);e[s]=r}else for(const e in c)o[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}(v,[1&i&&s!==(s=e[13].name)&&{id:s},1&i&&c!==(c=e[13].name)&&{name:c},{class:"is-wide"},1&i&&(e[4](e[13])?{size:3,multiple:!0}:{})])),17&i&&"value"in y&&(y.multiple?P:R)(l,y.value),3&i&&R(l,e[1][e[13].name]),1&i&&r!==(r="select is-small is-wide "+(e[4](e[13])?"is-multiple":""))&&_(n,"class",r)},d(e){e&&g(n),d&&d.d(),h($,e),i=!1,a()}}}function qe(e){let t;return{c(){t=b("option"),t.textContent="Select ...",t.__value="",t.value=t.__value,t.disabled=!0,t.selected=!0,_(t,"class","faded")},m(e,n){p(e,t,n)},d(e){e&&g(t)}}}function Ke(e){let t,n,l,o=e[16].label+"";return{c(){t=b("option"),n=v(o),t.__value=l=e[16].value,t.value=t.__value},m(e,l){p(e,t,l),m(t,n)},p(e,s){1&s&&o!==(o=e[16].label+"")&&O(n,o),1&s&&l!==(l=e[16].value)&&(t.__value=l,t.value=t.__value)},d(e){e&&g(t)}}}function Ye(e){let t,n,l,o,s,c,r,i,a,u=e[13].label+"";function d(e,t){return 1&t&&(r=null),1&t&&(i=null),null==r&&(r=!!e[13].type.includes("ChoiceField")),r?Xe:"BooleanField"===e[13].type?Je:(null==i&&(i=!!e[13].type.includes("Date")),i?Be:"IntegerField"===e[13].type||"FloatField"===e[13].type?Ve:He)}let f=d(e,-1),h=f(e);return{c(){t=b("div"),n=b("label"),l=v(u),s=y(),c=b("div"),h.c(),a=y(),_(n,"for",o=e[13].name),_(n,"class","label column is-small is-3 svelte-yc0ocn"),_(c,"class","control has-icons-right column is-9"),_(t,"class","field columns is-middle")},m(e,o){p(e,t,o),m(t,n),m(n,l),m(t,s),m(t,c),h.m(c,null),m(t,a)},p(e,t){1&t&&u!==(u=e[13].label+"")&&O(l,u),1&t&&o!==(o=e[13].name)&&_(n,"for",o),f===(f=d(e,t))&&h?h.p(e,t):(h.d(1),h=f(e),h&&(h.c(),h.m(c,null)))},d(e){e&&g(t),h.d()}}}function Ge(t){let n,l=t[0].length>0&&De(t);return{c(){l&&l.c(),n=w()},m(e,t){l&&l.m(e,t),p(e,n,t)},p(e,[t]){e[0].length>0?l?l.p(e,t):(l=De(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:e,o:e,d(e){l&&l.d(e),e&&g(n)}}}function Qe(e,t,n){let l,{recordsStore:o}=t;const{recordSearch:s,searchParams:c}=o;d(e,c,(e=>n(11,l=e)));let{searchFields:r=[]}=t,i={};var a;a=()=>{const e=l??new URLSearchParams(window.location.search);r.forEach((t=>{n(1,i[t.name]=e.get(t.name)||t.initial||"",i)}))},I().$$.on_mount.push(a);return e.$$set=e=>{"recordsStore"in e&&n(5,o=e.recordsStore),"searchFields"in e&&n(0,r=e.searchFields)},[r,i,c,function(e){e.preventDefault(),s(i)},e=>e.type.includes("Multiple"),o,function(e){i[e.name]=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(1,i),n(0,r)},function(e){i[e.name]=this.checked,n(1,i),n(0,r)},function(e){i[e.name]=this.value,n(1,i),n(0,r)},function(e){i[e.name]=N(this.value),n(1,i),n(0,r)},function(e){i[e.name]=this.value,n(1,i),n(0,r)}]}class We extends se{constructor(e){super(),oe(this,e,Qe,Ge,c,{recordsStore:5,searchFields:0})}}function Ze(e){let t,n,l,o,s,c,r,i,a,u=e[2]>1&&et(e),d=e[2]<e[1]&&lt(e);return{c(){t=b("nav"),n=b("ul"),u&&u.c(),l=y(),o=b("li"),s=b("a"),c=v(e[2]),r=y(),d&&d.c(),_(s,"class","pagination-link is-current"),_(s,"href",null),_(n,"class","pagination-list"),_(t,"class","pagination is-centered"),_(t,"aria-label","pagination")},m(f,g){p(f,t,g),m(t,n),u&&u.m(n,null),m(n,l),m(n,o),m(o,s),m(s,c),m(n,r),d&&d.m(n,null),i||(a=k(s,"click",x(e[8])),i=!0)},p(e,t){e[2]>1?u?u.p(e,t):(u=et(e),u.c(),u.m(n,l)):u&&(u.d(1),u=null),4&t&&O(c,e[2]),e[2]<e[1]?d?d.p(e,t):(d=lt(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&g(t),u&&u.d(),d&&d.d(),i=!1,a()}}}function et(e){let t,n,l,o,s,c,r=e[2]-1>1&&tt(e);return{c(){t=b("li"),n=b("a"),n.textContent="1",l=y(),r&&r.c(),o=w(),_(n,"class","pagination-link"),_(n,"href",null)},m(i,a){p(i,t,a),m(t,n),p(i,l,a),r&&r.m(i,a),p(i,o,a),s||(c=k(n,"click",x(e[6])),s=!0)},p(e,t){e[2]-1>1?r?r.p(e,t):(r=tt(e),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d(e){e&&g(t),e&&g(l),r&&r.d(e),e&&g(o),s=!1,c()}}}function tt(e){let t,n,l,o,s,c,r=e[2]-1+"",i=e[2]-1>2&&nt();return{c(){i&&i.c(),t=y(),n=b("li"),l=b("a"),o=v(r),_(l,"class","pagination-link"),_(l,"href",null)},m(r,a){i&&i.m(r,a),p(r,t,a),p(r,n,a),m(n,l),m(l,o),s||(c=k(l,"click",x(e[7])),s=!0)},p(e,n){e[2]-1>2?i||(i=nt(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),4&n&&r!==(r=e[2]-1+"")&&O(o,r)},d(e){i&&i.d(e),e&&g(t),e&&g(n),s=!1,c()}}}function nt(e){let t;return{c(){t=b("li"),t.innerHTML='<span class="pagination-ellipsis">â¦</span>'},m(e,n){p(e,t,n)},d(e){e&&g(t)}}}function lt(e){let t,n,l,o,s,c,r=e[2]+1<e[1]&&ot(e);return{c(){r&&r.c(),t=y(),n=b("li"),l=b("a"),o=v(e[1]),_(l,"class","pagination-link"),_(l,"href",null)},m(i,a){r&&r.m(i,a),p(i,t,a),p(i,n,a),m(n,l),m(l,o),s||(c=k(l,"click",x(e[10])),s=!0)},p(e,n){e[2]+1<e[1]?r?r.p(e,n):(r=ot(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),2&n&&O(o,e[1])},d(e){r&&r.d(e),e&&g(t),e&&g(n),s=!1,c()}}}function ot(e){let t,n,l,o,s,c,r,i=e[2]+1+"",a=e[2]+2<e[1]&&st();return{c(){t=b("li"),n=b("a"),l=v(i),o=y(),a&&a.c(),s=w(),_(n,"class","pagination-link"),_(n,"href",null)},m(i,u){p(i,t,u),m(t,n),m(n,l),p(i,o,u),a&&a.m(i,u),p(i,s,u),c||(r=k(n,"click",x(e[9])),c=!0)},p(e,t){4&t&&i!==(i=e[2]+1+"")&&O(l,i),e[2]+2<e[1]?a||(a=st(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(e){e&&g(t),e&&g(o),a&&a.d(e),e&&g(s),c=!1,r()}}}function st(e){let t;return{c(){t=b("li"),t.innerHTML='<span class="pagination-ellipsis">â¦</span>'},m(e,n){p(e,t,n)},d(e){e&&g(t)}}}function ct(t){let n,l=t[1]>1&&Ze(t);return{c(){l&&l.c(),n=w()},m(e,t){l&&l.m(e,t),p(e,n,t)},p(e,[t]){e[1]>1?l?l.p(e,t):(l=Ze(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:e,o:e,d(e){l&&l.d(e),e&&g(n)}}}function rt(e,t,n){let l,o,{store:s}=t;const{currentPage:c}=s;d(e,c,(e=>n(2,o=e)));let{nbOfItems:r}=t,{pageLength:i=50}=t;return e.$$set=e=>{"store"in e&&n(0,s=e.store),"nbOfItems"in e&&n(4,r=e.nbOfItems),"pageLength"in e&&n(5,i=e.pageLength)},e.$$.update=()=>{48&e.$$.dirty&&n(1,l=Math.ceil(r/i))},[s,l,o,c,r,i,()=>s.handlePageUpdate(1),()=>s.handlePageUpdate(o-1),()=>s.handlePageUpdate(o),()=>s.handlePageUpdate(o+1),()=>s.handlePageUpdate(l)]}class it extends se{constructor(e){super(),oe(this,e,rt,ct,c,{store:0,nbOfItems:4,pageLength:5})}}function at(t){let n,l,o,s,c,r,i,a,u,d,f,h,$,v,w;return{c(){n=b("button"),l=y(),o=b("div"),s=b("div"),c=y(),r=b("div"),i=b("div"),i.innerHTML='<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div> \n            <button class="delete media-left" aria-label="close"></button>',a=y(),u=b("section"),d=y(),f=b("footer"),h=b("div"),$=b("button"),$.textContent=""+("en"===ae?"Cancel":"Annuler"),v=y(),w=b("button"),w.textContent="OK",_(n,"id","hidden-msg-btn"),_(n,"class","js-modal-trigger"),_(n,"data-target","msg-modal"),n.hidden=!0,_(s,"id","modal-bkg"),_(s,"class","modal-background"),_(i,"class","modal-card-head media mb-0"),_(u,"id","modal-body"),_(u,"class","modal-card-body"),_($,"id","cancel-btn"),_($,"class","button is-link is-light"),_(w,"id","ok-btn"),_(w,"class","button is-link"),_(h,"class","buttons"),_(f,"id","modal-footer"),_(f,"class","modal-card-foot is-center pt-3"),f.hidden=!0,_(r,"class","modal-content"),_(o,"id","msg-modal"),_(o,"class","modal fade"),_(o,"tabindex","-1"),_(o,"aria-labelledby","selection-modal-label"),_(o,"aria-hidden","true")},m(e,t){p(e,n,t),p(e,l,t),p(e,o,t),m(o,s),m(o,c),m(o,r),m(r,i),m(r,a),m(r,u),m(r,d),m(r,f),m(f,h),m(h,$),m(h,v),m(h,w)},p:e,i:e,o:e,d(e){e&&g(n),e&&g(l),e&&g(o)}}}class ut extends se{constructor(e){super(),oe(this,e,null,at,c,{})}}function dt(e){const t=e,n=re(1),l=re([]),o=re(0),s=re(new URLSearchParams(window.location.search));async function c(){const e=u(s);e.set("p",`${u(n)}`);try{const s=await fetch(`${window.location.origin}/search/${t}/?${e.toString()}`),c=await s.json();l.set(c.results),o.set(c.count),n.set(c.current_page),e.set("p",String(u(n)));const r=`${window.location.pathname}?${e.toString()}`;return history.pushState(null,"",r),c}catch(e){throw console.error("Error fetching page:",e),e}}!function(e,t){if("undefined"!=typeof window){const n=parseInt(new URLSearchParams(window.location.search).get(t));if(!isNaN(n))return e.set(n),n}e.set(1)}(n,"p");let r=c();function i(e){!function(e,t,n){if(t.set(e),"undefined"!=typeof window){const t=new URL(window.location.href);t.searchParams.set(n,e),window.history.pushState({},"",t)}}(e,n,"p"),r=c()}return{currentPage:n,pageRecords:l,resultPage:r,resultNumber:o,fetchPage:c,handlePageUpdate:i,recordSearch:function(e){const t=new URLSearchParams(e);s.set(t),i(1)}}}function ft(e,t,n){const l=e.slice();return l[15]=t[n][0],l[16]=t[n][1],l}function mt(e,t,n){const l=e.slice();return l[19]=t[n][0],l[20]=t[n][1],l}function pt(e,t,n){const l=e.slice();return l[24]=t[n],l}function gt(t){let n,l,o,s,c="en"===ae?"Error when retrieving records: ":"Erreur lors de la rÃ©cupÃ©ration des enregistrements : ",r=t[27]+"";return{c(){n=b("div"),l=v(c),o=y(),s=v(r),_(n,"class","faded is-center")},m(e,t){p(e,n,t),m(n,l),m(n,o),m(n,s)},p:e,i:e,o:e,d(e){e&&g(n)}}}function ht(e){let t,n,l=0!==e[3].length&&bt(e);return{c(){l&&l.c(),t=w()},m(e,o){l&&l.m(e,o),p(e,t,o),n=!0},p(e,n){0!==e[3].length?l?(l.p(e,n),8&n&&Q(l,1)):(l=bt(e),l.c(),Q(l,1),l.m(t.parentNode,t)):l&&(Y(),W(l,1,1,(()=>{l=null})),G())},i(e){n||(Q(l),n=!0)},o(e){W(l),n=!1},d(e){l&&l.d(e),e&&g(t)}}}function bt(e){let t,n,l,s,c,r,i=[],a=new Map;t=new it({props:{store:e[7],nbOfItems:e[4]}});let u=e[3];const d=e=>e[24].id;for(let t=0;t<u.length;t+=1){let n=pt(e,u,t),l=d(n);a.set(l,i[t]=vt(l,n))}let f=null;return u.length||(f=$t()),c=new it({props:{store:e[7],nbOfItems:e[4]}}),{c(){ee(t.$$.fragment),n=y(),l=b("div");for(let e=0;e<i.length;e+=1)i[e].c();f&&f.c(),s=y(),ee(c.$$.fragment)},m(e,o){te(t,e,o),p(e,n,o),p(e,l,o);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(l,null);f&&f.m(l,null),p(e,s,o),te(c,e,o),r=!0},p(e,n){const s={};16&n&&(s.nbOfItems=e[4]),t.$set(s),8&n&&(u=e[3],Y(),i=function(e,t,n,l,s,c,r,i,a,u,d,f){let m=e.length,p=c.length,g=m;const h={};for(;g--;)h[e[g].key]=g;const b=[],$=new Map,v=new Map,y=[];for(g=p;g--;){const e=f(s,c,g),o=n(e);let i=r.get(o);i?l&&y.push((()=>i.p(e,t))):(i=u(o,e),i.c()),$.set(o,b[g]=i),o in h&&v.set(o,Math.abs(g-h[o]))}const w=new Set,k=new Set;function x(e){Q(e,1),e.m(i,d),r.set(e.key,e),d=e.first,p--}for(;m&&p;){const t=b[p-1],n=e[m-1],l=t.key,o=n.key;t===n?(d=t.first,m--,p--):$.has(o)?!r.has(l)||w.has(l)?x(t):k.has(o)?m--:v.get(l)>v.get(o)?(k.add(l),x(t)):(w.add(o),m--):(a(n,r),m--)}for(;m--;){const t=e[m];$.has(t.key)||a(t,r)}for(;p;)x(b[p-1]);return o(y),b}(i,n,d,1,e,u,a,l,Z,vt,null,pt),G(),!u.length&&f?f.p(e,n):u.length?f&&(f.d(1),f=null):(f=$t(),f.c(),f.m(l,null)));const r={};16&n&&(r.nbOfItems=e[4]),c.$set(r)},i(e){if(!r){Q(t.$$.fragment,e);for(let e=0;e<u.length;e+=1)Q(i[e]);Q(c.$$.fragment,e),r=!0}},o(e){W(t.$$.fragment,e);for(let e=0;e<i.length;e+=1)W(i[e]);W(c.$$.fragment,e),r=!1},d(e){ne(t,e),e&&g(n),e&&g(l);for(let e=0;e<i.length;e+=1)i[e].d();f&&f.d(),e&&g(s),ne(c,e)}}}function $t(t){let n;return{c(){n=b("p"),n.textContent=""+("en"===ae?"No records found":"Aucun enregistrement trouvÃ©")},m(e,t){p(e,n,t)},p:e,d(e){e&&g(n)}}}function vt(e,t){let n,l,o;return l=new je({props:{item:t[24]}}),{key:e,first:null,c(){n=w(),ee(l.$$.fragment),this.first=n},m(e,t){p(e,n,t),te(l,e,t),o=!0},p(e,n){t=e;const o={};8&n&&(o.item=t[24]),l.$set(o)},i(e){o||(Q(l.$$.fragment,e),o=!0)},o(e){W(l.$$.fragment,e),o=!1},d(e){e&&g(n),ne(l,e)}}}function yt(t){let n;return{c(){n=b("div"),n.textContent=""+("en"===ae?"Retrieving records...":"RÃ©cupÃ©ration des enregistrements..."),_(n,"class","faded is-center")},m(e,t){p(e,n,t)},p:e,i:e,o:e,d(e){e&&g(n)}}}function wt(t){let n,l,o;return{c(){n=b("tr"),l=b("td"),l.textContent=""+("en"===ae?"No documents in selection":"Aucun document sÃ©lectionnÃ©"),o=y()},m(e,t){p(e,n,t),m(n,l),m(n,o)},p:e,d(e){e&&g(n)}}}function kt(t){let n,l,o;return{c(){n=b("tr"),l=b("td"),l.textContent=""+("en"===ae?"No documents in selection":"Aucun document sÃ©lectionnÃ©"),o=y()},m(e,t){p(e,n,t),m(n,l),m(n,o)},p:e,d(e){e&&g(n)}}}function xt(e){let t,n,l,o,s,c,r,i,a,u,d,f,h,$,w,x,S=e[19]+"",L=e[20].title+"";function N(){return e[14](e[19],e[15])}return{c(){t=b("tr"),n=b("th"),l=b("span"),o=v("#"),s=v(S),c=y(),r=b("td"),i=b("a"),a=v(L),d=y(),f=b("td"),h=b("button"),$=y(),_(l,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),_(n,"class","is-narrow is-3"),_(i,"href",u=e[20].url),_(i,"target","_blank"),_(h,"class","delete"),_(h,"aria-label","close"),_(f,"class","is-narrow")},m(e,u){p(e,t,u),m(t,n),m(n,l),m(l,o),m(l,s),m(t,c),m(t,r),m(r,i),m(i,a),m(t,d),m(t,f),m(f,h),m(t,$),w||(x=k(h,"click",N),w=!0)},p(t,n){e=t,4&n&&S!==(S=e[19]+"")&&O(s,S),4&n&&L!==(L=e[20].title+"")&&O(a,L),4&n&&u!==(u=e[20].url)&&_(i,"href",u)},d(e){e&&g(t),w=!1,x()}}}function _t(e){let t,n,l,o,s,c,r=e[15]+"",i=Object.entries(e[16]),a=[];for(let t=0;t<i.length;t+=1)a[t]=xt(mt(e,i,t));let u=null;return i.length||(u=kt()),{c(){t=b("h3"),n=v(r),l=y(),o=b("table"),s=b("tbody");for(let e=0;e<a.length;e+=1)a[e].c();u&&u.c(),c=y(),_(o,"class","table pl-2 is-fullwidth")},m(e,r){p(e,t,r),m(t,n),p(e,l,r),p(e,o,r),m(o,s);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(s,null);u&&u.m(s,null),m(o,c)},p(e,t){if(4&t&&r!==(r=e[15]+"")&&O(n,r),4&t){let n;for(i=Object.entries(e[16]),n=0;n<i.length;n+=1){const l=mt(e,i,n);a[n]?a[n].p(l,t):(a[n]=xt(l),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length,!i.length&&u?u.p(e,t):i.length?u&&(u.d(1),u=null):(u=kt(),u.c(),u.m(s,null))}},d(e){e&&g(t),e&&g(l),e&&g(o),h(a,e),u&&u.d()}}}function St(e){let t,n=e[2],l=[];for(let t=0;t<n.length;t+=1)l[t]=_t(ft(e,n,t));let o=null;return n.length||(o=wt()),{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=w(),o&&o.c()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);p(e,t,n),o&&o.m(e,n)},p(e,s){if(4&s){let c;for(n=e[2],c=0;c<n.length;c+=1){const o=ft(e,n,c);l[c]?l[c].p(o,s):(l[c]=_t(o),l[c].c(),l[c].m(t.parentNode,t))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length,!n.length&&o?o.p(e,s):n.length?o&&(o.d(1),o=null):(o=wt(),o.c(),o.m(t.parentNode,t))}},d(e){h(l,e),e&&g(t),o&&o.d(e)}}}function Lt(e){let t,n,l,o,s,c,r,i,a;t=new ut({}),l=new Ae({props:{selectionLength:e[1]}}),s=new We({props:{recordsStore:e[7],searchFields:e[0]}});let u={ctx:e,current:null,token:null,hasCatch:!0,pending:yt,then:ht,catch:gt,value:23,error:27,blocks:[,,,]};return function(e,t){const n=t.token={};function l(e,l,o,s){if(t.token!==n)return;t.resolved=s;let c=t.ctx;void 0!==o&&(c=c.slice(),c[o]=s);const r=e&&(t.current=e)(c);let i=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==l&&e&&(Y(),W(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),G())})):t.block.d(1),r.c(),Q(r,1),r.m(t.mount(),t.anchor),i=!0),t.block=r,t.blocks&&(t.blocks[l]=r),i&&J()}if(!(o=e)||"object"!=typeof o&&"function"!=typeof o||"function"!=typeof o.then){if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}else{const n=I();if(e.then((e=>{C(n),l(t.then,1,t.value,e),C(null)}),(e=>{if(C(n),l(t.catch,2,t.error,e),C(null),!t.hasCatch)throw e})),t.current!==t.pending)return l(t.pending,0),!0}var o}(e[9],u),i=new Te({props:{selectionLength:e[1],$$slots:{default:[St]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment),n=y(),ee(l.$$.fragment),o=y(),ee(s.$$.fragment),c=y(),u.block.c(),r=y(),ee(i.$$.fragment)},m(e,d){te(t,e,d),p(e,n,d),te(l,e,d),p(e,o,d),te(s,e,d),p(e,c,d),u.block.m(e,u.anchor=d),u.mount=()=>r.parentNode,u.anchor=r,p(e,r,d),te(i,e,d),a=!0},p(t,[n]){e=t;const o={};2&n&&(o.selectionLength=e[1]),l.$set(o);const c={};1&n&&(c.searchFields=e[0]),s.$set(c),function(e,t,n){const l=t.slice(),{resolved:o}=e;e.current===e.then&&(l[e.value]=o),e.current===e.catch&&(l[e.error]=o),e.block.p(l,n)}(u,e,n);const r={};2&n&&(r.selectionLength=e[1]),268435460&n&&(r.$$scope={dirty:n,ctx:e}),i.$set(r)},i(e){a||(Q(t.$$.fragment,e),Q(l.$$.fragment,e),Q(s.$$.fragment,e),Q(u.block),Q(i.$$.fragment,e),a=!0)},o(e){W(t.$$.fragment,e),W(l.$$.fragment,e),W(s.$$.fragment,e);for(let e=0;e<3;e+=1){W(u.blocks[e])}W(i.$$.fragment,e),a=!1},d(e){ne(t,e),e&&g(n),ne(l,e),e&&g(o),ne(s,e),e&&g(c),u.block.d(e),u.token=null,u=null,e&&g(r),ne(i,e)}}}function Nt(e,t,n){let l,o,s,c,r,i;const{selected:a,nbSelected:u}=pe;d(e,a,(e=>n(13,c=e))),d(e,u,(e=>n(12,s=e)));let{modelName:f=""}=t;var m,p;m="modelName",p=f,I().$$.context.set(m,p);const g=dt(f),{pageRecords:h,resultPage:b,resultNumber:$}=g;d(e,h,(e=>n(3,r=e))),d(e,$,(e=>n(4,i=e)));let{searchFields:v=[]}=t;return e.$$set=e=>{"modelName"in e&&n(11,f=e.modelName),"searchFields"in e&&n(0,v=e.searchFields)},e.$$.update=()=>{8192&e.$$.dirty&&n(2,l=c(!1)),4096&e.$$.dirty&&n(1,o=s(!1))},[v,o,l,r,i,a,u,g,h,b,$,f,s,c,(e,t)=>pe.remove(e,t)]}return new class extends se{constructor(e){super(),oe(this,e,Nt,Lt,c,{modelName:11,searchFields:0})}}({target:document.getElementById("record-list"),props:{searchFields:searchFields,modelName:modelName}})}();
//# sourceMappingURL=recordList.js.map
