var recordList=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s,c;function i(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function u(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function a(t,e,n){t.$$.on_destroy.push(u(e,n))}function d(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function $(){return b(" ")}function y(){return b("")}function v(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function k(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t){c=t}const _=[],S=[];let A=[];const E=[],O=Promise.resolve();let L=!1;function j(t){A.push(t)}const N=new Set;let C=0;function R(){if(0!==C)return;const t=c;do{try{for(;C<_.length;){const t=_[C];C++,w(t),P(t.$$)}}catch(t){throw _.length=0,C=0,t}for(w(null),_.length=0,C=0;S.length;)S.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];N.has(e)||(N.add(e),e())}A.length=0}while(_.length);for(;E.length;)E.pop()();L=!1,N.clear(),w(t)}function P(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const z=new Set;let I;function M(){I={r:0,c:[],p:I}}function V(){I.r||l(I.c),I=I.p}function T(t,e){t&&t.i&&(z.delete(t),t.i(e))}function B(t,e,n,l){if(t&&t.o){if(z.has(t))return;z.add(t),I.c.push((()=>{z.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}else l&&l()}function H(t,e){B(t,1,1,(()=>{e.delete(t.key)}))}function D(t){t&&t.c()}function U(t,n,r,s){const{fragment:c,after_update:i}=t.$$;c&&c.m(n,r),s||j((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):l(n),t.$$.on_mount=[]})),i.forEach(j)}function q(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];A.forEach((l=>-1===t.indexOf(l)?e.push(l):n.push(l))),n.forEach((t=>t())),A=e}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(_.push(t),L||(L=!0,O.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,o,r,s,i,u,a,d=[-1]){const f=c;w(e);const p=e.$$={fragment:null,ctx:[],props:u,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||f.$$.root};a&&a(p.root);let h=!1;if(p.ctx=r?r(e,o.props||{},((t,n,...l)=>{const o=l.length?l[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),h&&J(e,t)),n})):[],p.update(),h=!0,l(p.before_update),p.fragment=!!s&&s(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(m)}else p.fragment&&p.fragment.c();o.intro&&T(e.$$.fragment),U(e,o.target,o.anchor,o.customElement),R()}w(f)}class Y{$destroy(){q(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const t=l.indexOf(n);-1!==t&&l.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const F=[];function G(e,n=t){let l;const o=new Set;function s(t){if(r(e,t)&&(e=t,l)){const t=!F.length;for(const t of o)t[1](),F.push(t,e);if(t){for(let t=0;t<F.length;t+=2)F[t][0](F[t+1]);F.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,c=t){const i=[r,c];return o.add(i),1===o.size&&(l=n(s)||t),r(e),()=>{o.delete(i),0===o.size&&l&&(l(),l=null)}}}}function K(e,n,r){const s=!Array.isArray(e),c=s?[e]:e,i=n.length<2;return a=e=>{let r=!1;const a=[];let d=0,f=t;const m=()=>{if(d)return;f();const l=n(s?a[0]:a,e);i?e(l):f=o(l)?l:t},p=c.map(((t,e)=>u(t,(t=>{a[e]=t,d&=~(1<<e),r&&m()}),(()=>{d|=1<<e}))));return r=!0,m(),function(){l(p),f(),r=!1}},{subscribe:G(r,a).subscribe};var a}const Q=APP_LANG;USER_ID,CSRF_TOKEN,ADDITIONAL_MODULES;const W="Regions";SAS_APP_URL;const Z=CANTALOUPE_APP_URL;function tt(t=null,e="full",n="full"){if(!t)return"https://via.placeholder.com/96x96?text=No+Image";if((t=t.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const l=t[t.length-1].includes(",")?t.pop().replace(".jpg",""):e,o=t.join("_").replace(".jpg","");return`${Z??"http://localhost:8182"}/iiif/2/${o}.jpg/${l}/${n}/0/default.jpg`}const et=function(){const t=G(JSON.parse(localStorage.getItem("documentSet"))||{}),{subscribe:e,get:n,update:l}=t;function o(t){localStorage.setItem("documentSet",JSON.stringify(t))}function r(t,e=!0){return e?t[W]??{}:Object.entries(t).filter((([t,e])=>t!==W))}function s(t,e,n){if(t[n]){const{[e]:l,...o}=t[n];t={...t,[n]:o}}return o(t),t}function c(t,e){return t.hasOwnProperty(e.type)||(t[e.type]={}),t[e.type]={...t[e.type],[e.id]:e},o(t),t}return{subscribe:e,save:()=>l((t=>(console.log(t),t))),empty:t=>l((e=>(t?delete e[W]:Object.keys(e).forEach((t=>{t!==W&&delete e[t]})),o(e),e))),addAll:t=>l((e=>function(t,e){return e.forEach((e=>{t[e.type]||(t[e.type]={}),t[e.type][e.id]=e})),o(t),t}(e,t))),removeAll:(t,e)=>l((n=>function(t,e,n){return t[n]?(e.forEach((e=>{delete t[n][e]})),o(t),t):t}(n,t,e))),remove:(t,e)=>l((n=>s(n,t,e))),add:t=>l((e=>c(e,t))),toggle:t=>l((e=>e[t.type]?.[t.id]?s(e,t.id,t.type):c(e,t))),toggleAll:(t,e,n)=>l((t=>{})),isSelected:K(t,(t=>e=>t[e.type]?.hasOwnProperty(e.id)||!1)),selected:K(t,(t=>e=>r(t,e))),nbSelected:K(t,(t=>e=>{const n=r(t,e);return e?Object.keys(n).length:n.reduce(((t,[e,n])=>t+Object.keys(n).length),0)}))}}();function nt(t,e,n){const l=t.slice();return l[5]=e[n][0],l[6]=e[n][1],l}function lt(t,e,n){const l=t.slice();return l[9]=e[n],l}function ot(t){let e;return{c(){e=h("span"),e.innerHTML='<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span> \n                                <span style="margin-left: -0.5rem">Public</span>',x(e,"class","pl-3 icon-text is-size-7 is-center has-text-weight-normal")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function rt(t){let e,n,l,o,r=t[0].hasOwnProperty("iiif"),s=t[0].buttons.includes("regions"),c=t[0].buttons.includes("similarity"),i=t[0].buttons.includes("vectorization"),u=r&&st(t),a=s&&it(t),p=c&&ut(t),g=i&&at(t);return{c(){e=h("p"),u&&u.c(),n=$(),a&&a.c(),l=$(),p&&p.c(),o=$(),g&&g.c(),x(e,"class","subtitle is-6 mb-0 ml-2 pt-2")},m(t,r){f(t,e,r),u&&u.m(e,null),d(e,n),a&&a.m(e,null),d(e,l),p&&p.m(e,null),d(e,o),g&&g.m(e,null)},p(t,d){1&d&&(r=t[0].hasOwnProperty("iiif")),r?u?u.p(t,d):(u=st(t),u.c(),u.m(e,n)):u&&(u.d(1),u=null),1&d&&(s=t[0].buttons.includes("regions")),s?a?a.p(t,d):(a=it(t),a.c(),a.m(e,l)):a&&(a.d(1),a=null),1&d&&(c=t[0].buttons.includes("similarity")),c?p?p.p(t,d):(p=ut(t),p.c(),p.m(e,o)):p&&(p.d(1),p=null),1&d&&(i=t[0].buttons.includes("vectorization")),i?g?g.p(t,d):(g=at(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(t){t&&m(e),u&&u.d(),a&&a.d(),p&&p.d(),g&&g.d()}}}function st(t){let e,n=t[0].iiif,l=[];for(let e=0;e<n.length;e+=1)l[e]=ct(lt(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=y()},m(t,n){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,n);f(t,e,n)},p(t,o){if(1&o){let r;for(n=t[0].iiif,r=0;r<n.length;r+=1){const s=lt(t,n,r);l[r]?l[r].p(s,o):(l[r]=ct(s),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(t){p(l,t),t&&m(e)}}}function ct(t){let e,n=t[9]+"";return{c(){e=h("span"),x(e,"class","tag logo mt-1")},m(t,l){f(t,e,l),e.innerHTML=n},p(t,l){1&l&&n!==(n=t[9]+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function it(t){let e,n,l;return{c(){e=h("a"),n=h("span"),x(n,"class","iconify"),x(n,"data-icon","entypo:documents"),x(e,"href",l=t[0].url+"regions/"),x(e,"class","button is-small is-rounded is-link px-2"),x(e,"title","en"===Q?"Show extracted regions":"Afficher les zones d'images")},m(t,l){f(t,e,l),d(e,n)},p(t,n){1&n&&l!==(l=t[0].url+"regions/")&&x(e,"href",l)},d(t){t&&m(e)}}}function ut(t){let e,n,l;return{c(){e=h("a"),n=h("span"),x(n,"class","iconify"),x(n,"data-icon","octicon:mirror-16"),x(e,"href",l=t[0].url+"similarity/"),x(e,"class","button is-small is-rounded is-link px-2"),x(e,"title","en"===Q?"Show similarity":"Afficher les similarités")},m(t,l){f(t,e,l),d(e,n)},p(t,n){1&n&&l!==(l=t[0].url+"similarity/")&&x(e,"href",l)},d(t){t&&m(e)}}}function at(t){let e,n,l;return{c(){e=h("a"),n=h("span"),x(n,"class","iconify"),x(n,"data-icon","arcticons:geogebra-geometry"),x(e,"href",l=t[0].url+"vectorization/"),x(e,"class","button is-small is-rounded is-link px-2"),x(e,"title","en"===Q?"Show vectorizations":"Afficher les vectorisations")},m(t,l){f(t,e,l),d(e,n)},p(t,n){1&n&&l!==(l=t[0].url+"vectorization/")&&x(e,"href",l)},d(t){t&&m(e)}}}function dt(t){let e,n,l=t[1]?"Retirer de":"Ajouter à la";return{c(){e=b(l),n=b(" sélection")},m(t,l){f(t,e,l),f(t,n,l)},p(t,n){2&n&&l!==(l=t[1]?"Retirer de":"Ajouter à la")&&k(e,l)},d(t){t&&m(e),t&&m(n)}}}function ft(t){let e,n,l=t[1]?"Remove from":"Add to";return{c(){e=b(l),n=b(" selection")},m(t,l){f(t,e,l),f(t,n,l)},p(t,n){2&n&&l!==(l=t[1]?"Remove from":"Add to")&&k(e,l)},d(t){t&&m(e),t&&m(n)}}}function mt(t){let e;return{c(){e=g("path"),x(e,"fill","currentColor"),x(e,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function pt(t){let e;return{c(){e=g("path"),x(e,"fill","currentColor"),x(e,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(t,n){f(t,e,n)},d(t){t&&m(e)}}}function ht(t){let e,n,l,o,r,s,c,i=t[5]+"",u=t[6]+"";return{c(){e=h("tr"),n=h("th"),l=b(i),o=$(),r=h("td"),s=b(u),c=$(),x(n,"class","is-narrow is-3")},m(t,i){f(t,e,i),d(e,n),d(n,l),d(e,o),d(e,r),d(r,s),d(e,c)},p(t,e){1&e&&i!==(i=t[5]+"")&&k(l,i),1&e&&u!==(u=t[6]+"")&&k(s,u)},d(t){t&&m(e)}}}function gt(e){let n,l,o,r,s,c,u,a,y,w,_,S,A,E,O,L,j,N,C,R,P,z,I,M,V,T,B,H,D,U,q,J,X,Y,F,G,K,W,Z=e[0].type+"",et=e[0].id+"",lt=e[0].title+"",st=e[0].user+"",ct=e[0].updated_at+"",it=e[0].is_public&&ot(),ut=0!==e[0].buttons.length&&rt(e);let at=("en"===Q?ft:dt)(e);function gt(t,e){return t[1]?pt:mt}let bt=gt(e),$t=bt(e),yt=Object.entries(e[0].metadata),vt=[];for(let t=0;t<yt.length;t+=1)vt[t]=ht(nt(e,yt,t));return{c(){n=h("div"),l=h("div"),o=h("div"),r=h("div"),s=h("div"),c=h("figure"),u=h("img"),y=$(),w=h("div"),_=h("a"),S=h("span"),A=b(Z),E=b(" #"),O=b(et),L=$(),j=b(lt),N=$(),it&&it.c(),R=$(),P=h("p"),z=b(st),I=$(),M=h("span"),V=b(ct),T=$(),ut&&ut.c(),B=$(),H=h("div"),D=h("button"),at.c(),U=$(),q=g("svg"),$t.c(),X=$(),Y=h("div"),F=h("table"),G=h("tbody");for(let t=0;t<vt.length;t+=1)vt[t].c();i(u.src,a=tt(e[0].img,"full","250,"))||x(u,"src",a),x(u,"alt","Record illustration"),x(c,"class","card image is-96x96 svelte-xqp9nk"),x(s,"class","media-left"),x(S,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),x(_,"href",C=e[0].url),x(_,"class","title is-4 hoverable pt-2 svelte-xqp9nk"),x(M,"class","tag p-1 mb-1"),x(P,"class","subtitle is-6 mb-0 ml-2 pt-2"),x(w,"class","media-content"),x(q,"xmlns","http://www.w3.org/2000/svg"),x(q,"viewBox","0 0 384 512"),x(q,"class","svelte-xqp9nk"),x(D,"class",J="button "+(e[1]?"is-inverted":"")),x(H,"class","media-right"),x(r,"class","media"),x(F,"class","table pl-2 is-fullwidth"),x(Y,"class","content"),x(o,"class","card-content"),x(l,"class","card mb-3"),x(n,"class","item")},m(t,i){f(t,n,i),d(n,l),d(l,o),d(o,r),d(r,s),d(s,c),d(c,u),d(r,y),d(r,w),d(w,_),d(_,S),d(S,A),d(S,E),d(S,O),d(_,L),d(_,j),d(_,N),it&&it.m(_,null),d(w,R),d(w,P),d(P,z),d(P,I),d(P,M),d(M,V),d(w,T),ut&&ut.m(w,null),d(r,B),d(r,H),d(H,D),at.m(D,null),d(D,U),d(D,q),$t.m(q,null),d(o,X),d(o,Y),d(Y,F),d(F,G);for(let t=0;t<vt.length;t+=1)vt[t]&&vt[t].m(G,null);K||(W=v(D,"click",e[4]),K=!0)},p(t,[e]){if(1&e&&!i(u.src,a=tt(t[0].img,"full","250,"))&&x(u,"src",a),1&e&&Z!==(Z=t[0].type+"")&&k(A,Z),1&e&&et!==(et=t[0].id+"")&&k(O,et),1&e&&lt!==(lt=t[0].title+"")&&k(j,lt),t[0].is_public?it||(it=ot(),it.c(),it.m(_,null)):it&&(it.d(1),it=null),1&e&&C!==(C=t[0].url)&&x(_,"href",C),1&e&&st!==(st=t[0].user+"")&&k(z,st),1&e&&ct!==(ct=t[0].updated_at+"")&&k(V,ct),0!==t[0].buttons.length?ut?ut.p(t,e):(ut=rt(t),ut.c(),ut.m(w,null)):ut&&(ut.d(1),ut=null),at.p(t,e),bt!==(bt=gt(t))&&($t.d(1),$t=bt(t),$t&&($t.c(),$t.m(q,null))),2&e&&J!==(J="button "+(t[1]?"is-inverted":""))&&x(D,"class",J),1&e){let n;for(yt=Object.entries(t[0].metadata),n=0;n<yt.length;n+=1){const l=nt(t,yt,n);vt[n]?vt[n].p(l,e):(vt[n]=ht(l),vt[n].c(),vt[n].m(G,null))}for(;n<vt.length;n+=1)vt[n].d(1);vt.length=yt.length}},i:t,o:t,d(t){t&&m(n),it&&it.d(),ut&&ut.d(),at.d(),$t.d(),p(vt,t),K=!1,W()}}}function bt(t,e,n){let l,o;const{isSelected:r}=et;a(t,r,(t=>n(3,o=t)));let{item:s}=e;return t.$$set=t=>{"item"in t&&n(0,s=t.item)},t.$$.update=()=>{9&t.$$.dirty&&n(1,l=o(s))},[s,l,r,o,()=>et.toggle(s)]}class $t extends Y{constructor(t){super(),X(this,t,bt,gt,r,{item:0})}}function yt(e){let n,l,o,r,s,c,i,u,a,p="en"===Q?"Selection":"Sélection";return{c(){n=h("div"),l=h("button"),o=h("span"),r=h("i"),s=$(),c=b(p),i=b("\n            ("),u=b(e[0]),a=b(")"),x(r,"class","fa-solid fa-book-bookmark"),x(o,"id","btn-content"),x(l,"id","set-btn"),x(l,"class","button px-5 py-4 is-link js-modal-trigger svelte-hs48f9"),x(l,"data-target","selection-modal"),x(n,"class","set-container svelte-hs48f9")},m(t,e){f(t,n,e),d(n,l),d(l,o),d(o,r),d(o,s),d(o,c),d(o,i),d(o,u),d(o,a)},p(t,[e]){1&e&&k(u,t[0])},i:t,o:t,d(t){t&&m(n)}}}function vt(t,e,n){let{selectionLength:l=0}=e,o=l;return t.$$set=t=>{"selectionLength"in t&&n(0,l=t.selectionLength)},t.$$.update=()=>{if(3&t.$$.dirty&&l!==o){const t=l>o;n(1,o=l);const e=document.getElementById("btn-content");e&&e.animate([{transform:t?"translateY(-7px)":"translateX(-5px)"},{transform:t?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[l,o]}class xt extends Y{constructor(t){super(),X(this,t,vt,yt,r,{selectionLength:0})}}function kt(e){let n,o,r,s,c,i,u,a,p,g,y="en"===Q?"Save selection":"Sauvegarder la sélection";return{c(){n=h("footer"),o=h("div"),r=h("button"),r.textContent=""+("en"===Q?"Clear selection":"Vider la sélection"),s=$(),c=h("button"),i=h("i"),u=$(),a=b(y),x(r,"class","button is-link is-light"),x(i,"class","fa-solid fa-floppy-disk"),x(c,"class","button is-link"),x(o,"class","buttons"),x(n,"class","modal-card-foot is-center")},m(t,l){f(t,n,l),d(n,o),d(o,r),d(o,s),d(o,c),d(c,i),d(c,u),d(c,a),p||(g=[v(r,"click",e[1]),v(c,"click",e[2])],p=!0)},p:t,i:t,o:t,d(t){t&&m(n),p=!1,l(g)}}}function wt(t,e,n){let{isRegion:l=!0}=e;return t.$$set=t=>{"isRegion"in t&&n(0,l=t.isRegion)},[l,()=>et.empty(l),()=>et.save()]}class _t extends Y{constructor(t){super(),X(this,t,wt,kt,r,{isRegion:0})}}function St(t,e,n){const l=t.slice();return l[8]=e[n][0],l[9]=e[n][1],l}function At(t,e,n){const l=t.slice();return l[12]=e[n][0],l[13]=e[n][1],l}function Et(t,e,n){const l=t.slice();return l[16]=e[n],l}function Ot(t){let e,n,o=[],r=new Map,s=t[0];const c=t=>t[16].id;for(let e=0;e<s.length;e+=1){let n=Et(t,s,e),l=c(n);r.set(l,o[e]=jt(l,n))}let i=null;return s.length||(i=Lt()),{c(){e=h("div");for(let t=0;t<o.length;t+=1)o[t].c();i&&i.c()},m(t,l){f(t,e,l);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);i&&i.m(e,null),n=!0},p(t,n){1&n&&(s=t[0],M(),o=function(t,e,n,o,r,s,c,i,u,a,d,f){let m=t.length,p=s.length,h=m;const g={};for(;h--;)g[t[h].key]=h;const b=[],$=new Map,y=new Map,v=[];for(h=p;h--;){const t=f(r,s,h),l=n(t);let i=c.get(l);i?o&&v.push((()=>i.p(t,e))):(i=a(l,t),i.c()),$.set(l,b[h]=i),l in g&&y.set(l,Math.abs(h-g[l]))}const x=new Set,k=new Set;function w(t){T(t,1),t.m(i,d),c.set(t.key,t),d=t.first,p--}for(;m&&p;){const e=b[p-1],n=t[m-1],l=e.key,o=n.key;e===n?(d=e.first,m--,p--):$.has(o)?!c.has(l)||x.has(l)?w(e):k.has(o)?m--:y.get(l)>y.get(o)?(k.add(l),w(e)):(x.add(o),m--):(u(n,c),m--)}for(;m--;){const e=t[m];$.has(e.key)||u(e,c)}for(;p;)w(b[p-1]);return l(v),b}(o,n,c,1,t,s,r,e,H,jt,null,Et),V(),!s.length&&i?i.p(t,n):s.length?i&&(i.d(1),i=null):(i=Lt(),i.c(),i.m(e,null)))},i(t){if(!n){for(let t=0;t<s.length;t+=1)T(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)B(o[t]);n=!1},d(t){t&&m(e);for(let t=0;t<o.length;t+=1)o[t].d();i&&i.d()}}}function Lt(e){let n;return{c(){n=h("p"),n.textContent=""+("en"===Q?"No records found":"Aucun document trouvé")},m(t,e){f(t,n,e)},p:t,d(t){t&&m(n)}}}function jt(t,e){let n,l,o;return l=new $t({props:{item:e[16]}}),{key:t,first:null,c(){n=y(),D(l.$$.fragment),this.first=n},m(t,e){f(t,n,e),U(l,t,e),o=!0},p(t,n){e=t;const o={};1&n&&(o.item=e[16]),l.$set(o)},i(t){o||(T(l.$$.fragment,t),o=!0)},o(t){B(l.$$.fragment,t),o=!1},d(t){t&&m(n),q(l,t)}}}function Nt(e){let n,l,o;return{c(){n=h("tr"),l=h("td"),l.textContent=""+("en"===Q?"No documents in selection":"Aucun document sélectionné"),o=$()},m(t,e){f(t,n,e),d(n,l),d(n,o)},p:t,d(t){t&&m(n)}}}function Ct(e){let n,l,o;return{c(){n=h("tr"),l=h("td"),l.textContent=""+("en"===Q?"No documents in selection":"Aucun document sélectionné"),o=$()},m(t,e){f(t,n,e),d(n,l),d(n,o)},p:t,d(t){t&&m(n)}}}function Rt(t){let e,n,l,o,r,s,c,i,u,a,p,g,y,w,_,S,A=t[12]+"",E=t[13].title+"";function O(){return t[7](t[12],t[8])}return{c(){e=h("tr"),n=h("th"),l=h("span"),o=b("#"),r=b(A),s=$(),c=h("td"),i=h("a"),u=b(E),p=$(),g=h("td"),y=h("button"),w=$(),x(l,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),x(n,"class","is-narrow is-3"),x(i,"href",a=t[13].url),x(i,"target","_blank"),x(y,"class","delete"),x(y,"aria-label","close"),x(g,"class","is-narrow")},m(t,a){f(t,e,a),d(e,n),d(n,l),d(l,o),d(l,r),d(e,s),d(e,c),d(c,i),d(i,u),d(e,p),d(e,g),d(g,y),d(e,w),_||(S=v(y,"click",O),_=!0)},p(e,n){t=e,4&n&&A!==(A=t[12]+"")&&k(r,A),4&n&&E!==(E=t[13].title+"")&&k(u,E),4&n&&a!==(a=t[13].url)&&x(i,"href",a)},d(t){t&&m(e),_=!1,S()}}}function Pt(t){let e,n,l,o,r,s,c=t[8]+"",i=Object.entries(t[9]),u=[];for(let e=0;e<i.length;e+=1)u[e]=Rt(At(t,i,e));let a=null;return i.length||(a=Ct()),{c(){e=h("h3"),n=b(c),l=$(),o=h("table"),r=h("tbody");for(let t=0;t<u.length;t+=1)u[t].c();a&&a.c(),s=$(),x(o,"class","table pl-2 is-fullwidth")},m(t,c){f(t,e,c),d(e,n),f(t,l,c),f(t,o,c),d(o,r);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(r,null);a&&a.m(r,null),d(o,s)},p(t,e){if(4&e&&c!==(c=t[8]+"")&&k(n,c),4&e){let n;for(i=Object.entries(t[9]),n=0;n<i.length;n+=1){const l=At(t,i,n);u[n]?u[n].p(l,e):(u[n]=Rt(l),u[n].c(),u[n].m(r,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=i.length,!i.length&&a?a.p(t,e):i.length?a&&(a.d(1),a=null):(a=Ct(),a.c(),a.m(r,null))}},d(t){t&&m(e),t&&m(l),t&&m(o),p(u,t),a&&a.d()}}}function zt(t){let e,n,l,o,r,s,c,i,u,a,g,y,v,w,_,S,A,E,O,L,j,N,C="en"===Q?"Selected documents":"Documents sélectionnés";e=new xt({props:{selectionLength:t[1]}});let R=0!==t[0].length&&Ot(t),P=t[2],z=[];for(let e=0;e<P.length;e+=1)z[e]=Pt(St(t,P,e));let I=null;return P.length||(I=Nt()),j=new _t({props:{isRegion:!1}}),{c(){D(e.$$.fragment),n=$(),R&&R.c(),l=$(),o=h("div"),r=h("div"),s=$(),c=h("div"),i=h("div"),u=h("div"),a=h("i"),g=$(),y=b(C),v=b("\n                ("),w=b(t[1]),_=b(")"),S=$(),A=h("button"),E=$(),O=h("section");for(let t=0;t<z.length;t+=1)z[t].c();I&&I.c(),L=$(),D(j.$$.fragment),x(r,"class","modal-background"),x(a,"class","fa-solid fa-book-bookmark"),x(u,"class","title is-4 mb-0 media-content"),x(A,"class","delete media-left"),x(A,"aria-label","close"),x(i,"class","modal-card-head media mb-0"),x(O,"class","modal-card-body"),x(c,"class","modal-content"),x(o,"id","selection-modal"),x(o,"class","modal fade"),x(o,"tabindex","-1"),x(o,"aria-labelledby","selection-modal-label"),x(o,"aria-hidden","true")},m(t,m){U(e,t,m),f(t,n,m),R&&R.m(t,m),f(t,l,m),f(t,o,m),d(o,r),d(o,s),d(o,c),d(c,i),d(i,u),d(u,a),d(u,g),d(u,y),d(u,v),d(u,w),d(u,_),d(i,S),d(i,A),d(c,E),d(c,O);for(let t=0;t<z.length;t+=1)z[t]&&z[t].m(O,null);I&&I.m(O,null),d(c,L),U(j,c,null),N=!0},p(t,[n]){const o={};if(2&n&&(o.selectionLength=t[1]),e.$set(o),0!==t[0].length?R?(R.p(t,n),1&n&&T(R,1)):(R=Ot(t),R.c(),T(R,1),R.m(l.parentNode,l)):R&&(M(),B(R,1,1,(()=>{R=null})),V()),(!N||2&n)&&k(w,t[1]),4&n){let e;for(P=t[2],e=0;e<P.length;e+=1){const l=St(t,P,e);z[e]?z[e].p(l,n):(z[e]=Pt(l),z[e].c(),z[e].m(O,null))}for(;e<z.length;e+=1)z[e].d(1);z.length=P.length,!P.length&&I?I.p(t,n):P.length?I&&(I.d(1),I=null):(I=Nt(),I.c(),I.m(O,null))}},i(t){N||(T(e.$$.fragment,t),T(R),T(j.$$.fragment,t),N=!0)},o(t){B(e.$$.fragment,t),B(R),B(j.$$.fragment,t),N=!1},d(t){q(e,t),t&&m(n),R&&R.d(t),t&&m(l),t&&m(o),p(z,t),I&&I.d(),q(j)}}}function It(t,e,n){let l,o,r,s;const{selected:c,nbSelected:i}=et;a(t,c,(t=>n(6,s=t))),a(t,i,(t=>n(5,r=t)));let{records:u=[]}=e;return t.$$set=t=>{"records"in t&&n(0,u=t.records)},t.$$.update=()=>{64&t.$$.dirty&&n(2,l=s(!1)),32&t.$$.dirty&&n(1,o=r(!1))},[u,o,l,c,i,r,s,(t,e)=>et.remove(t,e)]}const Mt=(Vt="record-data",document.getElementById(Vt)?JSON.parse(document.getElementById(Vt).textContent):[]);var Vt;return new class extends Y{constructor(t){super(),X(this,t,It,zt,r,{records:0})}}({target:document.getElementById("record-list"),props:{records:Mt}})}();
//# sourceMappingURL=recordList.js.map
