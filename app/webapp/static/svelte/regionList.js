var regionList=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c,s;function r(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function a(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function h(){return m(" ")}function $(){return m("")}function v(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function k(e,t){t=""+t,e.data!==t&&(e.data=t)}function y(e,t,n){e.classList[n?"add":"remove"](t)}function x(e){s=e}function w(){const e=function(){if(!s)throw new Error("Function called outside component initialization");return s}();return(t,n,{cancelable:l=!1}={})=>{const o=e.$$.callbacks[t];if(o){const i=function(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,l,t),o}(t,n,{cancelable:l});return o.slice().forEach((t=>{t.call(e,i)})),!i.defaultPrevented}return!0}}const L=[],S=[];let A=[];const C=[],_=Promise.resolve();let O=!1;function E(e){A.push(e)}const N=new Set;let V=0;function j(){if(0!==V)return;const e=s;do{try{for(;V<L.length;){const e=L[V];V++,x(e),T(e.$$)}}catch(e){throw L.length=0,V=0,e}for(x(null),L.length=0,V=0;S.length;)S.pop()();for(let e=0;e<A.length;e+=1){const t=A[e];N.has(t)||(N.add(t),t())}A.length=0}while(L.length);for(;C.length;)C.pop()();O=!1,N.clear(),x(e)}function T(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(E)}}const H=new Set;let I;function M(){I={r:0,c:[],p:I}}function P(){I.r||l(I.c),I=I.p}function z(e,t){e&&e.i&&(H.delete(e),e.i(t))}function R(e,t,n,l){if(e&&e.o){if(H.has(e))return;H.add(e),I.c.push((()=>{H.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}else l&&l()}function D(e,t){R(e,1,1,(()=>{t.delete(e.key)}))}function B(e,t,n,o,i,c,s,r,a,u,d,f){let g=e.length,p=c.length,m=g;const h={};for(;m--;)h[e[m].key]=m;const $=[],v=new Map,b=new Map,k=[];for(m=p;m--;){const e=f(i,c,m),l=n(e);let r=s.get(l);r?o&&k.push((()=>r.p(e,t))):(r=u(l,e),r.c()),v.set(l,$[m]=r),l in h&&b.set(l,Math.abs(m-h[l]))}const y=new Set,x=new Set;function w(e){z(e,1),e.m(r,d),s.set(e.key,e),d=e.first,p--}for(;g&&p;){const t=$[p-1],n=e[g-1],l=t.key,o=n.key;t===n?(d=t.first,g--,p--):v.has(o)?!s.has(l)||y.has(l)?w(t):x.has(o)?g--:b.get(l)>b.get(o)?(x.add(l),w(t)):(y.add(o),g--):(a(n,s),g--)}for(;g--;){const t=e[g];v.has(t.key)||a(t,s)}for(;p;)w($[p-1]);return l(k),$}function q(e){e&&e.c()}function G(e,n,i,c){const{fragment:s,after_update:r}=e.$$;s&&s.m(n,i),c||E((()=>{const n=e.$$.on_mount.map(t).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...n):l(n),e.$$.on_mount=[]})),r.forEach(E)}function J(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];A.forEach((l=>-1===e.indexOf(l)?t.push(l):n.push(l))),n.forEach((e=>e())),A=t}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function U(e,t){-1===e.$$.dirty[0]&&(L.push(e),O||(O=!0,_.then(j)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function F(t,o,i,c,r,a,u,f=[-1]){const g=s;x(t);const p=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(g?g.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||g.$$.root};u&&u(p.root);let m=!1;if(p.ctx=i?i(t,o.props||{},((e,n,...l)=>{const o=l.length?l[0]:n;return p.ctx&&r(p.ctx[e],p.ctx[e]=o)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](o),m&&U(t,e)),n})):[],p.update(),m=!0,l(p.before_update),p.fragment=!!c&&c(p.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);p.fragment&&p.fragment.l(e),e.forEach(d)}else p.fragment&&p.fragment.c();o.intro&&z(t.$$.fragment),G(t,o.target,o.anchor,o.customElement),j()}x(g)}class K{$destroy(){J(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Q(e=null,t="full",n="full"){if(!e)return"https://via.placeholder.com/96x96?text=No+Image";if((e=e.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const l=e[e.length-1].includes(",")?e.pop().replace(".jpg",""):t,o=e.join("_").replace(".jpg","");return`${CANTALOUPE_APP_URL??"http://localhost:8182"}/iiif/2/${o}.jpg/${l}/${n}/0/default.jpg`}function W(e=null,t=1){return`${SAS_APP_URL??"http://localhost:3000"}/index.html?iiif-content=${e}&canvas=${t}`}function X(e){let t;return{c(){t=p("path"),b(t,"d","M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"),b(t,"class","svelte-g56uoi")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function Y(e){let t;return{c(){t=p("path"),b(t,"d","M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"),b(t,"class","svelte-g56uoi")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function Z(e){let t,n="en"===e[3]?"Copy ID":"Copier l'ID";return{c(){t=m(n)},m(e,n){u(e,t,n)},p(e,l){8&l&&n!==(n="en"===e[3]?"Copy ID":"Copier l'ID")&&k(t,n)},d(e){e&&d(t)}}}function ee(e){let t,n="en"===e[3]?"Copied!":"Copié !";return{c(){t=m(n)},m(e,n){u(e,t,n)},p(e,l){8&l&&n!==(n="en"===e[3]?"Copied!":"Copié !")&&k(t,n)},d(e){e&&d(t)}}}function te(t){let n,o,i,c,s,f,$,y,x,w,L,S,A,C,_,O,E=t[0].title+"";function N(e,t){return e[2]?Y:X}let V=N(t),j=V(t);function T(e,t){return e[2]?ee:Z}let H=T(t),I=H(t);return{c(){n=g("div"),o=g("figure"),i=g("img"),s=h(),f=g("div"),$=g("span"),y=m(E),x=h(),w=g("button"),L=p("svg"),j.c(),S=h(),A=g("span"),I.c(),r(i.src,c=Q(t[0].img,t[0].xyhw,"96,"))||b(i,"src",c),b(i,"alt","Extracted region"),b($,"class","overlay-desc"),b(f,"class","overlay is-center svelte-g56uoi"),b(o,"class","image is-96x96 card svelte-g56uoi"),b(o,"tabindex","-1"),b(L,"xmlns","http://www.w3.org/2000/svg"),b(L,"viewBox","0 0 384 512"),b(L,"class","svelte-g56uoi"),b(A,"class","tooltip svelte-g56uoi"),b(w,"class","button region-btn tag svelte-g56uoi"),b(n,"class",C="region image is-96x96 "+(t[1]?"checked":"")+" svelte-g56uoi")},m(e,l){u(e,n,l),a(n,o),a(o,i),a(o,s),a(o,f),a(f,$),a($,y),a(n,x),a(n,w),a(w,L),j.m(L,null),a(w,S),a(w,A),I.m(A,null),_||(O=[v(o,"click",t[6]),v(o,"keyup",ne),v(w,"click",t[7])],_=!0)},p(e,[t]){1&t&&!r(i.src,c=Q(e[0].img,e[0].xyhw,"96,"))&&b(i,"src",c),1&t&&E!==(E=e[0].title+"")&&k(y,E),V!==(V=N(e))&&(j.d(1),j=V(e),j&&(j.c(),j.m(L,null))),H===(H=T(e))&&I?I.p(e,t):(I.d(1),I=H(e),I&&(I.c(),I.m(A,null))),2&t&&C!==(C="region image is-96x96 "+(e[1]?"checked":"")+" svelte-g56uoi")&&b(n,"class",C)},i:e,o:e,d(e){e&&d(n),j.d(),I.d(),_=!1,l(O)}}}const ne=()=>null;function le(e,t,n){const l=w();let{block:o}=t,{isSelected:i=!1}=t,{isCopied:c=!1}=t,{appLang:s="en"}=t;function r(){l("toggleSelection",{block:o})}function a(){l("copyId",{block:o})}return e.$$set=e=>{"block"in e&&n(0,o=e.block),"isSelected"in e&&n(1,i=e.isSelected),"isCopied"in e&&n(2,c=e.isCopied),"appLang"in e&&n(3,s=e.appLang)},[o,i,c,s,r,a,()=>r(),()=>a()]}class oe extends K{constructor(e){super(),F(this,e,le,te,i,{block:0,isSelected:1,isCopied:2,appLang:3})}}function ie(e){localStorage.setItem("documentSet",JSON.stringify(e))}function ce(t){let n,l,o,i,c,s,r,f,p,$,v="en"===t[3]?"Selection":"Sélection";return{c(){n=g("div"),l=g("button"),o=g("span"),i=g("i"),c=h(),s=m(v),r=m("\n            ("),f=g("span"),p=m(t[2]),$=m(")"),b(i,"class","fa-solid fa-book-bookmark"),b(f,"id","selection-count"),b(f,"class","svelte-1ifntk3"),b(o,"class","svelte-1ifntk3"),b(l,"id","set-btn"),b(l,"class","button px-5 py-4 is-link js-modal-trigger svelte-1ifntk3"),b(l,"data-target","selection-modal"),y(l,"add-animation",t[0]),y(l,"remove-animation",t[1]),b(n,"class","set-container svelte-1ifntk3")},m(e,t){u(e,n,t),a(n,l),a(l,o),a(o,i),a(o,c),a(o,s),a(o,r),a(o,f),a(f,p),a(o,$)},p(e,[t]){8&t&&v!==(v="en"===e[3]?"Selection":"Sélection")&&k(s,v),4&t&&k(p,e[2]),1&t&&y(l,"add-animation",e[0]),2&t&&y(l,"remove-animation",e[1])},i:e,o:e,d(e){e&&d(n)}}}function se(e,t,n){let{addAnimation:l=!1}=t,{removeAnimation:o=!1}=t,{selectionLength:i=0}=t,{appLang:c="en"}=t;return e.$$set=e=>{"addAnimation"in e&&n(0,l=e.addAnimation),"removeAnimation"in e&&n(1,o=e.removeAnimation),"selectionLength"in e&&n(2,i=e.selectionLength),"appLang"in e&&n(3,c=e.appLang)},[l,o,i,c]}class re extends K{constructor(e){super(),F(this,e,se,ce,i,{addAnimation:0,removeAnimation:1,selectionLength:2,appLang:3})}}function ae(t){let n,o,i,c,s,r,f,p,$,y,x,w="en"===t[0]?"Clear selection":"Vider la sélection",L="en"===t[0]?"Save selection":"Sauvegarder la sélection";return{c(){n=g("footer"),o=g("div"),i=g("button"),c=m(w),s=h(),r=g("button"),f=g("i"),p=h(),$=m(L),b(i,"class","button is-link is-light"),b(f,"class","fa-solid fa-floppy-disk"),b(r,"class","button is-link"),b(o,"class","buttons"),b(n,"class","modal-card-foot is-centered")},m(e,l){u(e,n,l),a(n,o),a(o,i),a(i,c),a(o,s),a(o,r),a(r,f),a(r,p),a(r,$),y||(x=[v(i,"click",t[2]),v(r,"click",t[3])],y=!0)},p(e,[t]){1&t&&w!==(w="en"===e[0]?"Clear selection":"Vider la sélection")&&k(c,w),1&t&&L!==(L="en"===e[0]?"Save selection":"Sauvegarder la sélection")&&k($,L)},i:e,o:e,d(e){e&&d(n),y=!1,l(x)}}}function ue(e,t,n){const l=w();function o(e="save"){l("commitSelection",{updateType:e})}let{appLang:i="en"}=t;return e.$$set=e=>{"appLang"in e&&n(0,i=e.appLang)},[i,o,()=>o("clear"),()=>o("save")]}class de extends K{constructor(e){super(),F(this,e,ue,ae,i,{appLang:0})}}function fe(e,t,n){const l=e.slice();return l[23]=t[n][0],l[24]=t[n][1],l}function ge(e,t,n){const l=e.slice();return l[30]=t[n][0],l[31]=t[n][1],l}function pe(e,t,n){const l=e.slice();return l[27]=t[n],l}function me(e,t,n){const l=e.slice();return l[27]=t[n],l}function he(e,t,n){const l=e.slice();return l[36]=t[n][0],l[24]=t[n][1],l}function $e(e){let t;return{c(){t=p("path"),b(t,"d","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"),b(t,"class","svelte-1crckuu")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function ve(e){let t;return{c(){t=p("path"),b(t,"d","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"),b(t,"class","svelte-1crckuu")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function be(e){let t,n="en"===e[2]?"Edit":"Modifier";return{c(){t=m(n)},m(e,n){u(e,t,n)},p(e,l){4&l[0]&&n!==(n="en"===e[2]?"Edit":"Modifier")&&k(t,n)},d(e){e&&d(t)}}}function ke(e){let t,n="en"===e[2]?"Validate":"Valider";return{c(){t=m(n)},m(e,n){u(e,t,n)},p(e,l){4&l[0]&&n!==(n="en"===e[2]?"Validate":"Valider")&&k(t,n)},d(e){e&&d(t)}}}function ye(e){let t,n,l,o,i,c,s,r,f,p,$,v,y,x,w,L="en"===e[2]?"Reload":"Recharger",S="en"===e[2]?"Go to editor":"Aller à l'éditeur",A="en"===e[2]?"Delete selected regions":"Supprimer les regions selectionnées";return{c(){t=g("button"),n=g("i"),l=h(),o=m(L),i=h(),c=g("a"),s=g("i"),r=h(),f=m(S),$=h(),v=g("button"),y=g("i"),x=h(),w=m(A),b(n,"class","fa-solid fa-rotate-right"),b(t,"class","tag is-link is-light is-rounded mr-3"),b(s,"class","fa-solid fa-edit"),b(c,"class","tag is-link is-rounded mr-3"),b(c,"href",p=W(e[3])),b(c,"target","_blank"),b(y,"class","fa-solid fa-trash"),b(v,"class","tag is-danger is-rounded")},m(e,d){u(e,t,d),a(t,n),a(t,l),a(t,o),u(e,i,d),u(e,c,d),a(c,s),a(c,r),a(c,f),u(e,$,d),u(e,v,d),a(v,y),a(v,x),a(v,w)},p(e,t){4&t[0]&&L!==(L="en"===e[2]?"Reload":"Recharger")&&k(o,L),4&t[0]&&S!==(S="en"===e[2]?"Go to editor":"Aller à l'éditeur")&&k(f,S),8&t[0]&&p!==(p=W(e[3]))&&b(c,"href",p),4&t[0]&&A!==(A="en"===e[2]?"Delete selected regions":"Supprimer les regions selectionnées")&&k(w,A)},d(e){e&&d(t),e&&d(i),e&&d(c),e&&d($),e&&d(v)}}}function xe(e){let t,n,o,i,c,s,r=e[24].text+"";function f(){return e[20](e[36])}return{c(){t=g("li"),n=g("a"),o=m(r),i=h(),y(t,"is-active",e[36]===e[8])},m(e,l){u(e,t,l),a(t,n),a(n,o),a(t,i),c||(s=[v(t,"click",f),v(t,"keyup",Me)],c=!0)},p(n,l){e=n,131328&l[0]&&y(t,"is-active",e[36]===e[8])},d(e){e&&d(t),c=!1,l(s)}}}function we(t){let n;return{c(){n=g("div"),n.textContent="tout doux"},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&d(n)}}}function Le(e){let t,n,l,o=Object.entries(e[1]),i=[];for(let t=0;t<o.length;t+=1)i[t]=_e(ge(e,o,t));const c=e=>R(i[e],1,1,(()=>{i[e]=null}));let s=null;return o.length||(s=Ae()),{c(){t=g("table"),n=g("tbody");for(let e=0;e<i.length;e+=1)i[e].c();s&&s.c(),b(t,"class","table")},m(e,o){u(e,t,o),a(t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(n,null);s&&s.m(n,null),l=!0},p(e,t){if(99854&t[0]){let l;for(o=Object.entries(e[1]),l=0;l<o.length;l+=1){const c=ge(e,o,l);i[l]?(i[l].p(c,t),z(i[l],1)):(i[l]=_e(c),i[l].c(),z(i[l],1),i[l].m(n,null))}for(M(),l=o.length;l<i.length;l+=1)c(l);P(),!o.length&&s?s.p(e,t):o.length?s&&(s.d(1),s=null):(s=Ae(),s.c(),s.m(n,null))}},i(e){if(!l){for(let e=0;e<o.length;e+=1)z(i[e]);l=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)R(i[e]);l=!1},d(e){e&&d(t),f(i,e),s&&s.d()}}}function Se(e){let t,n,l,o=[],i=new Map,c=Object.values(e[1]).flat(1);const s=e=>e[27].id;for(let t=0;t<c.length;t+=1){let n=me(e,c,t),l=s(n);i.set(l,o[t]=Ee(l,n))}let r=null;return c.length||(r=Oe()),{c(){t=g("div"),n=g("div");for(let e=0;e<o.length;e+=1)o[e].c();r&&r.c(),b(n,"class","grid is-gap-2"),b(t,"class","fixed-grid has-auto-count")},m(e,i){u(e,t,i),a(t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(n,null);r&&r.m(n,null),l=!0},p(e,t){99846&t[0]&&(c=Object.values(e[1]).flat(1),M(),o=B(o,t,s,1,e,c,i,n,D,Ee,null,me),P(),c.length?r&&(r.d(1),r=null):r||(r=Oe(),r.c(),r.m(n,null)))},i(e){if(!l){for(let e=0;e<c.length;e+=1)z(o[e]);l=!0}},o(e){for(let e=0;e<o.length;e+=1)R(o[e]);l=!1},d(e){e&&d(t);for(let e=0;e<o.length;e+=1)o[e].d();r&&r.d()}}}function Ae(t){let n,l;return{c(){n=g("tr"),n.textContent="NO ANNOTATION",l=h()},m(e,t){u(e,n,t),u(e,l,t)},p:e,d(e){e&&d(n),e&&d(l)}}}function Ce(e,t){let n,l,o;return l=new oe({props:{block:t[27],appLang:t[2],isSelected:t[10](t[27]),isCopied:t[9](t[27])}}),l.$on("toggleSelection",t[15]),l.$on("copyId",t[16]),{key:e,first:null,c(){n=$(),q(l.$$.fragment),this.first=n},m(e,t){u(e,n,t),G(l,e,t),o=!0},p(e,n){t=e;const o={};2&n[0]&&(o.block=t[27]),4&n[0]&&(o.appLang=t[2]),1026&n[0]&&(o.isSelected=t[10](t[27])),514&n[0]&&(o.isCopied=t[9](t[27])),l.$set(o)},i(e){o||(z(l.$$.fragment,e),o=!0)},o(e){R(l.$$.fragment,e),o=!1},d(e){e&&d(n),J(l,e)}}}function _e(e){let t,n,l,o,i,c,s,f,p,$,v,y,x,w,L,S,A,C,_=e[30]+"",O=[],E=new Map,N=e[31];const V=e=>e[27].id;for(let t=0;t<N.length;t+=1){let n=pe(e,N,t),l=V(n);E.set(l,O[t]=Ce(l,n))}return{c(){t=g("tr"),n=g("th"),l=g("img"),c=h(),s=g("div"),f=g("a"),p=g("i"),$=m("\n                                Page "),v=m(_),x=h(),w=g("td"),L=g("div"),S=g("div");for(let e=0;e<O.length;e+=1)O[e].c();A=h(),r(l.src,o=Q(e[31][0].img,"full","250,"))||b(l,"src",o),b(l,"alt",i="Canvas "+e[30]),b(l,"class","mb-3"),b(p,"class","fa-solid fa-pen-to-square"),b(f,"class","tag px-2 py-1 is-rounded"),b(f,"href",y=W(e[3],e[30])),b(s,"class","is-center mb-1 svelte-1crckuu"),b(n,"class","is-3 is-dark center-flex svelte-1crckuu"),b(S,"class","grid is-gap-2"),b(L,"class","fixed-grid has-auto-count"),b(w,"class","is-fullwidth")},m(e,o){u(e,t,o),a(t,n),a(n,l),a(n,c),a(n,s),a(s,f),a(f,p),a(f,$),a(f,v),a(t,x),a(t,w),a(w,L),a(L,S);for(let e=0;e<O.length;e+=1)O[e]&&O[e].m(S,null);a(t,A),C=!0},p(e,t){(!C||2&t[0]&&!r(l.src,o=Q(e[31][0].img,"full","250,")))&&b(l,"src",o),(!C||2&t[0]&&i!==(i="Canvas "+e[30]))&&b(l,"alt",i),(!C||2&t[0])&&_!==(_=e[30]+"")&&k(v,_),(!C||10&t[0]&&y!==(y=W(e[3],e[30])))&&b(f,"href",y),99846&t[0]&&(N=e[31],M(),O=B(O,t,V,1,e,N,E,S,D,Ce,null,pe),P())},i(e){if(!C){for(let e=0;e<N.length;e+=1)z(O[e]);C=!0}},o(e){for(let e=0;e<O.length;e+=1)R(O[e]);C=!1},d(e){e&&d(t);for(let e=0;e<O.length;e+=1)O[e].d()}}}function Oe(e){let t;return{c(){t=m("NO ANNOTATION")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function Ee(e,t){let n,l,o;return l=new oe({props:{block:t[27],appLang:t[2],isSelected:t[10](t[27]),isCopied:t[9](t[27])}}),l.$on("toggleSelection",t[15]),l.$on("copyId",t[16]),{key:e,first:null,c(){n=$(),q(l.$$.fragment),this.first=n},m(e,t){u(e,n,t),G(l,e,t),o=!0},p(e,n){t=e;const o={};2&n[0]&&(o.block=t[27]),4&n[0]&&(o.appLang=t[2]),1026&n[0]&&(o.isSelected=t[10](t[27])),514&n[0]&&(o.isCopied=t[9](t[27])),l.$set(o)},i(e){o||(z(l.$$.fragment,e),o=!0)},o(e){R(l.$$.fragment,e),o=!1},d(e){e&&d(n),J(l,e)}}}function Ne(e){let t,n,l="en"===e[2]?"No regions in selection":"Aucune région sélectionnée";return{c(){t=g("div"),n=m(l)},m(e,l){u(e,t,l),a(t,n)},p(e,t){4&t[0]&&l!==(l="en"===e[2]?"No regions in selection":"Aucune région sélectionnée")&&k(n,l)},d(e){e&&d(t)}}}function Ve(e){let t,n,l=Object.entries(e[4][e[0]]),o=[];for(let t=0;t<l.length;t+=1)o[t]=je(fe(e,l,t));return{c(){t=g("div"),n=g("div");for(let e=0;e<o.length;e+=1)o[e].c();b(n,"class","grid is-gap-2"),b(t,"class","fixed-grid has-6-cols")},m(e,l){u(e,t,l),a(t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(n,null)},p(e,t){if(16401&t[0]){let i;for(l=Object.entries(e[4][e[0]]),i=0;i<l.length;i+=1){const c=fe(e,l,i);o[i]?o[i].p(c,t):(o[i]=je(c),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=l.length}},d(e){e&&d(t),f(o,e)}}}function je(e){let t,n,l,o,i,c,s,f,p,$,y,x,w,L=e[24].title+"";function S(){return e[21](e[23])}return{c(){t=g("div"),n=g("figure"),l=g("img"),i=h(),c=g("div"),s=g("span"),f=m(L),p=h(),$=g("button"),y=h(),r(l.src,o=Q(e[24].img,e[24].xyhw,"96,"))||b(l,"src",o),b(l,"alt","Extracted region"),b(s,"class","overlay-desc"),b(c,"class","overlay is-center svelte-1crckuu"),b(n,"class","image is-64x64 card"),b($,"class","delete region-btn"),b($,"aria-label","remove from selection"),b(t,"class","selection cell svelte-1crckuu")},m(e,o){u(e,t,o),a(t,n),a(n,l),a(n,i),a(n,c),a(c,s),a(s,f),a(t,p),a(t,$),a(t,y),x||(w=v($,"click",S),x=!0)},p(t,n){e=t,16&n[0]&&!r(l.src,o=Q(e[24].img,e[24].xyhw,"96,"))&&b(l,"src",o),16&n[0]&&L!==(L=e[24].title+"")&&k(f,L)},d(e){e&&d(t),x=!1,w()}}}function Te(e){let t,n,o,i,c,s,r,$,y,x,w,L,S,A,C,_,O,E,N,V,j,T,H,I,D,B,U,F,K,Q,W,X,Y,Z,ee,te,ne,le,oe,ie,ce,se,ae,ue,fe,ge,pe,me,Ae,Ce="en"===e[2]?"Select all":"Tout sélectionner",_e="en"===e[2]?"Download":"Télecharger",Oe="en"===e[2]?"Selected regions":"Regions sélectionnées";function Ee(e,t){return e[7]?ve:$e}t=new re({props:{addAnimation:e[5],removeAnimation:e[6],selectionLength:e[12],appLang:e[2]}});let je=Ee(e),Te=je(e);function Me(e,t){return e[7]?ke:be}let Pe=Me(e),ze=Pe(e),Re=e[7]&&ye(e),De=Object.entries(e[17]),Be=[];for(let t=0;t<De.length;t+=1)Be[t]=xe(he(e,De,t));const qe=[Se,Le,we],Ge=[];function Je(e,t){return"all"===e[8]?0:"page"===e[8]?1:"similarity"===e[8]?2:-1}function Ue(e,t){return e[11]?Ve:Ne}~(D=Je(e))&&(B=Ge[D]=qe[D](e));let Fe=Ue(e),Ke=Fe(e);return ge=new de({props:{appLang:e[2]}}),ge.$on("commitSelection",e[13]),{c(){q(t.$$.fragment),n=h(),o=g("div"),i=g("div"),c=g("button"),s=p("svg"),Te.c(),r=h(),ze.c(),y=h(),x=g("button"),w=g("i"),L=h(),S=m(Ce),A=h(),C=g("button"),_=g("i"),O=h(),E=m(_e),N=h(),V=g("div"),Re&&Re.c(),j=h(),T=g("div"),H=g("ul");for(let e=0;e<Be.length;e+=1)Be[e].c();I=h(),B&&B.c(),U=h(),F=g("div"),K=g("div"),Q=h(),W=g("div"),X=g("div"),Y=g("div"),Z=g("i"),ee=h(),te=m(Oe),ne=m("\n                ("),le=g("span"),oe=m(e[12]),ie=m(")"),ce=h(),se=g("button"),ae=h(),ue=g("section"),Ke.c(),fe=h(),q(ge.$$.fragment),b(s,"xmlns","http://www.w3.org/2000/svg"),b(s,"viewBox","0 0 384 512"),b(s,"class","pr-3"),b(c,"class",$="button "+(e[7]?"is-success":"is-link")+" mr-3"),b(w,"class","fa-solid fa-square-check"),b(x,"class","button is-link is-light mr-3"),b(_,"class","fa-solid fa-download"),b(C,"class","button is-link is-light"),b(i,"class","svelte-1crckuu"),b(V,"class","edit-action svelte-1crckuu"),b(o,"class","is-left center-flex actions svelte-1crckuu"),b(H,"class","panel-tabs"),b(T,"class","tabs is-centered"),b(K,"class","modal-background"),b(Z,"class","fa-solid fa-book-bookmark"),b(le,"id","selection-count"),b(Y,"class","title is-4 mb-0 media-content"),b(se,"class","delete media-left"),b(se,"aria-label","close"),b(X,"class","modal-card-head media mb-0"),b(ue,"class","modal-card-body"),b(W,"class","modal-content"),b(F,"id","selection-modal"),b(F,"class","modal fade"),b(F,"tabindex","-1"),b(F,"aria-labelledby","selection-modal-label"),b(F,"aria-hidden","true")},m(l,d){G(t,l,d),u(l,n,d),u(l,o,d),a(o,i),a(i,c),a(c,s),Te.m(s,null),a(c,r),ze.m(c,null),a(i,y),a(i,x),a(x,w),a(x,L),a(x,S),a(i,A),a(i,C),a(C,_),a(C,O),a(C,E),a(o,N),a(o,V),Re&&Re.m(V,null),u(l,j,d),u(l,T,d),a(T,H);for(let e=0;e<Be.length;e+=1)Be[e]&&Be[e].m(H,null);u(l,I,d),~D&&Ge[D].m(l,d),u(l,U,d),u(l,F,d),a(F,K),a(F,Q),a(F,W),a(W,X),a(X,Y),a(Y,Z),a(Y,ee),a(Y,te),a(Y,ne),a(Y,le),a(le,oe),a(Y,ie),a(X,ce),a(X,se),a(W,ae),a(W,ue),Ke.m(ue,null),a(W,fe),G(ge,W,null),pe=!0,me||(Ae=[v(c,"click",e[19]),v(x,"click",He),v(C,"click",Ie)],me=!0)},p(e,n){const l={};if(32&n[0]&&(l.addAnimation=e[5]),64&n[0]&&(l.removeAnimation=e[6]),4096&n[0]&&(l.selectionLength=e[12]),4&n[0]&&(l.appLang=e[2]),t.$set(l),je!==(je=Ee(e))&&(Te.d(1),Te=je(e),Te&&(Te.c(),Te.m(s,null))),Pe===(Pe=Me(e))&&ze?ze.p(e,n):(ze.d(1),ze=Pe(e),ze&&(ze.c(),ze.m(c,null))),(!pe||128&n[0]&&$!==($="button "+(e[7]?"is-success":"is-link")+" mr-3"))&&b(c,"class",$),(!pe||4&n[0])&&Ce!==(Ce="en"===e[2]?"Select all":"Tout sélectionner")&&k(S,Ce),(!pe||4&n[0])&&_e!==(_e="en"===e[2]?"Download":"Télecharger")&&k(E,_e),e[7]?Re?Re.p(e,n):(Re=ye(e),Re.c(),Re.m(V,null)):Re&&(Re.d(1),Re=null),131328&n[0]){let t;for(De=Object.entries(e[17]),t=0;t<De.length;t+=1){const l=he(e,De,t);Be[t]?Be[t].p(l,n):(Be[t]=xe(l),Be[t].c(),Be[t].m(H,null))}for(;t<Be.length;t+=1)Be[t].d(1);Be.length=De.length}let o=D;D=Je(e),D===o?~D&&Ge[D].p(e,n):(B&&(M(),R(Ge[o],1,1,(()=>{Ge[o]=null})),P()),~D?(B=Ge[D],B?B.p(e,n):(B=Ge[D]=qe[D](e),B.c()),z(B,1),B.m(U.parentNode,U)):B=null),(!pe||4&n[0])&&Oe!==(Oe="en"===e[2]?"Selected regions":"Regions sélectionnées")&&k(te,Oe),(!pe||4096&n[0])&&k(oe,e[12]),Fe===(Fe=Ue(e))&&Ke?Ke.p(e,n):(Ke.d(1),Ke=Fe(e),Ke&&(Ke.c(),Ke.m(ue,null)));const i={};4&n[0]&&(i.appLang=e[2]),ge.$set(i)},i(e){pe||(z(t.$$.fragment,e),z(B),z(ge.$$.fragment,e),pe=!0)},o(e){R(t.$$.fragment,e),R(B),R(ge.$$.fragment,e),pe=!1},d(e){J(t,e),e&&d(n),e&&d(o),Te.d(),ze.d(),Re&&Re.d(),e&&d(j),e&&d(T),f(Be,e),e&&d(I),~D&&Ge[D].d(e),e&&d(U),e&&d(F),Ke.d(),J(ge),me=!1,l(Ae)}}}const He=()=>null,Ie=()=>null,Me=()=>null;function Pe(e,t,n){let l,o,i,c,s,r,a,u=!1,d=!1;const f="Regions";let{regions:g={}}=t,{appLang:p="en"}=t,{manifest:m=""}=t,h=JSON.parse(localStorage.getItem("documentSet"))??{};function $(e){n(4,h=function(e,t,n){const{[t]:l,...o}=e[n];return e[n]=o,ie(e),e}(h,e,f)),n(6,d=!0),setTimeout((()=>n(6,d=!1)),300)}function v(e){n(4,h=function(e,t){return e.hasOwnProperty(t.type)||(e[t.type]=[]),e[t.type]={...e[t.type],[t.id]:t},ie(e),e}(h,e)),n(5,u=!0),setTimeout((()=>n(5,u=!1)),300)}const b={all:{text:"en"===p?"All regions":"Toutes les régions"},page:{text:"en"===p?"Per page":"Par page"},similarity:{text:"en"===p?"Similarity":"Similarité"}};return e.$$set=e=>{"regions"in e&&n(1,g=e.regions),"appLang"in e&&n(2,p=e.appLang),"manifest"in e&&n(3,m=e.manifest)},e.$$.update=()=>{16&e.$$.dirty[0]&&n(12,l=h.hasOwnProperty(f)?Object.keys(h[f]).length:0),16&e.$$.dirty[0]&&n(10,o=e=>h[f]?.hasOwnProperty(e.id)),16&e.$$.dirty[0]&&n(11,i=Object.keys(h[f]??{}).length>0),2&e.$$.dirty[0]&&console.log(g),262144&e.$$.dirty[0]&&n(9,s=e=>c===e.id)},n(18,c=""),n(8,r="all"),n(7,a=!1),[f,g,p,m,h,u,d,a,r,s,o,i,l,function(e){const{updateType:t}=e.detail;"clear"===t?n(4,h=function(e,t){return t.map((t=>!e.hasOwnProperty(t)||delete e[t])),ie(e),e}(h,[f])):"save"===t&&n(4,h=function(e){return console.log(e),e}(h))},$,function(e){const{block:t}=e.detail;o(t)?$(t.id):v(t)},function(e){const{block:t}=e.detail,l=s(t)?"":t.id;navigator.clipboard.writeText(l),n(18,c=l)},b,c,()=>n(7,a=!a),e=>n(8,r=e),e=>$(e)]}const ze=(Re="regions-data",document.getElementById(Re)?JSON.parse(document.getElementById(Re).textContent):[]);var Re;return new class extends K{constructor(e){super(),F(this,e,Pe,Te,i,{regionsType:0,regions:1,appLang:2,manifest:3},null,[-1,-1])}get regionsType(){return this.$$.ctx[0]}}({target:document.getElementById("region-list"),props:{regions:ze,regionsType:"Regions",appLang:APP_LANG,manifest:manifest}})}();
//# sourceMappingURL=regionList.js.map
