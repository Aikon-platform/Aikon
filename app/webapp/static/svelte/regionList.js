var regionList=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c,s;function r(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function a(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function g(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function h(){return m(" ")}function v(){return m("")}function $(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.data!==t&&(e.data=t)}function k(e,t,n){e.classList[n?"add":"remove"](t)}function w(e){s=e}function x(){const e=function(){if(!s)throw new Error("Function called outside component initialization");return s}();return(t,n,{cancelable:l=!1}={})=>{const o=e.$$.callbacks[t];if(o){const i=function(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,l,t),o}(t,n,{cancelable:l});return o.slice().forEach((t=>{t.call(e,i)})),!i.defaultPrevented}return!0}}const L=[],S=[];let A=[];const _=[],C=Promise.resolve();let j=!1;function O(e){A.push(e)}const E=new Set;let N=0;function V(){if(0!==N)return;const e=s;do{try{for(;N<L.length;){const e=L[N];N++,w(e),z(e.$$)}}catch(e){throw L.length=0,N=0,e}for(w(null),L.length=0,N=0;S.length;)S.pop()();for(let e=0;e<A.length;e+=1){const t=A[e];E.has(t)||(E.add(t),t())}A.length=0}while(L.length);for(;_.length;)_.pop()();j=!1,E.clear(),w(e)}function z(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(O)}}const T=new Set;let P;function H(){P={r:0,c:[],p:P}}function I(){P.r||l(P.c),P=P.p}function M(e,t){e&&e.i&&(T.delete(e),e.i(t))}function R(e,t,n,l){if(e&&e.o){if(T.has(e))return;T.add(e),P.c.push((()=>{T.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}else l&&l()}function D(e,t){R(e,1,1,(()=>{t.delete(e.key)}))}function B(e,t,n,o,i,c,s,r,a,u,d,f){let p=e.length,g=c.length,m=p;const h={};for(;m--;)h[e[m].key]=m;const v=[],$=new Map,b=new Map,y=[];for(m=g;m--;){const e=f(i,c,m),l=n(e);let r=s.get(l);r?o&&y.push((()=>r.p(e,t))):(r=u(l,e),r.c()),$.set(l,v[m]=r),l in h&&b.set(l,Math.abs(m-h[l]))}const k=new Set,w=new Set;function x(e){M(e,1),e.m(r,d),s.set(e.key,e),d=e.first,g--}for(;p&&g;){const t=v[g-1],n=e[p-1],l=t.key,o=n.key;t===n?(d=t.first,p--,g--):$.has(o)?!s.has(l)||k.has(l)?x(t):w.has(o)?p--:b.get(l)>b.get(o)?(w.add(l),x(t)):(k.add(o),p--):(a(n,s),p--)}for(;p--;){const t=e[p];$.has(t.key)||a(t,s)}for(;g;)x(v[g-1]);return l(y),v}function q(e){e&&e.c()}function G(e,n,i,c){const{fragment:s,after_update:r}=e.$$;s&&s.m(n,i),c||O((()=>{const n=e.$$.on_mount.map(t).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...n):l(n),e.$$.on_mount=[]})),r.forEach(O)}function J(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];A.forEach((l=>-1===e.indexOf(l)?t.push(l):n.push(l))),n.forEach((e=>e())),A=t}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function U(e,t){-1===e.$$.dirty[0]&&(L.push(e),j||(j=!0,C.then(V)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function F(t,o,i,c,r,a,u,f=[-1]){const p=s;w(t);const g=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||p.$$.root};u&&u(g.root);let m=!1;if(g.ctx=i?i(t,o.props||{},((e,n,...l)=>{const o=l.length?l[0]:n;return g.ctx&&r(g.ctx[e],g.ctx[e]=o)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](o),m&&U(t,e)),n})):[],g.update(),m=!0,l(g.before_update),g.fragment=!!c&&c(g.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);g.fragment&&g.fragment.l(e),e.forEach(d)}else g.fragment&&g.fragment.c();o.intro&&M(t.$$.fragment),G(t,o.target,o.anchor,o.customElement),V()}w(p)}class K{$destroy(){J(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Q(e=null,t="full",n="full"){if(!e)return"https://via.placeholder.com/96x96?text=No+Image";if((e=e.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const l=e[e.length-1].includes(",")?e.pop().replace(".jpg",""):t,o=e.join("_").replace(".jpg","");return`${CANTALOUPE_APP_URL??"http://localhost:8182"}/iiif/2/${o}.jpg/${l}/${n}/0/default.jpg`}function W(e=null,t=1){return`${SAS_APP_URL??"http://localhost:3000"}/index.html?iiif-content=${e}&canvas=${t}`}function X(e){let t;return{c(){t=g("path"),b(t,"d","M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"),b(t,"class","svelte-l0tzvr")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function Y(e){let t;return{c(){t=g("path"),b(t,"d","M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"),b(t,"class","svelte-l0tzvr")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function Z(e){let t,n="en"===e[3]?"Copy ID":"Copier l'ID";return{c(){t=m(n)},m(e,n){u(e,t,n)},p(e,l){8&l&&n!==(n="en"===e[3]?"Copy ID":"Copier l'ID")&&y(t,n)},d(e){e&&d(t)}}}function ee(e){let t,n="en"===e[3]?"Copied!":"Copié !";return{c(){t=m(n)},m(e,n){u(e,t,n)},p(e,l){8&l&&n!==(n="en"===e[3]?"Copied!":"Copié !")&&y(t,n)},d(e){e&&d(t)}}}function te(t){let n,o,i,c,s,f,v,k,w,x,L,S,A,_,C,j,O=t[0].title+"";function E(e,t){return e[2]?Y:X}let N=E(t),V=N(t);function z(e,t){return e[2]?ee:Z}let T=z(t),P=T(t);return{c(){n=p("div"),o=p("figure"),i=p("img"),s=h(),f=p("div"),v=p("span"),k=m(O),w=h(),x=p("button"),L=g("svg"),V.c(),S=h(),A=p("span"),P.c(),r(i.src,c=Q(t[0].img,t[0].xyhw,"96,"))||b(i,"src",c),b(i,"alt","Extracted region"),b(v,"class","overlay-desc"),b(f,"class","overlay is-center svelte-l0tzvr"),b(o,"class","image is-96x96 card svelte-l0tzvr"),b(o,"tabindex","-1"),b(L,"xmlns","http://www.w3.org/2000/svg"),b(L,"viewBox","0 0 384 512"),b(L,"class","svelte-l0tzvr"),b(A,"class","tooltip svelte-l0tzvr"),b(x,"class","button region-btn tag svelte-l0tzvr"),b(n,"class",_="region image is-96x96 "+(t[1]?"checked":"")+" svelte-l0tzvr")},m(e,l){u(e,n,l),a(n,o),a(o,i),a(o,s),a(o,f),a(f,v),a(v,k),a(n,w),a(n,x),a(x,L),V.m(L,null),a(x,S),a(x,A),P.m(A,null),C||(j=[$(o,"click",t[6]),$(o,"keyup",ne),$(x,"click",t[7])],C=!0)},p(e,[t]){1&t&&!r(i.src,c=Q(e[0].img,e[0].xyhw,"96,"))&&b(i,"src",c),1&t&&O!==(O=e[0].title+"")&&y(k,O),N!==(N=E(e))&&(V.d(1),V=N(e),V&&(V.c(),V.m(L,null))),T===(T=z(e))&&P?P.p(e,t):(P.d(1),P=T(e),P&&(P.c(),P.m(A,null))),2&t&&_!==(_="region image is-96x96 "+(e[1]?"checked":"")+" svelte-l0tzvr")&&b(n,"class",_)},i:e,o:e,d(e){e&&d(n),V.d(),P.d(),C=!1,l(j)}}}const ne=()=>null;function le(e,t,n){const l=x();let{block:o}=t,{isSelected:i=!1}=t,{isCopied:c=!1}=t,{appLang:s="en"}=t;function r(){l("toggleSelection",{block:o})}function a(){l("copyId",{block:o})}return e.$$set=e=>{"block"in e&&n(0,o=e.block),"isSelected"in e&&n(1,i=e.isSelected),"isCopied"in e&&n(2,c=e.isCopied),"appLang"in e&&n(3,s=e.appLang)},[o,i,c,s,r,a,()=>r(),()=>a()]}class oe extends K{constructor(e){super(),F(this,e,le,te,i,{block:0,isSelected:1,isCopied:2,appLang:3})}}function ie(e){localStorage.setItem("documentSet",JSON.stringify(e))}function ce(t){let n,l,o,i,c,s,r,f,g,v,$="en"===t[3]?"Selection":"Sélection";return{c(){n=p("div"),l=p("button"),o=p("span"),i=p("i"),c=h(),s=m($),r=m("\n            ("),f=p("span"),g=m(t[2]),v=m(")"),b(i,"class","fa-solid fa-book-bookmark"),b(f,"id","selection-count"),b(f,"class","svelte-1ifntk3"),b(o,"class","svelte-1ifntk3"),b(l,"id","set-btn"),b(l,"class","button px-5 py-4 is-link js-modal-trigger svelte-1ifntk3"),b(l,"data-target","selection-modal"),k(l,"add-animation",t[0]),k(l,"remove-animation",t[1]),b(n,"class","set-container svelte-1ifntk3")},m(e,t){u(e,n,t),a(n,l),a(l,o),a(o,i),a(o,c),a(o,s),a(o,r),a(o,f),a(f,g),a(o,v)},p(e,[t]){8&t&&$!==($="en"===e[3]?"Selection":"Sélection")&&y(s,$),4&t&&y(g,e[2]),1&t&&k(l,"add-animation",e[0]),2&t&&k(l,"remove-animation",e[1])},i:e,o:e,d(e){e&&d(n)}}}function se(e,t,n){let{addAnimation:l=!1}=t,{removeAnimation:o=!1}=t,{selectionLength:i=0}=t,{appLang:c="en"}=t;return e.$$set=e=>{"addAnimation"in e&&n(0,l=e.addAnimation),"removeAnimation"in e&&n(1,o=e.removeAnimation),"selectionLength"in e&&n(2,i=e.selectionLength),"appLang"in e&&n(3,c=e.appLang)},[l,o,i,c]}class re extends K{constructor(e){super(),F(this,e,se,ce,i,{addAnimation:0,removeAnimation:1,selectionLength:2,appLang:3})}}function ae(t){let n,o,i,c,s,r,f,g,v,k,w,x="en"===t[0]?"Clear selection":"Vider la sélection",L="en"===t[0]?"Save selection":"Sauvegarder la sélection";return{c(){n=p("footer"),o=p("div"),i=p("button"),c=m(x),s=h(),r=p("button"),f=p("i"),g=h(),v=m(L),b(i,"class","button is-link is-light"),b(f,"class","fa-solid fa-floppy-disk"),b(r,"class","button is-link"),b(o,"class","buttons"),b(n,"class","modal-card-foot is-centered")},m(e,l){u(e,n,l),a(n,o),a(o,i),a(i,c),a(o,s),a(o,r),a(r,f),a(r,g),a(r,v),k||(w=[$(i,"click",t[2]),$(r,"click",t[3])],k=!0)},p(e,[t]){1&t&&x!==(x="en"===e[0]?"Clear selection":"Vider la sélection")&&y(c,x),1&t&&L!==(L="en"===e[0]?"Save selection":"Sauvegarder la sélection")&&y(v,L)},i:e,o:e,d(e){e&&d(n),k=!1,l(w)}}}function ue(e,t,n){const l=x();function o(e="save"){l("commitSelection",{updateType:e})}let{appLang:i="en"}=t;return e.$$set=e=>{"appLang"in e&&n(0,i=e.appLang)},[i,o,()=>o("clear"),()=>o("save")]}class de extends K{constructor(e){super(),F(this,e,ue,ae,i,{appLang:0})}}function fe(e,t,n){const l=e.slice();return l[23]=t[n][0],l[24]=t[n][1],l}function pe(e,t,n){const l=e.slice();return l[30]=t[n][0],l[31]=t[n][1],l}function ge(e,t,n){const l=e.slice();return l[27]=t[n],l}function me(e,t,n){const l=e.slice();return l[27]=t[n],l}function he(e,t,n){const l=e.slice();return l[36]=t[n][0],l[24]=t[n][1],l}function ve(e){let t;return{c(){t=g("path"),b(t,"d","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"),b(t,"class","svelte-1jta9w9")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function $e(e){let t;return{c(){t=g("path"),b(t,"d","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"),b(t,"class","svelte-1jta9w9")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function be(e){let t,n="en"===e[2]?"Edit":"Modifier";return{c(){t=m(n)},m(e,n){u(e,t,n)},p(e,l){4&l[0]&&n!==(n="en"===e[2]?"Edit":"Modifier")&&y(t,n)},d(e){e&&d(t)}}}function ye(e){let t,n="en"===e[2]?"Validate":"Valider";return{c(){t=m(n)},m(e,n){u(e,t,n)},p(e,l){4&l[0]&&n!==(n="en"===e[2]?"Validate":"Valider")&&y(t,n)},d(e){e&&d(t)}}}function ke(e){let t,n,l,o,i,c,s,r,f,g,v,$,k,w,x,L="en"===e[2]?"Reload":"Recharger",S="en"===e[2]?"Go to editor":"Aller à l'éditeur",A="en"===e[2]?"Delete selected regions":"Supprimer les regions selectionnées";return{c(){t=p("button"),n=p("i"),l=h(),o=m(L),i=h(),c=p("a"),s=p("i"),r=h(),f=m(S),v=h(),$=p("button"),k=p("i"),w=h(),x=m(A),b(n,"class","fa-solid fa-rotate-right"),b(t,"class","tag is-link is-light is-rounded mr-3"),b(s,"class","fa-solid fa-edit"),b(c,"class","tag is-link is-rounded mr-3"),b(c,"href",g=W(e[3])),b(c,"target","_blank"),b(k,"class","fa-solid fa-trash"),b($,"class","tag is-danger is-rounded")},m(e,d){u(e,t,d),a(t,n),a(t,l),a(t,o),u(e,i,d),u(e,c,d),a(c,s),a(c,r),a(c,f),u(e,v,d),u(e,$,d),a($,k),a($,w),a($,x)},p(e,t){4&t[0]&&L!==(L="en"===e[2]?"Reload":"Recharger")&&y(o,L),4&t[0]&&S!==(S="en"===e[2]?"Go to editor":"Aller à l'éditeur")&&y(f,S),8&t[0]&&g!==(g=W(e[3]))&&b(c,"href",g),4&t[0]&&A!==(A="en"===e[2]?"Delete selected regions":"Supprimer les regions selectionnées")&&y(x,A)},d(e){e&&d(t),e&&d(i),e&&d(c),e&&d(v),e&&d($)}}}function we(e){let t,n,o,i,c,s,r=e[24].text+"";function f(){return e[20](e[36])}return{c(){t=p("li"),n=p("a"),o=m(r),i=h(),k(t,"is-active",e[36]===e[8])},m(e,l){u(e,t,l),a(t,n),a(n,o),a(t,i),c||(s=[$(t,"click",f),$(t,"keyup",He)],c=!0)},p(n,l){e=n,131328&l[0]&&k(t,"is-active",e[36]===e[8])},d(e){e&&d(t),c=!1,l(s)}}}function xe(t){let n;return{c(){n=p("div"),n.textContent="tout doux"},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&d(n)}}}function Le(e){let t,n,l,o=Object.entries(e[1]),i=[];for(let t=0;t<o.length;t+=1)i[t]=Ce(pe(e,o,t));const c=e=>R(i[e],1,1,(()=>{i[e]=null}));let s=null;return o.length||(s=Ae()),{c(){t=p("table"),n=p("tbody");for(let e=0;e<i.length;e+=1)i[e].c();s&&s.c(),b(t,"class","table is-fullwidth")},m(e,o){u(e,t,o),a(t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(n,null);s&&s.m(n,null),l=!0},p(e,t){if(99854&t[0]){let l;for(o=Object.entries(e[1]),l=0;l<o.length;l+=1){const c=pe(e,o,l);i[l]?(i[l].p(c,t),M(i[l],1)):(i[l]=Ce(c),i[l].c(),M(i[l],1),i[l].m(n,null))}for(H(),l=o.length;l<i.length;l+=1)c(l);I(),!o.length&&s?s.p(e,t):o.length?s&&(s.d(1),s=null):(s=Ae(),s.c(),s.m(n,null))}},i(e){if(!l){for(let e=0;e<o.length;e+=1)M(i[e]);l=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)R(i[e]);l=!1},d(e){e&&d(t),f(i,e),s&&s.d()}}}function Se(e){let t,n,l,o=[],i=new Map,c=Object.values(e[1]).flat(1);const s=e=>e[27].id;for(let t=0;t<c.length;t+=1){let n=me(e,c,t),l=s(n);i.set(l,o[t]=Oe(l,n))}let r=null;return c.length||(r=je()),{c(){t=p("div"),n=p("div");for(let e=0;e<o.length;e+=1)o[e].c();r&&r.c(),b(n,"class","grid is-gap-2"),b(t,"class","fixed-grid has-auto-count")},m(e,i){u(e,t,i),a(t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(n,null);r&&r.m(n,null),l=!0},p(e,t){99846&t[0]&&(c=Object.values(e[1]).flat(1),H(),o=B(o,t,s,1,e,c,i,n,D,Oe,null,me),I(),c.length?r&&(r.d(1),r=null):r||(r=je(),r.c(),r.m(n,null)))},i(e){if(!l){for(let e=0;e<c.length;e+=1)M(o[e]);l=!0}},o(e){for(let e=0;e<o.length;e+=1)R(o[e]);l=!1},d(e){e&&d(t);for(let e=0;e<o.length;e+=1)o[e].d();r&&r.d()}}}function Ae(t){let n,l;return{c(){n=p("tr"),n.textContent="NO ANNOTATION",l=h()},m(e,t){u(e,n,t),u(e,l,t)},p:e,d(e){e&&d(n),e&&d(l)}}}function _e(e,t){let n,l,o;return l=new oe({props:{block:t[27],appLang:t[2],isSelected:t[10](t[27]),isCopied:t[9](t[27])}}),l.$on("toggleSelection",t[15]),l.$on("copyId",t[16]),{key:e,first:null,c(){n=v(),q(l.$$.fragment),this.first=n},m(e,t){u(e,n,t),G(l,e,t),o=!0},p(e,n){t=e;const o={};2&n[0]&&(o.block=t[27]),4&n[0]&&(o.appLang=t[2]),1026&n[0]&&(o.isSelected=t[10](t[27])),514&n[0]&&(o.isCopied=t[9](t[27])),l.$set(o)},i(e){o||(M(l.$$.fragment,e),o=!0)},o(e){R(l.$$.fragment,e),o=!1},d(e){e&&d(n),J(l,e)}}}function Ce(e){let t,n,l,o,i,c,s,f,g,v,$,k,w,x,L,S,A,_,C,j=e[30]+"",O=[],E=new Map,N=e[31];const V=e=>e[27].id;for(let t=0;t<N.length;t+=1){let n=ge(e,N,t),l=V(n);E.set(l,O[t]=_e(l,n))}return{c(){t=p("tr"),n=p("th"),l=p("div"),o=p("img"),s=h(),f=p("div"),g=p("a"),v=p("i"),$=m("\n                                Page "),k=m(j),x=h(),L=p("td"),S=p("div"),A=p("div");for(let e=0;e<O.length;e+=1)O[e].c();var a,u,d,y;_=h(),r(o.src,i=Q(e[31][0].img,"full","250,"))||b(o,"src",i),b(o,"alt",c="Canvas "+e[30]),b(o,"class","mb-3 card"),b(v,"class","fa-solid fa-pen-to-square"),b(g,"class","tag px-2 py-1 is-rounded"),b(g,"href",w=W(e[3],e[30])),b(g,"target","_blank"),b(f,"class","is-center mb-1"),b(l,"class","content-wrapper py-5 svelte-1jta9w9"),b(n,"class","is-3 center-flex is-narrow svelte-1jta9w9"),a=n,u="width",null==(d="260px")?a.style.removeProperty(u):a.style.setProperty(u,d,y?"important":""),b(A,"class","grid is-gap-2"),b(S,"class","fixed-grid has-6-cols"),b(L,"class","p-5 is-fullwidth")},m(e,i){u(e,t,i),a(t,n),a(n,l),a(l,o),a(l,s),a(l,f),a(f,g),a(g,v),a(g,$),a(g,k),a(t,x),a(t,L),a(L,S),a(S,A);for(let e=0;e<O.length;e+=1)O[e]&&O[e].m(A,null);a(t,_),C=!0},p(e,t){(!C||2&t[0]&&!r(o.src,i=Q(e[31][0].img,"full","250,")))&&b(o,"src",i),(!C||2&t[0]&&c!==(c="Canvas "+e[30]))&&b(o,"alt",c),(!C||2&t[0])&&j!==(j=e[30]+"")&&y(k,j),(!C||10&t[0]&&w!==(w=W(e[3],e[30])))&&b(g,"href",w),99846&t[0]&&(N=e[31],H(),O=B(O,t,V,1,e,N,E,A,D,_e,null,ge),I())},i(e){if(!C){for(let e=0;e<N.length;e+=1)M(O[e]);C=!0}},o(e){for(let e=0;e<O.length;e+=1)R(O[e]);C=!1},d(e){e&&d(t);for(let e=0;e<O.length;e+=1)O[e].d()}}}function je(e){let t;return{c(){t=m("NO ANNOTATION")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function Oe(e,t){let n,l,o;return l=new oe({props:{block:t[27],appLang:t[2],isSelected:t[10](t[27]),isCopied:t[9](t[27])}}),l.$on("toggleSelection",t[15]),l.$on("copyId",t[16]),{key:e,first:null,c(){n=v(),q(l.$$.fragment),this.first=n},m(e,t){u(e,n,t),G(l,e,t),o=!0},p(e,n){t=e;const o={};2&n[0]&&(o.block=t[27]),4&n[0]&&(o.appLang=t[2]),1026&n[0]&&(o.isSelected=t[10](t[27])),514&n[0]&&(o.isCopied=t[9](t[27])),l.$set(o)},i(e){o||(M(l.$$.fragment,e),o=!0)},o(e){R(l.$$.fragment,e),o=!1},d(e){e&&d(n),J(l,e)}}}function Ee(e){let t,n,l="en"===e[2]?"No regions in selection":"Aucune région sélectionnée";return{c(){t=p("div"),n=m(l)},m(e,l){u(e,t,l),a(t,n)},p(e,t){4&t[0]&&l!==(l="en"===e[2]?"No regions in selection":"Aucune région sélectionnée")&&y(n,l)},d(e){e&&d(t)}}}function Ne(e){let t,n,l=Object.entries(e[4][e[0]]),o=[];for(let t=0;t<l.length;t+=1)o[t]=Ve(fe(e,l,t));return{c(){t=p("div"),n=p("div");for(let e=0;e<o.length;e+=1)o[e].c();b(n,"class","grid is-gap-2"),b(t,"class","fixed-grid has-6-cols")},m(e,l){u(e,t,l),a(t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(n,null)},p(e,t){if(16401&t[0]){let i;for(l=Object.entries(e[4][e[0]]),i=0;i<l.length;i+=1){const c=fe(e,l,i);o[i]?o[i].p(c,t):(o[i]=Ve(c),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=l.length}},d(e){e&&d(t),f(o,e)}}}function Ve(e){let t,n,l,o,i,c,s,f,g,v,k,w,x,L=e[24].title+"";function S(){return e[21](e[23])}return{c(){t=p("div"),n=p("figure"),l=p("img"),i=h(),c=p("div"),s=p("span"),f=m(L),g=h(),v=p("button"),k=h(),r(l.src,o=Q(e[24].img,e[24].xyhw,"96,"))||b(l,"src",o),b(l,"alt","Extracted region"),b(s,"class","overlay-desc"),b(c,"class","overlay is-center svelte-1jta9w9"),b(n,"class","image is-64x64 card"),b(v,"class","delete region-btn"),b(v,"aria-label","remove from selection"),b(t,"class","selection cell svelte-1jta9w9")},m(e,o){u(e,t,o),a(t,n),a(n,l),a(n,i),a(n,c),a(c,s),a(s,f),a(t,g),a(t,v),a(t,k),w||(x=$(v,"click",S),w=!0)},p(t,n){e=t,16&n[0]&&!r(l.src,o=Q(e[24].img,e[24].xyhw,"96,"))&&b(l,"src",o),16&n[0]&&L!==(L=e[24].title+"")&&y(f,L)},d(e){e&&d(t),w=!1,x()}}}function ze(e){let t,n,o,i,c,s,r,v,k,w,x,L,S,A,_,C,j,O,E,N,V,z,T,P,D,B,U,F,K,Q,W,X,Y,Z,ee,te,ne,le,oe,ie,ce,se,ae,ue,fe,pe,ge,me,Ae,_e="en"===e[2]?"Select all":"Tout sélectionner",Ce="en"===e[2]?"Download":"Télecharger",je="en"===e[2]?"Selected regions":"Regions sélectionnées";function Oe(e,t){return e[7]?$e:ve}t=new re({props:{addAnimation:e[5],removeAnimation:e[6],selectionLength:e[12],appLang:e[2]}});let Ve=Oe(e),ze=Ve(e);function He(e,t){return e[7]?ye:be}let Ie=He(e),Me=Ie(e),Re=e[7]&&ke(e),De=Object.entries(e[17]),Be=[];for(let t=0;t<De.length;t+=1)Be[t]=we(he(e,De,t));const qe=[Se,Le,xe],Ge=[];function Je(e,t){return"all"===e[8]?0:"page"===e[8]?1:"similarity"===e[8]?2:-1}function Ue(e,t){return e[11]?Ne:Ee}~(D=Je(e))&&(B=Ge[D]=qe[D](e));let Fe=Ue(e),Ke=Fe(e);return pe=new de({props:{appLang:e[2]}}),pe.$on("commitSelection",e[13]),{c(){q(t.$$.fragment),n=h(),o=p("div"),i=p("div"),c=p("button"),s=g("svg"),ze.c(),r=h(),Me.c(),k=h(),w=p("button"),x=p("i"),L=h(),S=m(_e),A=h(),_=p("button"),C=p("i"),j=h(),O=m(Ce),E=h(),N=p("div"),Re&&Re.c(),V=h(),z=p("div"),T=p("ul");for(let e=0;e<Be.length;e+=1)Be[e].c();P=h(),B&&B.c(),U=h(),F=p("div"),K=p("div"),Q=h(),W=p("div"),X=p("div"),Y=p("div"),Z=p("i"),ee=h(),te=m(je),ne=m("\n                ("),le=p("span"),oe=m(e[12]),ie=m(")"),ce=h(),se=p("button"),ae=h(),ue=p("section"),Ke.c(),fe=h(),q(pe.$$.fragment),b(s,"xmlns","http://www.w3.org/2000/svg"),b(s,"viewBox","0 0 384 512"),b(s,"class","pr-3"),b(c,"class",v="button "+(e[7]?"is-success":"is-link")+" mr-3"),b(x,"class","fa-solid fa-square-check"),b(w,"class","button is-link is-light mr-3"),b(C,"class","fa-solid fa-download"),b(_,"class","button is-link is-light"),b(i,"class","svelte-1jta9w9"),b(N,"class","edit-action svelte-1jta9w9"),b(o,"class","is-left center-flex actions svelte-1jta9w9"),b(T,"class","panel-tabs"),b(z,"class","tabs is-centered"),b(K,"class","modal-background"),b(Z,"class","fa-solid fa-book-bookmark"),b(le,"id","selection-count"),b(Y,"class","title is-4 mb-0 media-content"),b(se,"class","delete media-left"),b(se,"aria-label","close"),b(X,"class","modal-card-head media mb-0"),b(ue,"class","modal-card-body"),b(W,"class","modal-content"),b(F,"id","selection-modal"),b(F,"class","modal fade"),b(F,"tabindex","-1"),b(F,"aria-labelledby","selection-modal-label"),b(F,"aria-hidden","true")},m(l,d){G(t,l,d),u(l,n,d),u(l,o,d),a(o,i),a(i,c),a(c,s),ze.m(s,null),a(c,r),Me.m(c,null),a(i,k),a(i,w),a(w,x),a(w,L),a(w,S),a(i,A),a(i,_),a(_,C),a(_,j),a(_,O),a(o,E),a(o,N),Re&&Re.m(N,null),u(l,V,d),u(l,z,d),a(z,T);for(let e=0;e<Be.length;e+=1)Be[e]&&Be[e].m(T,null);u(l,P,d),~D&&Ge[D].m(l,d),u(l,U,d),u(l,F,d),a(F,K),a(F,Q),a(F,W),a(W,X),a(X,Y),a(Y,Z),a(Y,ee),a(Y,te),a(Y,ne),a(Y,le),a(le,oe),a(Y,ie),a(X,ce),a(X,se),a(W,ae),a(W,ue),Ke.m(ue,null),a(W,fe),G(pe,W,null),ge=!0,me||(Ae=[$(c,"click",e[19]),$(w,"click",Te),$(_,"click",Pe)],me=!0)},p(e,n){const l={};if(32&n[0]&&(l.addAnimation=e[5]),64&n[0]&&(l.removeAnimation=e[6]),4096&n[0]&&(l.selectionLength=e[12]),4&n[0]&&(l.appLang=e[2]),t.$set(l),Ve!==(Ve=Oe(e))&&(ze.d(1),ze=Ve(e),ze&&(ze.c(),ze.m(s,null))),Ie===(Ie=He(e))&&Me?Me.p(e,n):(Me.d(1),Me=Ie(e),Me&&(Me.c(),Me.m(c,null))),(!ge||128&n[0]&&v!==(v="button "+(e[7]?"is-success":"is-link")+" mr-3"))&&b(c,"class",v),(!ge||4&n[0])&&_e!==(_e="en"===e[2]?"Select all":"Tout sélectionner")&&y(S,_e),(!ge||4&n[0])&&Ce!==(Ce="en"===e[2]?"Download":"Télecharger")&&y(O,Ce),e[7]?Re?Re.p(e,n):(Re=ke(e),Re.c(),Re.m(N,null)):Re&&(Re.d(1),Re=null),131328&n[0]){let t;for(De=Object.entries(e[17]),t=0;t<De.length;t+=1){const l=he(e,De,t);Be[t]?Be[t].p(l,n):(Be[t]=we(l),Be[t].c(),Be[t].m(T,null))}for(;t<Be.length;t+=1)Be[t].d(1);Be.length=De.length}let o=D;D=Je(e),D===o?~D&&Ge[D].p(e,n):(B&&(H(),R(Ge[o],1,1,(()=>{Ge[o]=null})),I()),~D?(B=Ge[D],B?B.p(e,n):(B=Ge[D]=qe[D](e),B.c()),M(B,1),B.m(U.parentNode,U)):B=null),(!ge||4&n[0])&&je!==(je="en"===e[2]?"Selected regions":"Regions sélectionnées")&&y(te,je),(!ge||4096&n[0])&&y(oe,e[12]),Fe===(Fe=Ue(e))&&Ke?Ke.p(e,n):(Ke.d(1),Ke=Fe(e),Ke&&(Ke.c(),Ke.m(ue,null)));const i={};4&n[0]&&(i.appLang=e[2]),pe.$set(i)},i(e){ge||(M(t.$$.fragment,e),M(B),M(pe.$$.fragment,e),ge=!0)},o(e){R(t.$$.fragment,e),R(B),R(pe.$$.fragment,e),ge=!1},d(e){J(t,e),e&&d(n),e&&d(o),ze.d(),Me.d(),Re&&Re.d(),e&&d(V),e&&d(z),f(Be,e),e&&d(P),~D&&Ge[D].d(e),e&&d(U),e&&d(F),Ke.d(),J(pe),me=!1,l(Ae)}}}const Te=()=>null,Pe=()=>null,He=()=>null;function Ie(e,t,n){let l,o,i,c,s,r,a,u=!1,d=!1;const f="Regions";let{regions:p={}}=t,{appLang:g="en"}=t,{manifest:m=""}=t,h=JSON.parse(localStorage.getItem("documentSet"))??{};function v(e){n(4,h=function(e,t,n){const{[t]:l,...o}=e[n];return e[n]=o,ie(e),e}(h,e,f)),n(6,d=!0),setTimeout((()=>n(6,d=!1)),300)}function $(e){n(4,h=function(e,t){return e.hasOwnProperty(t.type)||(e[t.type]=[]),e[t.type]={...e[t.type],[t.id]:t},ie(e),e}(h,e)),n(5,u=!0),setTimeout((()=>n(5,u=!1)),300)}const b={all:{text:"en"===g?"All regions":"Toutes les régions"},page:{text:"en"===g?"Per page":"Par page"},similarity:{text:"en"===g?"Similarity":"Similarité"}};return e.$$set=e=>{"regions"in e&&n(1,p=e.regions),"appLang"in e&&n(2,g=e.appLang),"manifest"in e&&n(3,m=e.manifest)},e.$$.update=()=>{16&e.$$.dirty[0]&&n(12,l=h.hasOwnProperty(f)?Object.keys(h[f]).length:0),16&e.$$.dirty[0]&&n(10,o=e=>h[f]?.hasOwnProperty(e.id)),16&e.$$.dirty[0]&&n(11,i=Object.keys(h[f]??{}).length>0),2&e.$$.dirty[0]&&console.log(p),262144&e.$$.dirty[0]&&n(9,s=e=>c===e.id)},n(18,c=""),n(8,r="all"),n(7,a=!1),[f,p,g,m,h,u,d,a,r,s,o,i,l,function(e){const{updateType:t}=e.detail;"clear"===t?n(4,h=function(e,t){return t.map((t=>!e.hasOwnProperty(t)||delete e[t])),ie(e),e}(h,[f])):"save"===t&&n(4,h=function(e){return console.log(e),e}(h))},v,function(e){const{block:t}=e.detail;o(t)?v(t.id):$(t)},function(e){const{block:t}=e.detail,l=s(t)?"":t.id;navigator.clipboard.writeText(l),n(18,c=l)},b,c,()=>n(7,a=!a),e=>n(8,r=e),e=>v(e)]}const Me=(Re="regions-data",document.getElementById(Re)?JSON.parse(document.getElementById(Re).textContent):[]);var Re;return new class extends K{constructor(e){super(),F(this,e,Ie,ze,i,{regionsType:0,regions:1,appLang:2,manifest:3},null,[-1,-1])}get regionsType(){return this.$$.ctx[0]}}({target:document.getElementById("region-list"),props:{regions:Me,regionsType:"Regions",appLang:APP_LANG,manifest:manifest}})}();
//# sourceMappingURL=regionList.js.map
