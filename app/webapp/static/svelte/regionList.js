var regionList=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function c(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let o,s;function r(t,e){return o||(o=document.createElement("a")),o.href=e,t===o.href}function a(t,e,n,l){return t[1]&&l?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](l(e))):n.ctx}function u(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function m(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function h(t){return document.createTextNode(t)}function $(){return h(" ")}function v(){return h("")}function b(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function k(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t,e,n){t.classList[n?"add":"remove"](e)}function L(t){s=t}function S(){if(!s)throw new Error("Function called outside component initialization");return s}function N(){const t=S();return(e,n,{cancelable:l=!1}={})=>{const c=t.$$.callbacks[e];if(c){const i=function(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const c=document.createEvent("CustomEvent");return c.initCustomEvent(t,n,l,e),c}(e,n,{cancelable:l});return c.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}const O=[],P=[];let A=[];const j=[],_=Promise.resolve();let C=!1;function E(t){A.push(t)}const V=new Set;let T=0;function z(){if(0!==T)return;const t=s;do{try{for(;T<O.length;){const t=O[T];T++,L(t),I(t.$$)}}catch(t){throw O.length=0,T=0,t}for(L(null),O.length=0,T=0;P.length;)P.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];V.has(e)||(V.add(e),e())}A.length=0}while(O.length);for(;j.length;)j.pop()();C=!1,V.clear(),L(t)}function I(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const M=new Set;let R;function H(){R={r:0,c:[],p:R}}function D(){R.r||l(R.c),R=R.p}function U(t,e){t&&t.i&&(M.delete(t),t.i(e))}function B(t,e,n,l){if(t&&t.o){if(M.has(t))return;M.add(t),R.c.push((()=>{M.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}else l&&l()}function q(t,e){const n=e.token={};function l(t,l,c,i){if(e.token!==n)return;e.resolved=i;let o=e.ctx;void 0!==c&&(o=o.slice(),o[c]=i);const s=t&&(e.current=t)(o);let r=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==l&&t&&(H(),B(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),D())})):e.block.d(1),s.c(),U(s,1),s.m(e.mount(),e.anchor),r=!0),e.block=s,e.blocks&&(e.blocks[l]=s),r&&z()}if(!(c=t)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then){if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}else{const n=S();if(t.then((t=>{L(n),l(e.then,1,e.value,t),L(null)}),(t=>{if(L(n),l(e.catch,2,e.error,t),L(null),!e.hasCatch)throw t})),e.current!==e.pending)return l(e.pending,0),!0}var c}function F(t,e){B(t,1,1,(()=>{e.delete(t.key)}))}function G(t,e,n,c,i,o,s,r,a,u,d,f){let p=t.length,g=o.length,m=p;const h={};for(;m--;)h[t[m].key]=m;const $=[],v=new Map,b=new Map,k=[];for(m=g;m--;){const t=f(i,o,m),l=n(t);let r=s.get(l);r?c&&k.push((()=>r.p(t,e))):(r=u(l,t),r.c()),v.set(l,$[m]=r),l in h&&b.set(l,Math.abs(m-h[l]))}const y=new Set,x=new Set;function w(t){U(t,1),t.m(r,d),s.set(t.key,t),d=t.first,g--}for(;p&&g;){const e=$[g-1],n=t[p-1],l=e.key,c=n.key;e===n?(d=e.first,p--,g--):v.has(c)?!s.has(l)||y.has(l)?w(e):x.has(c)?p--:b.get(l)>b.get(c)?(x.add(l),w(e)):(y.add(c),p--):(a(n,s),p--)}for(;p--;){const e=t[p];v.has(e.key)||a(e,s)}for(;g;)w($[g-1]);return l(k),$}function J(t){t&&t.c()}function K(t,n,i,o){const{fragment:s,after_update:r}=t.$$;s&&s.m(n,i),o||E((()=>{const n=t.$$.on_mount.map(e).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...n):l(n),t.$$.on_mount=[]})),r.forEach(E)}function Q(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];A.forEach((l=>-1===t.indexOf(l)?e.push(l):n.push(l))),n.forEach((t=>t())),A=e}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(O.push(t),C||(C=!0,_.then(z)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,c,i,o,r,a,u,d=[-1]){const p=s;L(e);const g=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:c.target||p.$$.root};u&&u(g.root);let m=!1;if(g.ctx=i?i(e,c.props||{},((t,n,...l)=>{const c=l.length?l[0]:n;return g.ctx&&r(g.ctx[t],g.ctx[t]=c)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](c),m&&W(e,t)),n})):[],g.update(),m=!0,l(g.before_update),g.fragment=!!o&&o(g.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);g.fragment&&g.fragment.l(t),t.forEach(f)}else g.fragment&&g.fragment.c();c.intro&&U(e.$$.fragment),K(e,c.target,c.anchor,c.customElement),z()}L(p)}class Y{$destroy(){Q(this,1),this.$destroy=t}$on(e,n){if(!c(n))return t;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const t=l.indexOf(n);-1!==t&&l.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Z(t){localStorage.setItem("documentSet",JSON.stringify(t))}function tt(t=null,e="full",n="full"){if(!t)return"https://via.placeholder.com/96x96?text=No+Image";if((t=t.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const l=t[t.length-1].includes(",")?t.pop().replace(".jpg",""):e,c=t.join("_").replace(".jpg","");return`${CANTALOUPE_APP_URL??"http://localhost:8182"}/iiif/2/${c}.jpg/${l}/${n}/0/default.jpg`}function et(t=null,e=1){return`${SAS_APP_URL??"http://localhost:3000"}/index.html?iiif-content=${t}&canvas=${e}`}function nt(t){let e;return{c(){e=m("path"),y(e,"d","M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"),y(e,"class","svelte-l0tzvr")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function lt(t){let e;return{c(){e=m("path"),y(e,"d","M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"),y(e,"class","svelte-l0tzvr")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function ct(t){let e,n="en"===t[3]?"Copy ID":"Copier l'ID";return{c(){e=h(n)},m(t,n){d(t,e,n)},p(t,l){8&l&&n!==(n="en"===t[3]?"Copy ID":"Copier l'ID")&&x(e,n)},d(t){t&&f(e)}}}function it(t){let e,n="en"===t[3]?"Copied!":"Copié !";return{c(){e=h(n)},m(t,n){d(t,e,n)},p(t,l){8&l&&n!==(n="en"===t[3]?"Copied!":"Copié !")&&x(e,n)},d(t){t&&f(e)}}}function ot(e){let n,c,i,o,s,a,p,v,k,w,L,S,N,O,P,A,j,_=e[0].title+"";function C(t,e){return t[2]?lt:nt}let E=C(e),V=E(e);function T(t,e){return t[2]?it:ct}let z=T(e),I=z(e);return{c(){n=g("div"),c=g("figure"),i=g("img"),s=$(),a=g("div"),p=g("span"),v=h(_),k=$(),w=g("button"),L=m("svg"),V.c(),S=$(),N=g("span"),I.c(),r(i.src,o=tt(e[0].img,e[0].xyhw,"96,"))||y(i,"src",o),y(i,"alt","Extracted region"),y(p,"class","overlay-desc"),y(a,"class","overlay is-center svelte-l0tzvr"),y(c,"class","image is-96x96 card svelte-l0tzvr"),y(c,"tabindex","-1"),y(L,"xmlns","http://www.w3.org/2000/svg"),y(L,"viewBox","0 0 384 512"),y(L,"class","svelte-l0tzvr"),y(N,"class","tooltip svelte-l0tzvr"),y(w,"class","button region-btn tag svelte-l0tzvr"),y(n,"id",O=e[0].id),y(n,"class",P="region image is-96x96 "+(e[1]?"checked":"")+" svelte-l0tzvr")},m(t,l){d(t,n,l),u(n,c),u(c,i),u(c,s),u(c,a),u(a,p),u(p,v),u(n,k),u(n,w),u(w,L),V.m(L,null),u(w,S),u(w,N),I.m(N,null),A||(j=[b(c,"click",e[6]),b(c,"keyup",st),b(w,"click",e[7])],A=!0)},p(t,[e]){1&e&&!r(i.src,o=tt(t[0].img,t[0].xyhw,"96,"))&&y(i,"src",o),1&e&&_!==(_=t[0].title+"")&&x(v,_),E!==(E=C(t))&&(V.d(1),V=E(t),V&&(V.c(),V.m(L,null))),z===(z=T(t))&&I?I.p(t,e):(I.d(1),I=z(t),I&&(I.c(),I.m(N,null))),1&e&&O!==(O=t[0].id)&&y(n,"id",O),2&e&&P!==(P="region image is-96x96 "+(t[1]?"checked":"")+" svelte-l0tzvr")&&y(n,"class",P)},i:t,o:t,d(t){t&&f(n),V.d(),I.d(),A=!1,l(j)}}}const st=()=>null;function rt(t,e,n){const l=N();let{block:c}=e,{isSelected:i=!1}=e,{isCopied:o=!1}=e,{appLang:s="en"}=e;function r(){l("toggleSelection",{block:c})}function a(){l("copyRef",{block:c})}return t.$$set=t=>{"block"in t&&n(0,c=t.block),"isSelected"in t&&n(1,i=t.isSelected),"isCopied"in t&&n(2,o=t.isCopied),"appLang"in t&&n(3,s=t.appLang)},[c,i,o,s,r,a,()=>r(),()=>a()]}class at extends Y{constructor(t){super(),X(this,t,rt,ot,i,{block:0,isSelected:1,isCopied:2,appLang:3})}}function ut(e){let n,l,c,i,o,s,r,a,p,m,v="en"===e[3]?"Selection":"Sélection";return{c(){n=g("div"),l=g("button"),c=g("span"),i=g("i"),o=$(),s=h(v),r=h("\n            ("),a=g("span"),p=h(e[2]),m=h(")"),y(i,"class","fa-solid fa-book-bookmark"),y(a,"id","selection-count"),y(a,"class","svelte-1ifntk3"),y(c,"class","svelte-1ifntk3"),y(l,"id","set-btn"),y(l,"class","button px-5 py-4 is-link js-modal-trigger svelte-1ifntk3"),y(l,"data-target","selection-modal"),w(l,"add-animation",e[0]),w(l,"remove-animation",e[1]),y(n,"class","set-container svelte-1ifntk3")},m(t,e){d(t,n,e),u(n,l),u(l,c),u(c,i),u(c,o),u(c,s),u(c,r),u(c,a),u(a,p),u(c,m)},p(t,[e]){8&e&&v!==(v="en"===t[3]?"Selection":"Sélection")&&x(s,v),4&e&&x(p,t[2]),1&e&&w(l,"add-animation",t[0]),2&e&&w(l,"remove-animation",t[1])},i:t,o:t,d(t){t&&f(n)}}}function dt(t,e,n){let{addAnimation:l=!1}=e,{removeAnimation:c=!1}=e,{selectionLength:i=0}=e,{appLang:o="en"}=e;return t.$$set=t=>{"addAnimation"in t&&n(0,l=t.addAnimation),"removeAnimation"in t&&n(1,c=t.removeAnimation),"selectionLength"in t&&n(2,i=t.selectionLength),"appLang"in t&&n(3,o=t.appLang)},[l,c,i,o]}class ft extends Y{constructor(t){super(),X(this,t,dt,ut,i,{addAnimation:0,removeAnimation:1,selectionLength:2,appLang:3})}}function pt(e){let n,c,i,o,s,r,a,p,m,v,k,w="en"===e[0]?"Clear selection":"Vider la sélection",L="en"===e[0]?"Save selection":"Sauvegarder la sélection";return{c(){n=g("footer"),c=g("div"),i=g("button"),o=h(w),s=$(),r=g("button"),a=g("i"),p=$(),m=h(L),y(i,"class","button is-link is-light"),y(a,"class","fa-solid fa-floppy-disk"),y(r,"class","button is-link"),y(c,"class","buttons"),y(n,"class","modal-card-foot is-centered")},m(t,l){d(t,n,l),u(n,c),u(c,i),u(i,o),u(c,s),u(c,r),u(r,a),u(r,p),u(r,m),v||(k=[b(i,"click",e[2]),b(r,"click",e[3])],v=!0)},p(t,[e]){1&e&&w!==(w="en"===t[0]?"Clear selection":"Vider la sélection")&&x(o,w),1&e&&L!==(L="en"===t[0]?"Save selection":"Sauvegarder la sélection")&&x(m,L)},i:t,o:t,d(t){t&&f(n),v=!1,l(k)}}}function gt(t,e,n){const l=N();function c(t="save"){l("commitSelection",{updateType:t})}let{appLang:i="en"}=e;return t.$$set=t=>{"appLang"in t&&n(0,i=t.appLang)},[i,c,()=>c("clear"),()=>c("save")]}class mt extends Y{constructor(t){super(),X(this,t,gt,pt,i,{appLang:0})}}function ht(t){let e,n,l,c,i,o,s,p,m,v,b,k,w,L,S,N,O,P;const A=t[4].default,j=function(t,e,n,l){if(t){const c=a(t,e,n,l);return t[0](c)}}(A,t,t[3],null);return{c(){var a,u,d,f;e=g("tr"),n=g("th"),l=g("div"),c=g("img"),s=$(),p=g("div"),m=g("a"),v=g("i"),b=h("\n                    Page "),k=h(t[0]),L=$(),S=g("td"),N=g("div"),O=g("div"),j&&j.c(),r(c.src,i=tt(t[1],"full","250,"))||y(c,"src",i),y(c,"alt",o="Canvas "+t[0]),y(c,"class","mb-3 card"),y(v,"class","fa-solid fa-pen-to-square"),y(m,"class","tag px-2 py-1 is-rounded"),y(m,"href",w=et(t[2],t[0])),y(m,"target","_blank"),y(p,"class","is-center mb-1"),y(l,"class","content-wrapper py-5"),y(n,"class","is-3 center-flex is-narrow"),a=n,u="width",null==(d="260px")?a.style.removeProperty(u):a.style.setProperty(u,d,f?"important":""),y(O,"class","grid is-gap-2"),y(N,"class","fixed-grid has-6-cols"),y(S,"class","p-5 is-fullwidth")},m(t,i){d(t,e,i),u(e,n),u(n,l),u(l,c),u(l,s),u(l,p),u(p,m),u(m,v),u(m,b),u(m,k),u(e,L),u(e,S),u(S,N),u(N,O),j&&j.m(O,null),P=!0},p(t,[e]){(!P||2&e&&!r(c.src,i=tt(t[1],"full","250,")))&&y(c,"src",i),(!P||1&e&&o!==(o="Canvas "+t[0]))&&y(c,"alt",o),(!P||1&e)&&x(k,t[0]),(!P||5&e&&w!==(w=et(t[2],t[0])))&&y(m,"href",w),j&&j.p&&(!P||8&e)&&function(t,e,n,l,c,i){if(c){const o=a(e,n,l,i);t.p(o,c)}}(j,A,t,t[3],P?function(t,e,n,l){if(t[2]&&l){const c=t[2](l(n));if(void 0===e.dirty)return c;if("object"==typeof c){const t=[],n=Math.max(e.dirty.length,c.length);for(let l=0;l<n;l+=1)t[l]=e.dirty[l]|c[l];return t}return e.dirty|c}return e.dirty}(A,t[3],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[3]),null)},i(t){P||(U(j,t),P=!0)},o(t){B(j,t),P=!1},d(t){t&&f(e),j&&j.d(t)}}}function $t(t,e,n){let{$$slots:l={},$$scope:c}=e,{canvasNb:i}=e,{canvasImg:o}=e,{manifest:s}=e;return t.$$set=t=>{"canvasNb"in t&&n(0,i=t.canvasNb),"canvasImg"in t&&n(1,o=t.canvasImg),"manifest"in t&&n(2,s=t.manifest),"$$scope"in t&&n(3,c=t.$$scope)},[i,o,s,c,l]}class vt extends Y{constructor(t){super(),X(this,t,$t,ht,i,{canvasNb:0,canvasImg:1,manifest:2})}}function bt(t){let e,n,l,c,i,o,s,r,a,p=t[0]>1&&kt(t),m=t[0]<t[1]&&xt(t);return{c(){e=g("nav"),n=g("ul"),p&&p.c(),l=$(),c=g("li"),i=g("a"),o=h(t[0]),s=$(),m&&m.c(),y(i,"class","pagination-link is-current"),y(i,"href",null),y(n,"class","pagination-list"),y(e,"class","pagination is-centered"),y(e,"aria-label","pagination")},m(f,g){d(f,e,g),u(e,n),p&&p.m(n,null),u(n,l),u(n,c),u(c,i),u(i,o),u(n,s),m&&m.m(n,null),r||(a=b(i,"click",k(t[5])),r=!0)},p(t,e){t[0]>1?p?p.p(t,e):(p=kt(t),p.c(),p.m(n,l)):p&&(p.d(1),p=null),1&e&&x(o,t[0]),t[0]<t[1]?m?m.p(t,e):(m=xt(t),m.c(),m.m(n,null)):m&&(m.d(1),m=null)},d(t){t&&f(e),p&&p.d(),m&&m.d(),r=!1,a()}}}function kt(t){let e,n,l,c,i,o,s=t[0]-1>1&&yt(t);return{c(){e=g("li"),n=g("a"),n.textContent="1",l=$(),s&&s.c(),c=v(),y(n,"class","pagination-link"),y(n,"href",null)},m(r,a){d(r,e,a),u(e,n),d(r,l,a),s&&s.m(r,a),d(r,c,a),i||(o=b(n,"click",k(t[3])),i=!0)},p(t,e){t[0]-1>1?s?s.p(t,e):(s=yt(t),s.c(),s.m(c.parentNode,c)):s&&(s.d(1),s=null)},d(t){t&&f(e),t&&f(l),s&&s.d(t),t&&f(c),i=!1,o()}}}function yt(t){let e,n,l,c,i,o,s,r=t[0]-1+"";return{c(){e=g("li"),e.innerHTML='<span class="pagination-ellipsis">…</span>',n=$(),l=g("li"),c=g("a"),i=h(r),y(c,"class","pagination-link"),y(c,"href",null)},m(r,a){d(r,e,a),d(r,n,a),d(r,l,a),u(l,c),u(c,i),o||(s=b(c,"click",k(t[4])),o=!0)},p(t,e){1&e&&r!==(r=t[0]-1+"")&&x(i,r)},d(t){t&&f(e),t&&f(n),t&&f(l),o=!1,s()}}}function xt(t){let e,n,l,c,i,o,s=t[0]+1<t[1]&&wt(t);return{c(){s&&s.c(),e=$(),n=g("li"),l=g("a"),c=h(t[1]),y(l,"class","pagination-link"),y(l,"href",null)},m(r,a){s&&s.m(r,a),d(r,e,a),d(r,n,a),u(n,l),u(l,c),i||(o=b(l,"click",k(t[7])),i=!0)},p(t,n){t[0]+1<t[1]?s?s.p(t,n):(s=wt(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),2&n&&x(c,t[1])},d(t){s&&s.d(t),t&&f(e),t&&f(n),i=!1,o()}}}function wt(t){let e,n,l,c,i,o,s,r=t[0]+1+"";return{c(){e=g("li"),n=g("a"),l=h(r),c=$(),i=g("li"),i.innerHTML='<span class="pagination-ellipsis">…</span>',y(n,"class","pagination-link"),y(n,"href",null)},m(r,a){d(r,e,a),u(e,n),u(n,l),d(r,c,a),d(r,i,a),o||(s=b(n,"click",k(t[6])),o=!0)},p(t,e){1&e&&r!==(r=t[0]+1+"")&&x(l,r)},d(t){t&&f(e),t&&f(c),t&&f(i),o=!1,s()}}}function Lt(e){let n,l=e[1]>1&&bt(e);return{c(){l&&l.c(),n=v()},m(t,e){l&&l.m(t,e),d(t,n,e)},p(t,[e]){t[1]>1?l?l.p(t,e):(l=bt(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&f(n)}}}function St(t,e,n){const l=N();let{pageNb:c}=e,{maxPage:i}=e;function o(t){l("pageUpdate",{pageNb:t})}return t.$$set=t=>{"pageNb"in t&&n(0,c=t.pageNb),"maxPage"in t&&n(1,i=t.maxPage)},[c,i,o,()=>o(1),()=>o(c-1),()=>o(c),()=>o(c+1),()=>o(i)]}class Nt extends Y{constructor(t){super(),X(this,t,St,Lt,i,{pageNb:0,maxPage:1})}}function Ot(t,e,n){const l=t.slice();return l[30]=e[n][0],l[31]=e[n][1],l}function Pt(t,e,n){const l=t.slice();return l[38]=e[n][0],l[39]=e[n][1],l}function At(t,e,n){const l=t.slice();return l[34]=e[n],l}function jt(t,e,n){const l=t.slice();return l[34]=e[n],l}function _t(t,e,n){const l=t.slice();return l[45]=e[n][0],l[31]=e[n][1],l}function Ct(t){let e;return{c(){e=m("path"),y(e,"d","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"),y(e,"class","svelte-1jta9w9")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function Et(t){let e;return{c(){e=m("path"),y(e,"d","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"),y(e,"class","svelte-1jta9w9")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function Vt(t){let e,n="en"===t[2]?"Edit":"Modifier";return{c(){e=h(n)},m(t,n){d(t,e,n)},p(t,l){4&l[0]&&n!==(n="en"===t[2]?"Edit":"Modifier")&&x(e,n)},d(t){t&&f(e)}}}function Tt(t){let e,n="en"===t[2]?"Validate":"Valider";return{c(){e=h(n)},m(t,n){d(t,e,n)},p(t,l){4&l[0]&&n!==(n="en"===t[2]?"Validate":"Valider")&&x(e,n)},d(t){t&&f(e)}}}function zt(t){let e,n,l,c,i,o,s,r,a,p,m,v,k,w,L,S,N,O="en"===t[2]?"Reload":"Recharger",P="en"===t[2]?"Go to editor":"Aller à l'éditeur",A="en"===t[2]?"Delete selected regions":"Supprimer les régions sélectionnées";return{c(){e=g("button"),n=g("i"),l=$(),c=h(O),i=$(),o=g("a"),s=g("i"),r=$(),a=h(P),m=$(),v=g("button"),k=g("i"),w=$(),L=h(A),y(n,"class","fa-solid fa-rotate-right"),y(e,"class","tag is-link is-light is-rounded mr-3"),y(s,"class","fa-solid fa-edit"),y(o,"class","tag is-link is-rounded mr-3"),y(o,"href",p=et(t[3])),y(o,"target","_blank"),y(k,"class","fa-solid fa-trash"),y(v,"class","tag is-danger is-rounded")},m(f,p){d(f,e,p),u(e,n),u(e,l),u(e,c),d(f,i,p),d(f,o,p),u(o,s),u(o,r),u(o,a),d(f,m,p),d(f,v,p),u(v,k),u(v,w),u(v,L),S||(N=b(v,"click",t[16]),S=!0)},p(t,e){4&e[0]&&O!==(O="en"===t[2]?"Reload":"Recharger")&&x(c,O),4&e[0]&&P!==(P="en"===t[2]?"Go to editor":"Aller à l'éditeur")&&x(a,P),8&e[0]&&p!==(p=et(t[3]))&&y(o,"href",p),4&e[0]&&A!==(A="en"===t[2]?"Delete selected regions":"Supprimer les régions sélectionnées")&&x(L,A)},d(t){t&&f(e),t&&f(i),t&&f(o),t&&f(m),t&&f(v),S=!1,N()}}}function It(t){let e,n,c,i,o,s,r=t[31].text+"";function a(){return t[27](t[45])}return{c(){e=g("li"),n=g("a"),c=h(r),i=$(),y(n,"href",null),w(e,"is-active",t[45]===t[10])},m(t,l){d(t,e,l),u(e,n),u(n,c),u(e,i),o||(s=[b(e,"click",a),b(e,"keyup",ie)],o=!0)},p(n,l){t=n,1049600&l[0]&&w(e,"is-active",t[45]===t[10])},d(t){t&&f(e),o=!1,l(s)}}}function Mt(e){let n;return{c(){n=g("div"),n.textContent="tout doux"},m(t,e){d(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function Rt(e){let n;return{c(){n=g("div"),n.textContent="tout doux"},m(t,e){d(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function Ht(t){let e,n,l,c,i,o;e=new Nt({props:{pageNb:t[5],maxPage:10}}),e.$on("pageUpdate",t[21]);let s={ctx:t,current:null,token:null,hasCatch:!0,pending:Qt,then:Bt,catch:Ut,value:37,error:44,blocks:[,,,]};return q(i=t[8],s),{c(){J(e.$$.fragment),n=$(),l=g("table"),c=g("tbody"),s.block.c(),y(l,"class","table is-fullwidth")},m(t,i){K(e,t,i),d(t,n,i),d(t,l,i),u(l,c),s.block.m(c,s.anchor=null),s.mount=()=>c,s.anchor=null,o=!0},p(n,l){t=n;const c={};32&l[0]&&(c.pageNb=t[5]),e.$set(c),s.ctx=t,256&l[0]&&i!==(i=t[8])&&q(i,s)||function(t,e,n){const l=e.slice(),{resolved:c}=t;t.current===t.then&&(l[t.value]=c),t.current===t.catch&&(l[t.error]=c),t.block.p(l,n)}(s,t,l)},i(t){o||(U(e.$$.fragment,t),U(s.block),o=!0)},o(t){B(e.$$.fragment,t);for(let t=0;t<3;t+=1){B(s.blocks[t])}o=!1},d(t){Q(e,t),t&&f(n),t&&f(l),s.block.d(),s.token=null,s=null}}}function Dt(t){let e,n,l,c=[],i=new Map,o=Object.values(t[1]);const s=t=>t[34].id;for(let e=0;e<o.length;e+=1){let n=jt(t,o,e),l=s(n);i.set(l,c[e]=Xt(l,n))}let r=null;return o.length||(r=Wt()),{c(){e=g("div"),n=g("div");for(let t=0;t<c.length;t+=1)c[t].c();r&&r.c(),y(n,"class","grid is-gap-2"),y(e,"class","fixed-grid has-auto-count")},m(t,i){d(t,e,i),u(e,n);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(n,null);r&&r.m(n,null),l=!0},p(t,e){792582&e[0]&&(o=Object.values(t[1]),H(),c=G(c,e,s,1,t,o,i,n,F,Xt,null,jt),D(),o.length?r&&(r.d(1),r=null):r||(r=Wt(),r.c(),r.m(n,null)))},i(t){if(!l){for(let t=0;t<o.length;t+=1)U(c[t]);l=!0}},o(t){for(let t=0;t<c.length;t+=1)B(c[t]);l=!1},d(t){t&&f(e);for(let t=0;t<c.length;t+=1)c[t].d();r&&r.d()}}}function Ut(e){let n,l,c,i=e[44]+"";return{c(){n=g("tr"),l=h("Error when retrieving paginated regions: "),c=h(i)},m(t,e){d(t,n,e),u(n,l),u(n,c)},p(t,e){256&e[0]&&i!==(i=t[44]+"")&&x(c,i)},i:t,o:t,d(t){t&&f(n)}}}function Bt(t){let e,n,l,c,i;const o=[Ft,qt],s=[];function r(t,n){return 256&n[0]&&(e=null),null==e&&(e=!!(Object.values(t[37]).length>0)),e?0:1}return n=r(t,[-1,-1]),l=s[n]=o[n](t),{c(){l.c(),c=v()},m(t,e){s[n].m(t,e),d(t,c,e),i=!0},p(t,e){let i=n;n=r(t,e),n===i?s[n].p(t,e):(H(),B(s[i],1,1,(()=>{s[i]=null})),D(),l=s[n],l?l.p(t,e):(l=s[n]=o[n](t),l.c()),U(l,1),l.m(c.parentNode,c))},i(t){i||(U(l),i=!0)},o(t){B(l),i=!1},d(t){s[n].d(t),t&&f(c)}}}function qt(e){let n;return{c(){n=g("tr"),n.textContent="NO ANNOTATION"},m(t,e){d(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function Ft(t){let e,n,l=Object.entries(t[37]),c=[];for(let e=0;e<l.length;e+=1)c[e]=Kt(Pt(t,l,e));const i=t=>B(c[t],1,1,(()=>{c[t]=null}));return{c(){for(let t=0;t<c.length;t+=1)c[t].c();e=v()},m(t,l){for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(t,l);d(t,e,l),n=!0},p(t,n){if(792844&n[0]){let o;for(l=Object.entries(t[37]),o=0;o<l.length;o+=1){const i=Pt(t,l,o);c[o]?(c[o].p(i,n),U(c[o],1)):(c[o]=Kt(i),c[o].c(),U(c[o],1),c[o].m(e.parentNode,e))}for(H(),o=l.length;o<c.length;o+=1)i(o);D()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)U(c[t]);n=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)B(c[t]);n=!1},d(t){p(c,t),t&&f(e)}}}function Gt(t,e){let n,l,c;return l=new at({props:{block:e[34],appLang:e[2],isSelected:e[12](e[34]),isCopied:e[11](e[34])}}),l.$on("toggleSelection",e[18]),l.$on("copyRef",e[19]),{key:t,first:null,c(){n=v(),J(l.$$.fragment),this.first=n},m(t,e){d(t,n,e),K(l,t,e),c=!0},p(t,n){e=t;const c={};256&n[0]&&(c.block=e[34]),4&n[0]&&(c.appLang=e[2]),4352&n[0]&&(c.isSelected=e[12](e[34])),2304&n[0]&&(c.isCopied=e[11](e[34])),l.$set(c)},i(t){c||(U(l.$$.fragment,t),c=!0)},o(t){B(l.$$.fragment,t),c=!1},d(t){t&&f(n),Q(l,t)}}}function Jt(t){let e,n,l=[],c=new Map,i=Object.values(t[39]);const o=t=>t[34].id;for(let e=0;e<i.length;e+=1){let n=At(t,i,e),s=o(n);c.set(s,l[e]=Gt(s,n))}return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=$()},m(t,c){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,c);d(t,e,c),n=!0},p(t,n){792836&n[0]&&(i=Object.values(t[39]),H(),l=G(l,n,o,1,t,i,c,e.parentNode,F,Gt,e,At),D())},i(t){if(!n){for(let t=0;t<i.length;t+=1)U(l[t]);n=!0}},o(t){for(let t=0;t<l.length;t+=1)B(l[t]);n=!1},d(t){for(let e=0;e<l.length;e+=1)l[e].d(t);t&&f(e)}}}function Kt(t){let e,n;return e=new vt({props:{canvasImg:Object.values(t[39])[0].img,canvasNb:t[38],manifest:t[3],$$slots:{default:[Jt]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(t,l){K(e,t,l),n=!0},p(t,n){const l={};256&n[0]&&(l.canvasImg=Object.values(t[39])[0].img),256&n[0]&&(l.canvasNb=t[38]),8&n[0]&&(l.manifest=t[3]),6404&n[0]|131072&n[1]&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Qt(e){let n;return{c(){n=g("tr"),n.textContent="Retrieving paginated regions...",y(n,"class","faded is-center")},m(t,e){d(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function Wt(t){let e;return{c(){e=h("NO ANNOTATION")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function Xt(t,e){let n,l,c;return l=new at({props:{block:e[34],appLang:e[2],isSelected:e[12](e[34]),isCopied:e[11](e[34])}}),l.$on("toggleSelection",e[18]),l.$on("copyRef",e[19]),{key:t,first:null,c(){n=v(),J(l.$$.fragment),this.first=n},m(t,e){d(t,n,e),K(l,t,e),c=!0},p(t,n){e=t;const c={};2&n[0]&&(c.block=e[34]),4&n[0]&&(c.appLang=e[2]),4098&n[0]&&(c.isSelected=e[12](e[34])),2050&n[0]&&(c.isCopied=e[11](e[34])),l.$set(c)},i(t){c||(U(l.$$.fragment,t),c=!0)},o(t){B(l.$$.fragment,t),c=!1},d(t){t&&f(n),Q(l,t)}}}function Yt(t){let e,n,l="en"===t[2]?"No regions in selection":"Aucune région sélectionnée";return{c(){e=g("div"),n=h(l)},m(t,l){d(t,e,l),u(e,n)},p(t,e){4&e[0]&&l!==(l="en"===t[2]?"No regions in selection":"Aucune région sélectionnée")&&x(n,l)},d(t){t&&f(e)}}}function Zt(t){let e,n,l=Object.entries(t[4][t[0]]),c=[];for(let e=0;e<l.length;e+=1)c[e]=te(Ot(t,l,e));return{c(){e=g("div"),n=g("div");for(let t=0;t<c.length;t+=1)c[t].c();y(n,"class","grid is-gap-2"),y(e,"class","fixed-grid has-6-cols")},m(t,l){d(t,e,l),u(e,n);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(n,null)},p(t,e){if(131089&e[0]){let i;for(l=Object.entries(t[4][t[0]]),i=0;i<l.length;i+=1){const o=Ot(t,l,i);c[i]?c[i].p(o,e):(c[i]=te(o),c[i].c(),c[i].m(n,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=l.length}},d(t){t&&f(e),p(c,t)}}}function te(t){let e,n,l,c,i,o,s,a,p,m,v,k,w,L=t[31].title+"";function S(){return t[28](t[30])}return{c(){e=g("div"),n=g("figure"),l=g("img"),i=$(),o=g("div"),s=g("span"),a=h(L),p=$(),m=g("button"),v=$(),r(l.src,c=tt(t[31].img,t[31].xyhw,"96,"))||y(l,"src",c),y(l,"alt","Extracted region"),y(s,"class","overlay-desc"),y(o,"class","overlay is-center svelte-1jta9w9"),y(n,"class","image is-64x64 card"),y(m,"class","delete region-btn"),y(m,"aria-label","remove from selection"),y(e,"class","selection cell svelte-1jta9w9")},m(t,c){d(t,e,c),u(e,n),u(n,l),u(n,i),u(n,o),u(o,s),u(s,a),u(e,p),u(e,m),u(e,v),k||(w=b(m,"click",S),k=!0)},p(e,n){t=e,16&n[0]&&!r(l.src,c=tt(t[31].img,t[31].xyhw,"96,"))&&y(l,"src",c),16&n[0]&&L!==(L=t[31].title+"")&&x(a,L)},d(t){t&&f(e),k=!1,w()}}}function ee(t){let e,n,c,i,o,s,r,a,v,k,w,L,S,N,O,P,A,j,_,C,E,V,T,z,I,M,R,q,F,G,W,X,Y,Z,tt,et,nt,lt,ct,it,ot,st,rt,at,ut,dt,pt,gt,ht,$t="en"===t[2]?"Select all":"Tout sélectionner",vt="en"===t[2]?"Download":"Télecharger",bt="en"===t[2]?"Selected regions":"Regions sélectionnées";function kt(t,e){return t[9]?Et:Ct}e=new ft({props:{addAnimation:t[6],removeAnimation:t[7],selectionLength:t[14],appLang:t[2]}});let yt=kt(t),xt=yt(t);function wt(t,e){return t[9]?Tt:Vt}let Lt=wt(t),St=Lt(t),Nt=t[9]&&zt(t),Ot=Object.entries(t[20]),Pt=[];for(let e=0;e<Ot.length;e+=1)Pt[e]=It(_t(t,Ot,e));const At=[Dt,Ht,Rt,Mt],jt=[];function Ut(t,e){return"all"===t[10]?0:"page"===t[10]?1:"similarity"===t[10]?2:"vectorization"===t[10]?3:-1}function Bt(t,e){return t[13]?Zt:Yt}~(I=Ut(t))&&(M=jt[I]=At[I](t));let qt=Bt(t),Ft=qt(t);return dt=new mt({props:{appLang:t[2]}}),dt.$on("commitSelection",t[15]),{c(){J(e.$$.fragment),n=$(),c=g("div"),i=g("div"),o=g("button"),s=m("svg"),xt.c(),r=$(),St.c(),v=$(),k=g("button"),w=g("i"),L=$(),S=h($t),N=$(),O=g("button"),P=g("i"),A=$(),j=h(vt),_=$(),C=g("div"),Nt&&Nt.c(),E=$(),V=g("div"),T=g("ul");for(let t=0;t<Pt.length;t+=1)Pt[t].c();z=$(),M&&M.c(),R=$(),q=g("div"),F=g("div"),G=$(),W=g("div"),X=g("div"),Y=g("div"),Z=g("i"),tt=$(),et=h(bt),nt=h("\n                ("),lt=g("span"),ct=h(t[14]),it=h(")"),ot=$(),st=g("button"),rt=$(),at=g("section"),Ft.c(),ut=$(),J(dt.$$.fragment),y(s,"xmlns","http://www.w3.org/2000/svg"),y(s,"viewBox","0 0 384 512"),y(s,"class","pr-3"),y(o,"class",a="button "+(t[9]?"is-success":"is-link")+" mr-3"),y(w,"class","fa-solid fa-square-check"),y(k,"class","button is-link is-light mr-3"),y(P,"class","fa-solid fa-download"),y(O,"class","button is-link is-light"),y(i,"class","svelte-1jta9w9"),y(C,"class","edit-action svelte-1jta9w9"),y(c,"class","is-left center-flex actions svelte-1jta9w9"),y(T,"class","panel-tabs"),y(V,"class","tabs is-centered"),y(F,"class","modal-background"),y(Z,"class","fa-solid fa-book-bookmark"),y(lt,"id","selection-count"),y(Y,"class","title is-4 mb-0 media-content"),y(st,"class","delete media-left"),y(st,"aria-label","close"),y(X,"class","modal-card-head media mb-0"),y(at,"class","modal-card-body"),y(W,"class","modal-content"),y(q,"id","selection-modal"),y(q,"class","modal fade"),y(q,"tabindex","-1"),y(q,"aria-labelledby","selection-modal-label"),y(q,"aria-hidden","true")},m(l,a){K(e,l,a),d(l,n,a),d(l,c,a),u(c,i),u(i,o),u(o,s),xt.m(s,null),u(o,r),St.m(o,null),u(i,v),u(i,k),u(k,w),u(k,L),u(k,S),u(i,N),u(i,O),u(O,P),u(O,A),u(O,j),u(c,_),u(c,C),Nt&&Nt.m(C,null),d(l,E,a),d(l,V,a),u(V,T);for(let t=0;t<Pt.length;t+=1)Pt[t]&&Pt[t].m(T,null);d(l,z,a),~I&&jt[I].m(l,a),d(l,R,a),d(l,q,a),u(q,F),u(q,G),u(q,W),u(W,X),u(X,Y),u(Y,Z),u(Y,tt),u(Y,et),u(Y,nt),u(Y,lt),u(lt,ct),u(Y,it),u(X,ot),u(X,st),u(W,rt),u(W,at),Ft.m(at,null),u(W,ut),K(dt,W,null),pt=!0,gt||(ht=[b(o,"click",t[26]),b(k,"click",le),b(O,"click",ce)],gt=!0)},p(t,n){const l={};if(64&n[0]&&(l.addAnimation=t[6]),128&n[0]&&(l.removeAnimation=t[7]),16384&n[0]&&(l.selectionLength=t[14]),4&n[0]&&(l.appLang=t[2]),e.$set(l),yt!==(yt=kt(t))&&(xt.d(1),xt=yt(t),xt&&(xt.c(),xt.m(s,null))),Lt===(Lt=wt(t))&&St?St.p(t,n):(St.d(1),St=Lt(t),St&&(St.c(),St.m(o,null))),(!pt||512&n[0]&&a!==(a="button "+(t[9]?"is-success":"is-link")+" mr-3"))&&y(o,"class",a),(!pt||4&n[0])&&$t!==($t="en"===t[2]?"Select all":"Tout sélectionner")&&x(S,$t),(!pt||4&n[0])&&vt!==(vt="en"===t[2]?"Download":"Télecharger")&&x(j,vt),t[9]?Nt?Nt.p(t,n):(Nt=zt(t),Nt.c(),Nt.m(C,null)):Nt&&(Nt.d(1),Nt=null),1049600&n[0]){let e;for(Ot=Object.entries(t[20]),e=0;e<Ot.length;e+=1){const l=_t(t,Ot,e);Pt[e]?Pt[e].p(l,n):(Pt[e]=It(l),Pt[e].c(),Pt[e].m(T,null))}for(;e<Pt.length;e+=1)Pt[e].d(1);Pt.length=Ot.length}let c=I;I=Ut(t),I===c?~I&&jt[I].p(t,n):(M&&(H(),B(jt[c],1,1,(()=>{jt[c]=null})),D()),~I?(M=jt[I],M?M.p(t,n):(M=jt[I]=At[I](t),M.c()),U(M,1),M.m(R.parentNode,R)):M=null),(!pt||4&n[0])&&bt!==(bt="en"===t[2]?"Selected regions":"Regions sélectionnées")&&x(et,bt),(!pt||16384&n[0])&&x(ct,t[14]),qt===(qt=Bt(t))&&Ft?Ft.p(t,n):(Ft.d(1),Ft=qt(t),Ft&&(Ft.c(),Ft.m(at,null)));const i={};4&n[0]&&(i.appLang=t[2]),dt.$set(i)},i(t){pt||(U(e.$$.fragment,t),U(M),U(dt.$$.fragment,t),pt=!0)},o(t){B(e.$$.fragment,t),B(M),B(dt.$$.fragment,t),pt=!1},d(t){Q(e,t),t&&f(n),t&&f(c),xt.d(),St.d(),Nt&&Nt.d(),t&&f(E),t&&f(V),p(Pt,t),t&&f(z),~I&&jt[I].d(t),t&&f(R),t&&f(q),Ft.d(),Q(dt),gt=!1,l(ht)}}}async function ne(t){const e=SAS_APP_URL.replace("https","http"),n=`${SAS_APP_URL}/annotation/destroy?uri=${e}/annotation/${t}`,l=await fetch(n,{method:"DELETE"});if(204!==l.status)throw new Error(`Failed to delete ${n} due to ${l.status}: '${l.statusText}'`);alert(`Region ${t} deleted successfully!`)}const le=()=>null,ce=()=>null,ie=()=>null;function oe(t,e,n){let l,c,i,o,s,r,a,u,d,f,p=!1,g=!1;const m="Regions";let{regions:h={}}=e,{appLang:$="en"}=e,{manifest:v=""}=e,{imgPrefix:b=""}=e,{nbOfPages:k=1}=e,y=JSON.parse(localStorage.getItem("documentSet"))??{};function x(t){n(4,y=function(t,e,n){const{[e]:l,...c}=t[n];return t[n]=c,Z(t),t}(y,t,m)),n(7,g=!0),setTimeout((()=>n(7,g=!1)),300)}function w(t){n(4,y=function(t,e){return t.hasOwnProperty(e.type)||(t[e.type]=[]),t[e.type]={...t[e.type],[e.id]:e},Z(t),t}(y,t)),n(6,p=!0),setTimeout((()=>n(6,p=!1)),300)}const L={all:{text:"en"===$?"All regions":"Toutes les régions"},page:{text:"en"===$?"Per page":"Par page"},similarity:{text:"en"===$?"Similarity":"Similarité"},vectorization:{text:"en"===$?"Vectorization":"Vectorisation"}};return t.$$set=t=>{"regions"in t&&n(1,h=t.regions),"appLang"in t&&n(2,$=t.appLang),"manifest"in t&&n(3,v=t.manifest),"imgPrefix"in t&&n(22,b=t.imgPrefix),"nbOfPages"in t&&n(23,k=t.nbOfPages)},t.$$.update=()=>{16&t.$$.dirty[0]&&n(14,l=y.hasOwnProperty(m)?Object.keys(y[m]).length:0),16&t.$$.dirty[0]&&n(12,c=t=>y[m]?.hasOwnProperty(t.id)),16&t.$$.dirty[0]&&n(13,i=Object.keys(y[m]??{}).length>0),33554432&t.$$.dirty[0]&&n(11,s=t=>o===t.ref),16777248&t.$$.dirty[0]&&n(8,f=(async()=>{const t=await fetch(`${u}canvas?p=${d}`);return await t.json()})())},n(25,o=""),n(10,r="all"),n(9,a=!1),n(24,u=`${window.location.origin}${window.location.pathname}`),n(5,d=parseInt(new URLSearchParams(window.location.search).get("p"))??1),[m,h,$,v,y,d,p,g,f,a,r,s,c,i,l,function(t){const{updateType:e}=t.detail;"clear"===e?n(4,y=function(t,e){return e.map((e=>!t.hasOwnProperty(e)||delete t[e])),Z(t),t}(y,[m])):"save"===e&&n(4,y=function(t){return console.log(t),t}(y))},async function(){for(const t of Object.keys(y))try{if(!h.hasOwnProperty(t))continue;await ne(t),delete h[t],delete y[t]}catch(e){console.error(`Failed to delete region ${t}:`,e)}},x,function(t){const{block:e}=t.detail;c(e)?x(e.id):w(e)},function(t){const{block:e}=t.detail,l=s(e)?"":e.ref;navigator.clipboard.writeText(l),n(25,o=l)},L,function(t){const{pageNb:e}=t.detail;n(5,d=e);const l=new URL(u);l.searchParams.set("p",d),window.history.pushState({},"",l)},b,k,u,o,()=>n(9,a=!a),t=>n(10,r=t),t=>x(t)]}const se=(re="regions-data",document.getElementById(re)?JSON.parse(document.getElementById(re).textContent):[]);var re;return new class extends Y{constructor(t){super(),X(this,t,oe,ee,i,{regionsType:0,regions:1,appLang:2,manifest:3,imgPrefix:22,nbOfPages:23},null,[-1,-1])}get regionsType(){return this.$$.ctx[0]}}({target:document.getElementById("region-list"),props:{regions:se,regionsType:"Regions",appLang:APP_LANG,manifest:manifest,imgPrefix:img_prefix}})}();
//# sourceMappingURL=regionList.js.map
