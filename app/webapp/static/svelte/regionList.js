var regionList=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(n)}function s(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let l;function c(e,t){return l||(l=document.createElement("a")),l.href=t,e===l.href}function a(t,...n){if(null==t)return e;const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function u(e,t,n){e.$$.on_destroy.push(a(t,n))}function d(e,t,n,i){return e[1]&&i?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}const f="undefined"!=typeof window;let g=f?()=>window.performance.now():()=>Date.now(),p=f?e=>requestAnimationFrame(e):e;const m=new Set;function h(e){m.forEach((t=>{t.c(e)||(m.delete(t),t.f())})),0!==m.size&&p(h)}function $(e,t){e.appendChild(t)}function b(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function v(e){const t=x("style");return function(e,t){$(e.head||e,t),t.sheet}(b(e),t),t.sheet}function y(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode&&e.parentNode.removeChild(e)}function k(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function x(e){return document.createElement(e)}function L(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function E(e){return document.createTextNode(e)}function S(){return E(" ")}function O(){return E("")}function R(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function P(e){return function(t){return t.preventDefault(),e.call(this,t)}}function C(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e,t){t=""+t,e.data!==t&&(e.data=t)}function I(e,t,n){e.classList[n?"add":"remove"](t)}function T(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,i,t),o}const j=new Map;let A,V=0;function N(e,t,n,i,o,s,r,l=0){const c=16.666/i;let a="{\n";for(let e=0;e<=1;e+=c){const i=t+(n-t)*s(e);a+=100*e+`%{${r(i,1-i)}}\n`}const u=a+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${l}`,f=b(e),{stylesheet:g,rules:p}=j.get(f)||function(e,t){const n={stylesheet:v(t),rules:{}};return j.set(e,n),n}(f,e);p[d]||(p[d]=!0,g.insertRule(`@keyframes ${d} ${u}`,g.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${i}ms linear ${o}ms 1 both`,V+=1,d}function z(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-i.length;o&&(e.style.animation=i.join(", "),V-=o,V||p((()=>{V||(j.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&w(t)})),j.clear())})))}function M(e){A=e}function q(){if(!A)throw new Error("Function called outside component initialization");return A}const U=[],H=[];let D=[];const B=[],F=Promise.resolve();let J=!1;function X(e){D.push(e)}const K=new Set;let G,Y=0;function Q(){if(0!==Y)return;const e=A;do{try{for(;Y<U.length;){const e=U[Y];Y++,M(e),W(e.$$)}}catch(e){throw U.length=0,Y=0,e}for(M(null),U.length=0,Y=0;H.length;)H.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];K.has(t)||(K.add(t),t())}D.length=0}while(U.length);for(;B.length;)B.pop()();J=!1,K.clear(),M(e)}function W(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(X)}}function Z(e,t,n){e.dispatchEvent(T(`${t?"intro":"outro"}${n}`))}const ee=new Set;let te;function ne(){te={r:0,c:[],p:te}}function ie(){te.r||o(te.c),te=te.p}function oe(e,t){e&&e.i&&(ee.delete(e),e.i(t))}function se(e,t,n,i){if(e&&e.o){if(ee.has(e))return;ee.add(e),te.c.push((()=>{ee.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}const re={duration:0};function le(n,i,r,l){const c={direction:"both"};let a=i(n,r,c),u=l?0:1,d=null,f=null,$=null;function b(){$&&z(n,$)}function v(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function y(i){const{delay:s=0,duration:r=300,easing:l=t,tick:c=e,css:y}=a||re,w={start:g()+s,b:i};i||(w.group=te,te.r+=1),d||f?f=w:(y&&(b(),$=N(n,u,i,r,s,l,y)),i&&c(0,1),d=v(w,r),X((()=>Z(n,i,"start"))),function(e){let t;0===m.size&&p(h),new Promise((n=>{m.add(t={c:e,f:n})}))}((e=>{if(f&&e>f.start&&(d=v(f,r),f=null,Z(n,d.b,"start"),y&&(b(),$=N(n,u,d.b,d.duration,0,l,a.css))),d)if(e>=d.end)c(u=d.b,1-u),Z(n,d.b,"end"),f||(d.b?b():--d.group.r||o(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;u=d.a+d.d*l(t/d.duration),c(u,1-u)}return!(!d&&!f)})))}return{run(e){s(a)?(G||(G=Promise.resolve(),G.then((()=>{G=null}))),G).then((()=>{a=a(c),y(e)})):y(e)},end(){b(),d=f=null}}}function ce(e,t){const n=t.token={};function i(e,i,o,s){if(t.token!==n)return;t.resolved=s;let r=t.ctx;void 0!==o&&(r=r.slice(),r[o]=s);const l=e&&(t.current=e)(r);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==i&&e&&(ne(),se(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),ie())})):t.block.d(1),l.c(),oe(l,1),l.m(t.mount(),t.anchor),c=!0),t.block=l,t.blocks&&(t.blocks[i]=l),c&&Q()}if(!(o=e)||"object"!=typeof o&&"function"!=typeof o||"function"!=typeof o.then){if(t.current!==t.then)return i(t.then,1,t.value,e),!0;t.resolved=e}else{const n=q();if(e.then((e=>{M(n),i(t.then,1,t.value,e),M(null)}),(e=>{if(M(n),i(t.catch,2,t.error,e),M(null),!t.hasCatch)throw e})),t.current!==t.pending)return i(t.pending,0),!0}var o}function ae(e,t,n){const i=t.slice(),{resolved:o}=e;e.current===e.then&&(i[e.value]=o),e.current===e.catch&&(i[e.error]=o),e.block.p(i,n)}function ue(e,t){se(e,1,1,(()=>{t.delete(e.key)}))}function de(e,t,n,i,s,r,l,c,a,u,d,f){let g=e.length,p=r.length,m=g;const h={};for(;m--;)h[e[m].key]=m;const $=[],b=new Map,v=new Map,y=[];for(m=p;m--;){const e=f(s,r,m),o=n(e);let c=l.get(o);c?i&&y.push((()=>c.p(e,t))):(c=u(o,e),c.c()),b.set(o,$[m]=c),o in h&&v.set(o,Math.abs(m-h[o]))}const w=new Set,k=new Set;function x(e){oe(e,1),e.m(c,d),l.set(e.key,e),d=e.first,p--}for(;g&&p;){const t=$[p-1],n=e[g-1],i=t.key,o=n.key;t===n?(d=t.first,g--,p--):b.has(o)?!l.has(i)||w.has(i)?x(t):k.has(o)?g--:v.get(i)>v.get(o)?(k.add(i),x(t)):(w.add(o),g--):(a(n,l),g--)}for(;g--;){const t=e[g];b.has(t.key)||a(t,l)}for(;p;)x($[p-1]);return o(y),$}function fe(e){e&&e.c()}function ge(e,t,i,r){const{fragment:l,after_update:c}=e.$$;l&&l.m(t,i),r||X((()=>{const t=e.$$.on_mount.map(n).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...t):o(t),e.$$.on_mount=[]})),c.forEach(X)}function pe(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];D.forEach((i=>-1===e.indexOf(i)?t.push(i):n.push(i))),n.forEach((e=>e())),D=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function me(e,t){-1===e.$$.dirty[0]&&(U.push(e),J||(J=!0,F.then(Q)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function he(t,n,s,r,l,c,a,u=[-1]){const d=A;M(t);const f=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:l,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(f.root);let g=!1;if(f.ctx=s?s(t,n.props||{},((e,n,...i)=>{const o=i.length?i[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),g&&me(t,e)),n})):[],f.update(),g=!0,o(f.before_update),f.fragment=!!r&&r(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(w)}else f.fragment&&f.fragment.c();n.intro&&oe(t.$$.fragment),ge(t,n.target,n.anchor,n.customElement),Q()}M(d)}class $e{$destroy(){pe(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const e=i.indexOf(n);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const be=[];function ve(t,n=e){let i;const o=new Set;function s(e){if(r(t,e)&&(t=e,i)){const e=!be.length;for(const e of o)e[1](),be.push(e,t);if(e){for(let e=0;e<be.length;e+=2)be[e][0](be[e+1]);be.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(r,l=e){const c=[r,l];return o.add(c),1===o.size&&(i=n(s)||e),r(t),()=>{o.delete(c),0===o.size&&i&&(i(),i=null)}}}}function ye(t,n,i){const r=!Array.isArray(t),l=r?[t]:t,c=n.length<2;return u=t=>{let i=!1;const u=[];let d=0,f=e;const g=()=>{if(d)return;f();const i=n(r?u[0]:u,t);c?t(i):f=s(i)?i:e},p=l.map(((e,t)=>a(e,(e=>{u[t]=e,d&=~(1<<t),i&&g()}),(()=>{d|=1<<t}))));return i=!0,g(),function(){o(p),f(),i=!1}},{subscribe:ve(i,u).subscribe};var u}const we=ve(!1);async function ke(e){we.set(!0);try{return await e()}finally{we.set(!1)}}function xe(e=null,t="full",n="full"){if(!e)return"https://via.placeholder.com/96x96?text=No+Image";if((e=e.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const i=e[e.length-1].includes(",")?e.pop().replace(".jpg",""):t,o=e.join("_").replace(".jpg","");return`${CANTALOUPE_APP_URL??"http://localhost:8182"}/iiif/2/${o}.jpg/${i}/${n}/0/default.jpg`}function Le(e=null,t=1){return`${SAS_APP_URL??"http://localhost:3000"}/index.html?iiif-content=${e}&canvas=${t}`}function Ee(e,t=null,n=!1){return new Promise((i=>{if(document.getElementById("msg-modal")){n?document.getElementById("modal-footer").hidden=!1:i(void 0),t&&(document.getElementById("modal-title").textContent=t),document.getElementById("modal-body").textContent=e,document.getElementById("hidden-msg-btn").click();const o=document.getElementById("cancel-btn"),s=document.getElementById("ok-btn"),r=document.getElementById("modal-bkg"),l=()=>{o.removeEventListener("click",c),r.removeEventListener("click",c),s.removeEventListener("click",a),document.getElementById("modal-footer").hidden=!0},c=()=>{l(),i(!1)},a=()=>{l(),i(!0)};o.addEventListener("click",c),s.addEventListener("click",a)}else n?i(window.confirm(e)):(window.alert(e),i(void 0))}))}const Se="Regions";const Oe=function(){const e=ve(JSON.parse(localStorage.getItem("documentSet"))||{}),{subscribe:t,get:n,update:i}=e;function o(e){localStorage.setItem("documentSet",JSON.stringify(e))}function s(e,t=!0){return t?e[Se]??{}:Object.entries(e).filter((([e,t])=>e!==Se))}function r(e,t,n){if(e[n]){const{[t]:i,...o}=e[n];e={...e,[n]:o}}return o(e),e}function l(e,t){return e.hasOwnProperty(t.type)||(e[t.type]={}),e[t.type]={...e[t.type],[t.id]:t},o(e),e}return{subscribe:t,save:()=>i((e=>(console.log(e),e))),empty:e=>i((t=>(e?delete t[Se]:Object.keys(t).forEach((e=>{e!==Se&&delete t[e]})),o(t),t))),addAll:e=>i((t=>function(e,t){return t.forEach((t=>{e[t.type]||(e[t.type]={}),e[t.type][t.id]=t})),o(e),e}(t,e))),removeAll:(e,t)=>i((n=>function(e,t,n){return e[n]?(t.forEach((t=>{delete e[n][t]})),o(e),e):e}(n,e,t))),remove:(e,t)=>i((n=>r(n,e,t))),add:e=>i((t=>l(t,e))),toggle:e=>i((t=>t[e.type]?.[e.id]?r(t,e.id,e.type):l(t,e))),toggleAll:(e,t,n)=>i((e=>{})),isSelected:ye(e,(e=>t=>e[t.type]?.hasOwnProperty(t.id)||!1)),selected:ye(e,(e=>t=>s(e,t))),nbSelected:ye(e,(e=>t=>{const n=s(e,t);return t?Object.keys(n).length:n.reduce(((e,[t,n])=>e+Object.keys(n).length),0)}))}}();const Re=function(){const e=ve(1),t=ve({}),n=ve({}),i=`${window.location.origin}${window.location.pathname}`;if("undefined"!=typeof window){const t=new URLSearchParams(window.location.search).get("p");t&&e.set(parseInt(t))}const o=(async()=>{const e=await fetch(`${i}canvas`),n=await e.json();let o={};return Object.values(n).forEach((e=>{Object.entries(e).forEach((([e,t])=>{o[e]=t}))})),t.set(o),n})(),s=ye(e,(e=>(async()=>{const t=await fetch(`${i}canvas?p=${e}`),o=await t.json();return n.set(o),o})()));return{currentPage:e,pageRegions:n,allRegions:t,fetchPages:s,fetchAll:o,handlePageUpdate:function(t){if(e.set(t),"undefined"!=typeof window){const e=new URL(window.location.href);e.searchParams.set("p",t),window.history.pushState({},"",e)}},remove:function(e){t.update((t=>(delete t[e],{...t}))),n.update((t=>{for(const n in t)if(t[n][e]){const{[e]:i,...o}=t[n];return t[n]=o,t}return t}))}}}();function Pe(e,{delay:n=0,duration:i=400,easing:o=t}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:i,easing:o,css:e=>"opacity: "+e*s}}function Ce(e){let t,n,i;return{c(){t=x("div"),t.innerHTML='<div class="loader svelte-vizlcg"></div>',C(t,"class","bkg-shade svelte-vizlcg")},m(e,n){y(e,t,n),i=!0},i(e){i||(X((()=>{i&&(n||(n=le(t,Pe,{duration:150},!0)),n.run(1))})),i=!0)},o(e){n||(n=le(t,Pe,{duration:150},!1)),n.run(0),i=!1},d(e){e&&w(t),e&&n&&n.end()}}}function _e(e){let t,n,i=e[0]&&Ce();return{c(){i&&i.c(),t=O()},m(e,o){i&&i.m(e,o),y(e,t,o),n=!0},p(e,[n]){e[0]?i?1&n&&oe(i,1):(i=Ce(),i.c(),oe(i,1),i.m(t.parentNode,t)):i&&(ne(),se(i,1,1,(()=>{i=null})),ie())},i(e){n||(oe(i),n=!0)},o(e){se(i),n=!1},d(e){i&&i.d(e),e&&w(t)}}}function Ie(e,t,n){let{visible:i=!1}=t;return e.$$set=e=>{"visible"in e&&n(0,i=e.visible)},[i]}class Te extends $e{constructor(e){super(),he(this,e,Ie,_e,r,{visible:0})}}function je(e){let t;return{c(){t=L("path"),C(t,"d","M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"),C(t,"class","svelte-1fqh2ri")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function Ae(e){let t;return{c(){t=L("path"),C(t,"d","M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"),C(t,"class","svelte-1fqh2ri")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function Ve(e){let t,n="en"===e[2]?"Copy ID":"Copier l'ID";return{c(){t=E(n)},m(e,n){y(e,t,n)},p(e,i){4&i&&n!==(n="en"===e[2]?"Copy ID":"Copier l'ID")&&_(t,n)},d(e){e&&w(t)}}}function Ne(e){let t,n="en"===e[2]?"Copied!":"Copié !";return{c(){t=E(n)},m(e,n){y(e,t,n)},p(e,i){4&i&&n!==(n="en"===e[2]?"Copied!":"Copié !")&&_(t,n)},d(e){e&&w(t)}}}function ze(e){let t,n,i,s,r,l,a,u,d,f,g,p,m,h,b,v,k,O,P,I=e[0].title+"";function T(e,t){return e[1]?Ae:je}let j=T(e),A=j(e);function V(e,t){return e[1]?Ne:Ve}let N=V(e),z=N(e);return{c(){t=x("div"),n=x("figure"),i=x("img"),r=S(),l=x("div"),a=x("span"),u=E(I),f=S(),g=x("button"),p=L("svg"),A.c(),m=S(),h=x("span"),z.c(),c(i.src,s=xe(e[0].img,e[0].xyhw,e[3]?"96,":"140,"))||C(i,"src",s),C(i,"alt","Extracted region"),C(a,"class","overlay-desc"),C(l,"class","overlay is-center svelte-1fqh2ri"),C(n,"class",d="image card "+(e[3]?"is-96x96":"")+" svelte-1fqh2ri"),C(n,"tabindex","-1"),C(p,"xmlns","http://www.w3.org/2000/svg"),C(p,"viewBox","0 0 384 512"),C(p,"class","svelte-1fqh2ri"),C(h,"class","tooltip svelte-1fqh2ri"),C(g,"class","button region-btn tag svelte-1fqh2ri"),C(t,"class",b="region image is-center "+(e[4](e[0])?"checked":"")+" svelte-1fqh2ri")},m(o,s){y(o,t,s),$(t,n),$(n,i),$(n,r),$(n,l),$(l,a),$(a,u),$(t,f),$(t,g),$(g,p),A.m(p,null),$(g,m),$(g,h),z.m(h,null),k=!0,O||(P=[R(n,"click",e[7]),R(n,"keyup",Me),R(g,"click",e[8])],O=!0)},p(e,[o]){(!k||9&o&&!c(i.src,s=xe(e[0].img,e[0].xyhw,e[3]?"96,":"140,")))&&C(i,"src",s),(!k||1&o)&&I!==(I=e[0].title+"")&&_(u,I),(!k||8&o&&d!==(d="image card "+(e[3]?"is-96x96":"")+" svelte-1fqh2ri"))&&C(n,"class",d),j!==(j=T(e))&&(A.d(1),A=j(e),A&&(A.c(),A.m(p,null))),N===(N=V(e))&&z?z.p(e,o):(z.d(1),z=N(e),z&&(z.c(),z.m(h,null))),(!k||17&o&&b!==(b="region image is-center "+(e[4](e[0])?"checked":"")+" svelte-1fqh2ri"))&&C(t,"class",b)},i(e){k||(X((()=>{k&&(v||(v=le(t,Pe,{duration:500},!0)),v.run(1))})),k=!0)},o(e){v||(v=le(t,Pe,{duration:500},!1)),v.run(0),k=!1},d(e){e&&w(t),A.d(),z.d(),e&&v&&v.end(),O=!1,o(P)}}}const Me=()=>null;function qe(e,t,n){let i;const{isSelected:o}=Oe;u(e,o,(e=>n(4,i=e)));const s=function(){const e=q();return(t,n,{cancelable:i=!1}={})=>{const o=e.$$.callbacks[t];if(o){const s=T(t,n,{cancelable:i});return o.slice().forEach((t=>{t.call(e,s)})),!s.defaultPrevented}return!0}}();let{item:r}=t,{isCopied:l=!1}=t,{appLang:c="en"}=t,{isSquare:a=!0}=t;function d(){s("copyRef",{item:r})}return e.$$set=e=>{"item"in e&&n(0,r=e.item),"isCopied"in e&&n(1,l=e.isCopied),"appLang"in e&&n(2,c=e.appLang),"isSquare"in e&&n(3,a=e.isSquare)},[r,l,c,a,i,o,d,()=>Oe.toggle(r),()=>d()]}class Ue extends $e{constructor(e){super(),he(this,e,qe,ze,r,{item:0,isCopied:1,appLang:2,isSquare:3})}}function He(t){let n,i,o,s,r,l,c,a,u,d="en"===t[1]?"Selection":"Sélection";return{c(){n=x("div"),i=x("button"),o=x("span"),s=x("i"),r=S(),l=E(d),c=E("\n            ("),a=E(t[0]),u=E(")"),C(s,"class","fa-solid fa-book-bookmark"),C(o,"id","btn-content"),C(i,"id","set-btn"),C(i,"class","button px-5 py-4 is-link js-modal-trigger svelte-hs48f9"),C(i,"data-target","selection-modal"),C(n,"class","set-container svelte-hs48f9")},m(e,t){y(e,n,t),$(n,i),$(i,o),$(o,s),$(o,r),$(o,l),$(o,c),$(o,a),$(o,u)},p(e,[t]){2&t&&d!==(d="en"===e[1]?"Selection":"Sélection")&&_(l,d),1&t&&_(a,e[0])},i:e,o:e,d(e){e&&w(n)}}}function De(e,t,n){let{selectionLength:i=0}=t,{appLang:o="en"}=t,s=i;return e.$$set=e=>{"selectionLength"in e&&n(0,i=e.selectionLength),"appLang"in e&&n(1,o=e.appLang)},e.$$.update=()=>{if(5&e.$$.dirty&&i!==s){const e=i>s;n(2,s=i);const t=document.getElementById("btn-content");t&&t.animate([{transform:e?"translateY(-7px)":"translateX(-5px)"},{transform:e?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[i,o,s]}class Be extends $e{constructor(e){super(),he(this,e,De,He,r,{selectionLength:0,appLang:1})}}function Fe(t){let n,i,s,r,l,c,a,u,d,f,g,p="en"===t[0]?"Clear selection":"Vider la sélection",m="en"===t[0]?"Save selection":"Sauvegarder la sélection";return{c(){n=x("footer"),i=x("div"),s=x("button"),r=E(p),l=S(),c=x("button"),a=x("i"),u=S(),d=E(m),C(s,"class","button is-link is-light"),C(a,"class","fa-solid fa-floppy-disk"),C(c,"class","button is-link"),C(i,"class","buttons"),C(n,"class","modal-card-foot is-center")},m(e,o){y(e,n,o),$(n,i),$(i,s),$(s,r),$(i,l),$(i,c),$(c,a),$(c,u),$(c,d),f||(g=[R(s,"click",t[2]),R(c,"click",t[3])],f=!0)},p(e,[t]){1&t&&p!==(p="en"===e[0]?"Clear selection":"Vider la sélection")&&_(r,p),1&t&&m!==(m="en"===e[0]?"Save selection":"Sauvegarder la sélection")&&_(d,m)},i:e,o:e,d(e){e&&w(n),f=!1,o(g)}}}function Je(e,t,n){let{appLang:i="en"}=t,{isRegion:o=!0}=t;return e.$$set=e=>{"appLang"in e&&n(0,i=e.appLang),"isRegion"in e&&n(1,o=e.isRegion)},[i,o,()=>Oe.empty(o),()=>Oe.save()]}class Xe extends $e{constructor(e){super(),he(this,e,Je,Fe,r,{appLang:0,isRegion:1})}}function Ke(e){let t,n,i,o,s,r,l,a,u,f,g,p,m,h,b,v,k,L;const O=e[4].default,R=function(e,t,n,i){if(e){const o=d(e,t,n,i);return e[0](o)}}(O,e,e[3],null);return{c(){var d,$,y,w;t=x("tr"),n=x("th"),i=x("div"),o=x("img"),l=S(),a=x("div"),u=x("a"),f=x("i"),g=E("\n                    Page "),p=E(e[0]),h=S(),b=x("td"),v=x("div"),k=x("div"),R&&R.c(),c(o.src,s=xe(e[1],"full","250,"))||C(o,"src",s),C(o,"alt",r="Canvas "+e[0]),C(o,"class","mb-3 card"),C(f,"class","fa-solid fa-pen-to-square"),C(u,"class","tag px-2 py-1 is-rounded"),C(u,"href",m=Le(e[2],e[0])),C(u,"target","_blank"),C(a,"class","is-center mb-1"),C(i,"class","content-wrapper py-5"),C(n,"class","is-3 center-flex is-narrow"),d=n,$="width",null==(y="260px")?d.style.removeProperty($):d.style.setProperty($,y,w?"important":""),C(k,"class","grid is-gap-2"),C(v,"class","fixed-grid has-6-cols"),C(b,"class","p-5 is-fullwidth")},m(e,s){y(e,t,s),$(t,n),$(n,i),$(i,o),$(i,l),$(i,a),$(a,u),$(u,f),$(u,g),$(u,p),$(t,h),$(t,b),$(b,v),$(v,k),R&&R.m(k,null),L=!0},p(e,[t]){(!L||2&t&&!c(o.src,s=xe(e[1],"full","250,")))&&C(o,"src",s),(!L||1&t&&r!==(r="Canvas "+e[0]))&&C(o,"alt",r),(!L||1&t)&&_(p,e[0]),(!L||5&t&&m!==(m=Le(e[2],e[0])))&&C(u,"href",m),R&&R.p&&(!L||8&t)&&function(e,t,n,i,o,s){if(o){const r=d(t,n,i,s);e.p(r,o)}}(R,O,e,e[3],L?function(e,t,n,i){if(e[2]&&i){const o=e[2](i(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|o[i];return e}return t.dirty|o}return t.dirty}(O,e[3],t,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[3]),null)},i(e){L||(oe(R,e),L=!0)},o(e){se(R,e),L=!1},d(e){e&&w(t),R&&R.d(e)}}}function Ge(e,t,n){let{$$slots:i={},$$scope:o}=t,{canvasNb:s}=t,{canvasImg:r}=t,{manifest:l}=t;return e.$$set=e=>{"canvasNb"in e&&n(0,s=e.canvasNb),"canvasImg"in e&&n(1,r=e.canvasImg),"manifest"in e&&n(2,l=e.manifest),"$$scope"in e&&n(3,o=e.$$scope)},[s,r,l,o,i]}class Ye extends $e{constructor(e){super(),he(this,e,Ge,Ke,r,{canvasNb:0,canvasImg:1,manifest:2})}}function Qe(e){let t,n,i,o,s,r,l=e[0]-1>1&&We(e);return{c(){t=x("li"),n=x("a"),n.textContent="1",i=S(),l&&l.c(),o=O(),C(n,"class","pagination-link"),C(n,"href",null)},m(c,a){y(c,t,a),$(t,n),y(c,i,a),l&&l.m(c,a),y(c,o,a),s||(r=R(n,"click",P(e[4])),s=!0)},p(e,t){e[0]-1>1?l?l.p(e,t):(l=We(e),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},d(e){e&&w(t),e&&w(i),l&&l.d(e),e&&w(o),s=!1,r()}}}function We(e){let t,n,i,o,s,r,l,c=e[0]-1+"";return{c(){t=x("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>',n=S(),i=x("li"),o=x("a"),s=E(c),C(o,"class","pagination-link"),C(o,"href",null)},m(c,a){y(c,t,a),y(c,n,a),y(c,i,a),$(i,o),$(o,s),r||(l=R(o,"click",P(e[5])),r=!0)},p(e,t){1&t&&c!==(c=e[0]-1+"")&&_(s,c)},d(e){e&&w(t),e&&w(n),e&&w(i),r=!1,l()}}}function Ze(e){let t,n,i,o,s,r=e[0]+1<e[2]&&et(e);return{c(){r&&r.c(),t=S(),n=x("li"),i=x("a"),i.textContent=`${e[2]}`,C(i,"class","pagination-link"),C(i,"href",null)},m(l,c){r&&r.m(l,c),y(l,t,c),y(l,n,c),$(n,i),o||(s=R(i,"click",P(e[8])),o=!0)},p(e,n){e[0]+1<e[2]?r?r.p(e,n):(r=et(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(e){r&&r.d(e),e&&w(t),e&&w(n),o=!1,s()}}}function et(e){let t,n,i,o,s,r,l,c=e[0]+1+"";return{c(){t=x("li"),n=x("a"),i=E(c),o=S(),s=x("li"),s.innerHTML='<span class="pagination-ellipsis">…</span>',C(n,"class","pagination-link"),C(n,"href",null)},m(c,a){y(c,t,a),$(t,n),$(n,i),y(c,o,a),y(c,s,a),r||(l=R(n,"click",P(e[7])),r=!0)},p(e,t){1&t&&c!==(c=e[0]+1+"")&&_(i,c)},d(e){e&&w(t),e&&w(o),e&&w(s),r=!1,l()}}}function tt(t){let n,i=t[2]>1&&function(e){let t,n,i,o,s,r,l,c,a,u=e[0]>1&&Qe(e),d=e[0]<e[2]&&Ze(e);return{c(){t=x("nav"),n=x("ul"),u&&u.c(),i=S(),o=x("li"),s=x("a"),r=E(e[0]),l=S(),d&&d.c(),C(s,"class","pagination-link is-current"),C(s,"href",null),C(n,"class","pagination-list"),C(t,"class","pagination is-centered"),C(t,"aria-label","pagination")},m(f,g){y(f,t,g),$(t,n),u&&u.m(n,null),$(n,i),$(n,o),$(o,s),$(s,r),$(n,l),d&&d.m(n,null),c||(a=R(s,"click",P(e[6])),c=!0)},p(e,t){e[0]>1?u?u.p(e,t):(u=Qe(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),1&t&&_(r,e[0]),e[0]<e[2]?d?d.p(e,t):(d=Ze(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&w(t),u&&u.d(),d&&d.d(),c=!1,a()}}}(t);return{c(){i&&i.c(),n=O()},m(e,t){i&&i.m(e,t),y(e,n,t)},p(e,[t]){e[2]>1&&i.p(e,t)},i:e,o:e,d(e){i&&i.d(e),e&&w(n)}}}function nt(e,t,n){let i;const{currentPage:o}=Re;u(e,o,(e=>n(0,i=e)));let{nbOfPages:s}=t;const r=Math.ceil(s/50);return e.$$set=e=>{"nbOfPages"in e&&n(3,s=e.nbOfPages)},[i,o,r,s,()=>Re.handlePageUpdate(1),()=>Re.handlePageUpdate(i-1),()=>Re.handlePageUpdate(i),()=>Re.handlePageUpdate(i+1),()=>Re.handlePageUpdate(r)]}class it extends $e{constructor(e){super(),he(this,e,nt,tt,r,{nbOfPages:3})}}function ot(t){let n,i,o,s,r,l,c,a,u,d,f,g,p,m,h,b,v="en"===t[0]?"Cancel":"Annuler";return{c(){n=x("button"),i=S(),o=x("div"),s=x("div"),r=S(),l=x("div"),c=x("div"),c.innerHTML='<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div> \n            <button class="delete media-left" aria-label="close"></button>',a=S(),u=x("section"),d=S(),f=x("footer"),g=x("div"),p=x("button"),m=E(v),h=S(),b=x("button"),b.textContent="OK",C(n,"id","hidden-msg-btn"),C(n,"class","js-modal-trigger"),C(n,"data-target","msg-modal"),n.hidden=!0,C(s,"id","modal-bkg"),C(s,"class","modal-background"),C(c,"class","modal-card-head media mb-0"),C(u,"id","modal-body"),C(u,"class","modal-card-body"),C(p,"id","cancel-btn"),C(p,"class","button is-link is-light"),C(b,"id","ok-btn"),C(b,"class","button is-link"),C(g,"class","buttons"),C(f,"id","modal-footer"),C(f,"class","modal-card-foot is-center pt-3"),f.hidden=!0,C(l,"class","modal-content"),C(o,"id","msg-modal"),C(o,"class","modal fade"),C(o,"tabindex","-1"),C(o,"aria-labelledby","selection-modal-label"),C(o,"aria-hidden","true")},m(e,t){y(e,n,t),y(e,i,t),y(e,o,t),$(o,s),$(o,r),$(o,l),$(l,c),$(l,a),$(l,u),$(l,d),$(l,f),$(f,g),$(g,p),$(p,m),$(g,h),$(g,b)},p(e,[t]){1&t&&v!==(v="en"===e[0]?"Cancel":"Annuler")&&_(m,v)},i:e,o:e,d(e){e&&w(n),e&&w(i),e&&w(o)}}}function st(e,t,n){let{appLang:i="en"}=t;return e.$$set=e=>{"appLang"in e&&n(0,i=e.appLang)},[i]}class rt extends $e{constructor(e){super(),he(this,e,st,ot,r,{appLang:0})}}function lt(e){let t,n,i="en"===e[0]?"Automatic region extraction":"Extraction automatique des régions";return{c(){t=x("button"),n=E(i),C(t,"class","button is-link is-inverted")},m(e,i){y(e,t,i),$(t,n)},p(e,t){1&t&&i!==(i="en"===e[0]?"Automatic region extraction":"Extraction automatique des régions")&&_(n,i)},d(e){e&&w(t)}}}function ct(t){let n,i,o,s,r,l,c,a,u,d="en"===t[0]?"Manually annotate":"Annoter manuellement",f="en"===t[0]?"Import regions file":"Importer un fichier de région",g=t[1].includes("regions"),p=g&&lt(t);return{c(){n=x("div"),i=x("button"),o=E(d),s=S(),r=x("button"),l=E(f),c=S(),p&&p.c(),C(i,"class","button is-link"),C(r,"class","button is-link is-light"),C(n,"class","is-center buttons is-centered pt-5")},m(e,d){y(e,n,d),$(n,i),$(i,o),$(n,s),$(n,r),$(r,l),$(n,c),p&&p.m(n,null),a||(u=R(i,"click",t[2]),a=!0)},p(e,[t]){1&t&&d!==(d="en"===e[0]?"Manually annotate":"Annoter manuellement")&&_(o,d),1&t&&f!==(f="en"===e[0]?"Import regions file":"Importer un fichier de région")&&_(l,f),2&t&&(g=e[1].includes("regions")),g?p?p.p(e,t):(p=lt(e),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},i:e,o:e,d(e){e&&w(n),p&&p.d(),a=!1,u()}}}function at(e,t,n){let{appLang:i="en"}=t,{modules:o=[]}=t,{witness:s={}}=t,{currentRegionId:r}=t,{baseUrl:l}=t;return e.$$set=e=>{"appLang"in e&&n(0,i=e.appLang),"modules"in e&&n(1,o=e.modules),"witness"in e&&n(3,s=e.witness),"currentRegionId"in e&&n(4,r=e.currentRegionId),"baseUrl"in e&&n(5,l=e.baseUrl)},[i,o,async function(){const e=window.location.origin;let t=`${e}/witness/${s.id}/regions/add`;if(1===s.regions.length||r){const n=r||s.regions[0];t=`${e}/witness/${s.id}/regions/${n}/add`}const n=await ke((()=>fetch(t,{method:"POST",headers:{"X-CSRFToken":CSRF_TOKEN}})));if(!n.ok)throw await Ee(`Failed to create regions: '${n.statusText}'`,"Error"),new Error(`Failed to create regions: '${n.statusText}'`);let i;try{i=await n.json()}catch(e){throw await Ee(`Failed to parse JSON response: '${e}'`,"Error"),new Error(`Failed to parse JSON response: '${e}'`)}console.log(i),i.hasOwnProperty("mirador_url")&&window.open(i.mirador_url),i.hasOwnProperty("regions_id")&&(window.location.href=`${l.split("regions/")[0]}regions/${i.regions_id}`)},s,r,l]}class ut extends $e{constructor(e){super(),he(this,e,at,ct,r,{appLang:0,modules:1,witness:3,currentRegionId:4,baseUrl:5})}}function dt(e,t,n){const i=e.slice();return i[5]=t[n],i}function ft(e){let t,n=e[0].regions,i=[];for(let t=0;t<n.length;t+=1)i[t]=pt(dt(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=O()},m(e,n){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,n);y(e,t,n)},p(e,o){if(5&o){let s;for(n=e[0].regions,s=0;s<n.length;s+=1){const r=dt(e,n,s);i[s]?i[s].p(r,o):(i[s]=pt(r),i[s].c(),i[s].m(t.parentNode,t))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(e){k(i,e),e&&w(t)}}}function gt(e){let t,n,i,o,s="en"===e[1]?"Delete regions record":"Supprimer l'intégralité des régions";return{c(){t=x("button"),n=E(s),C(t,"class","tag is-danger")},m(s,r){y(s,t,r),$(t,n),i||(o=R(t,"click",e[4]),i=!0)},p(e,t){2&t&&s!==(s="en"===e[1]?"Delete regions record":"Supprimer l'intégralité des régions")&&_(n,s)},d(e){e&&w(t),i=!1,o()}}}function pt(e){let t,n,i,o,s=e[5]+"";return{c(){t=x("a"),n=E("Regions #"),i=E(s),C(t,"href",o=""+(e[2]+e[5])),C(t,"class","tag is-dark mr-3 is-rounded")},m(e,o){y(e,t,o),$(t,n),$(t,i)},p(e,n){1&n&&s!==(s=e[5]+"")&&_(i,s),5&n&&o!==(o=""+(e[2]+e[5]))&&C(t,"href",o)},d(e){e&&w(t)}}}function mt(t){let n;function i(e,t){return e[3]?gt:ft}let o=i(t),s=o(t);return{c(){n=x("div"),s.c(),C(n,"class","is-right")},m(e,t){y(e,n,t),s.m(n,null)},p(e,[t]){o===(o=i(e))&&s?s.p(e,t):(s.d(1),s=o(e),s&&(s.c(),s.m(n,null)))},i:e,o:e,d(e){e&&w(n),s.d()}}}function ht(e,t,n){let{witness:i}=t,{appLang:o="en"}=t,{baseUrl:s=`${window.location.origin}${window.location.pathname}`}=t,{currentRegionId:r}=t;return e.$$set=e=>{"witness"in e&&n(0,i=e.witness),"appLang"in e&&n(1,o=e.appLang),"baseUrl"in e&&n(2,s=e.baseUrl),"currentRegionId"in e&&n(3,r=e.currentRegionId)},[i,o,s,r,async function(){if(!await Ee("en"===o?"Are you sure you want to delete this record?":"Voulez-vous vraiment supprimer cet enregistrement?","en"===o?"Confirm deletion":"Confirmer la suppression",!0))return;if("number"!=typeof r)throw new Error("Invalid region ID");const e=`${window.location.origin}/regions/${r}/delete`;try{const t=await ke((()=>fetch(e,{method:"DELETE",headers:{"X-CSRFToken":CSRF_TOKEN}})));if(204!==t.status)throw new Error(`Failed to delete regions: '${t.statusText}'`);window.location.href=`${s.split("regions/")[0]}regions/`}catch(e){console.error(e)}}]}class $t extends $e{constructor(e){super(),he(this,e,ht,mt,r,{witness:0,appLang:1,baseUrl:2,currentRegionId:3})}}function bt(e){let t;return{c(){t=L("path"),C(t,"d","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"),C(t,"class","svelte-1dknt99")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function vt(e){let t;return{c(){t=L("path"),C(t,"d","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"),C(t,"class","svelte-1dknt99")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function yt(e){let t,n="en"===e[0]?"Edit":"Modifier";return{c(){t=E(n)},m(e,n){y(e,t,n)},p(e,i){1&i&&n!==(n="en"===e[0]?"Edit":"Modifier")&&_(t,n)},d(e){e&&w(t)}}}function wt(e){let t,n="en"===e[0]?"Validate":"Valider";return{c(){t=E(n)},m(e,n){y(e,t,n)},p(e,i){1&i&&n!==(n="en"===e[0]?"Validate":"Valider")&&_(t,n)},d(e){e&&w(t)}}}function kt(e){let t;return{c(){t=L("path"),C(t,"d","m10.6 16.2l7.05-7.05l-1.4-1.4l-5.65 5.65l-2.85-2.85l-1.4 1.4zM5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21z"),C(t,"class","svelte-1dknt99")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function xt(e){let t;return{c(){t=L("path"),C(t,"d","m10.6 16.2l7.05-7.05l-1.4-1.4l-5.65 5.65l-2.85-2.85l-1.4 1.4zM5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5H5zM5 5v14z"),C(t,"class","svelte-1dknt99")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function Lt(e){let t,n,i,s,r,l,c,a,u,d,f,g,p,m,h,b,v,k="en"===e[0]?"Reload":"Recharger",L="en"===e[0]?"Go to editor":"Aller à l'éditeur",O="en"===e[0]?"Delete selected regions":"Supprimer les régions sélectionnées";return{c(){t=x("button"),n=x("i"),i=S(),s=E(k),r=S(),l=x("a"),c=x("i"),a=S(),u=E(L),f=S(),g=x("button"),p=x("i"),m=S(),h=E(O),C(n,"class","fa-solid fa-rotate-right"),C(t,"class","tag is-link is-light is-rounded mr-3"),C(c,"class","fa-solid fa-edit"),C(l,"class","tag is-link is-rounded mr-3"),C(l,"href",d=Le(e[1])),C(l,"target","_blank"),C(p,"class","fa-solid fa-trash"),C(g,"class","tag is-danger is-rounded")},m(o,d){y(o,t,d),$(t,n),$(t,i),$(t,s),y(o,r,d),y(o,l,d),$(l,c),$(l,a),$(l,u),y(o,f,d),y(o,g,d),$(g,p),$(g,m),$(g,h),b||(v=[R(t,"click",e[18]),R(g,"click",e[8])],b=!0)},p(e,t){1&t&&k!==(k="en"===e[0]?"Reload":"Recharger")&&_(s,k),1&t&&L!==(L="en"===e[0]?"Go to editor":"Aller à l'éditeur")&&_(u,L),2&t&&d!==(d=Le(e[1]))&&C(l,"href",d),1&t&&O!==(O="en"===e[0]?"Delete selected regions":"Supprimer les régions sélectionnées")&&_(h,O)},d(e){e&&w(t),e&&w(r),e&&w(l),e&&w(f),e&&w(g),b=!1,o(v)}}}function Et(t){let n,i,s,r,l,c,a,u,d,f,g,p,m,h,b,v,k,O,P,I,T,j="en"===t[0]?"Select all":"Tout sélectionner",A="en"===t[0]?"Download":"Télécharger";function V(e,t){return e[3]?vt:bt}let N=V(t),z=N(t);function M(e,t){return e[3]?wt:yt}let q=M(t),U=q(t);function H(e,t){return e[2]?xt:kt}let D=H(t),B=D(t),F=t[3]&&Lt(t);return{c(){n=x("div"),i=x("button"),s=L("svg"),z.c(),r=S(),U.c(),c=S(),a=x("button"),B.c(),u=S(),d=x("i"),f=S(),g=x("span"),p=E(j),m=S(),h=x("button"),b=x("i"),v=S(),k=E(A),O=S(),P=x("div"),F&&F.c(),C(s,"xmlns","http://www.w3.org/2000/svg"),C(s,"viewBox","0 0 384 512"),C(s,"class","pr-3"),C(i,"class",l="button "+(t[3]?"is-success":"is-link")+" mr-3"),C(d,"class","fa-solid fa-square-check"),C(g,"id","all-selection"),C(a,"class","button is-link is-light mr-3"),C(b,"class","fa-solid fa-download"),C(h,"class","button is-link is-light"),C(n,"class","is-left mb-3"),C(P,"class","edit-action is-left svelte-1dknt99")},m(e,o){y(e,n,o),$(n,i),$(i,s),z.m(s,null),$(i,r),U.m(i,null),$(n,c),$(n,a),B.m(a,null),$(a,u),$(a,d),$(a,f),$(a,g),$(g,p),$(n,m),$(n,h),$(h,b),$(h,v),$(h,k),y(e,O,o),y(e,P,o),F&&F.m(P,null),I||(T=[R(i,"click",t[17]),R(a,"click",t[9]),R(h,"click",t[10])],I=!0)},p(e,[t]){N!==(N=V(e))&&(z.d(1),z=N(e),z&&(z.c(),z.m(s,null))),q===(q=M(e))&&U?U.p(e,t):(U.d(1),U=q(e),U&&(U.c(),U.m(i,null))),8&t&&l!==(l="button "+(e[3]?"is-success":"is-link")+" mr-3")&&C(i,"class",l),D!==(D=H(e))&&(B.d(1),B=D(e),B&&(B.c(),B.m(a,u))),1&t&&j!==(j="en"===e[0]?"Select all":"Tout sélectionner")&&_(p,j),1&t&&A!==(A="en"===e[0]?"Download":"Télécharger")&&_(k,A),e[3]?F?F.p(e,t):(F=Lt(e),F.c(),F.m(P,null)):F&&(F.d(1),F=null)},i:e,o:e,d(e){e&&w(n),z.d(),U.d(),B.d(),e&&w(O),e&&w(P),F&&F.d(),I=!1,o(T)}}}async function St(e){const t=SAS_APP_URL.replace("https","http"),n=`${SAS_APP_URL}/annotation/destroy?uri=${t}/annotation/${e}`,i=await fetch(n,{method:"DELETE"});if(204!==i.status)throw new Error(`Failed to delete ${n} due to ${i.status}: '${i.statusText}'`)}function Ot(e,t,n){let i,o,s,r,l,c,a;const{selected:d,nbSelected:f}=Oe;u(e,d,(e=>n(14,l=e))),u(e,f,(e=>n(16,a=e)));const{allRegions:g}=Re;u(e,g,(e=>n(15,c=e)));let{appLang:p}=t,{manifest:m}=t,{isValidated:h}=t,{regionsType:$}=t;function b(){n(3,o=!o)}return e.$$set=e=>{"appLang"in e&&n(0,p=e.appLang),"manifest"in e&&n(1,m=e.manifest),"isValidated"in e&&n(11,h=e.isValidated),"regionsType"in e&&n(12,$=e.regionsType)},e.$$.update=()=>{65536&e.$$.dirty&&n(13,i=a(!0)),2048&e.$$.dirty&&n(3,o=!h),16384&e.$$.dirty&&(s=l(!0)),40960&e.$$.dirty&&n(2,r=i>=Object.keys(c).length)},[p,m,r,o,d,f,g,b,async function(){if(await Ee("en"===p?"Are you sure you want to delete regions?":"Voulez-vous vraiment supprimer les régions?","en"===p?"Confirm deletion":"Confirmer la suppression",!0))for(const e of Object.keys(s))try{if(!c.hasOwnProperty(e))continue;await St(e),Re.remove(e),Oe.remove(e,$)}catch(t){await Ee(`Failed to delete region ${e}: ${t.message}`,"Error")}},function(){r?Oe.removeAll(Object.keys(c),$):Oe.addAll(Object.values(c))},async function(){const e=Object.values(l(!0)).map((e=>e.ref)),t=await ke((()=>fetch(`${window.location.origin}/regions/export`,{method:"POST",headers:{"X-CSRFToken":CSRF_TOKEN},body:JSON.stringify({regionsRef:e})})));!function(e,t){const n=window.URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=`${t}`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),document.body.removeChild(i)}(await t.blob(),"regions.zip")},h,$,i,l,c,a,()=>b(),()=>location.reload()]}class Rt extends $e{constructor(e){super(),he(this,e,Ot,Et,r,{appLang:0,manifest:1,isValidated:11,regionsType:12})}}function Pt(e,t,n){const i=e.slice();return i[32]=t[n][0],i[33]=t[n][1],i}function Ct(e,t,n){const i=e.slice();return i[41]=t[n][0],i[42]=t[n][1],i}function _t(e,t,n){const i=e.slice();return i[37]=t[n],i}function It(e,t,n){const i=e.slice();return i[37]=t[n],i}function Tt(e,t,n){const i=e.slice();return i[47]=t[n][0],i[33]=t[n][1],i}function jt(e){let t,n,i,s,r,l,c=e[33].text+"";function a(){return e[29](e[47])}return{c(){t=x("li"),n=x("a"),i=E(c),s=S(),C(n,"href",null),I(t,"is-active",e[47]===e[11])},m(e,o){y(e,t,o),$(t,n),$(n,i),$(t,s),r||(l=[R(t,"click",a),R(t,"keyup",nn)],r=!0)},p(n,o){e=n,512&o[0]&&c!==(c=e[33].text+"")&&_(i,c),2560&o[0]&&I(t,"is-active",e[47]===e[11])},d(e){e&&w(t),r=!1,o(l)}}}function At(t){let n;return{c(){n=x("div"),n.textContent="tout doux"},m(e,t){y(e,n,t)},p:e,i:e,o:e,d(e){e&&w(n)}}}function Vt(t){let n;return{c(){n=x("div"),n.textContent="tout doux"},m(e,t){y(e,n,t)},p:e,i:e,o:e,d(e){e&&w(n)}}}function Nt(e){let t,n,i,o,s,r;t=new it({props:{nbOfPages:e[4]}});let l={ctx:e,current:null,token:null,hasCatch:!0,pending:Jt,then:qt,catch:Mt,value:36,error:40,blocks:[,,,]};return ce(s=e[15],l),{c(){fe(t.$$.fragment),n=S(),i=x("table"),o=x("tbody"),l.block.c(),C(i,"class","table is-fullwidth")},m(e,s){ge(t,e,s),y(e,n,s),y(e,i,s),$(i,o),l.block.m(o,l.anchor=null),l.mount=()=>o,l.anchor=null,r=!0},p(n,i){e=n;const o={};16&i[0]&&(o.nbOfPages=e[4]),t.$set(o),l.ctx=e,32768&i[0]&&s!==(s=e[15])&&ce(s,l)||ae(l,e,i)},i(e){r||(oe(t.$$.fragment,e),oe(l.block),r=!0)},o(e){se(t.$$.fragment,e);for(let e=0;e<3;e+=1){se(l.blocks[e])}r=!1},d(e){pe(t,e),e&&w(n),e&&w(i),l.block.d(),l.token=null,l=null}}}function zt(e){let t,n,i={ctx:e,current:null,token:null,hasCatch:!0,pending:Qt,then:Kt,catch:Xt,value:36,error:40,blocks:[,,,]};return ce(e[19],i),{c(){t=x("div"),i.block.c(),C(t,"class","grid is-gap-2")},m(e,o){y(e,t,o),i.block.m(t,i.anchor=null),i.mount=()=>t,i.anchor=null,n=!0},p(t,n){ae(i,e=t,n)},i(e){n||(oe(i.block),n=!0)},o(e){for(let e=0;e<3;e+=1){se(i.blocks[e])}n=!1},d(e){e&&w(t),i.block.d(),i.token=null,i=null}}}function Mt(t){let n,i,o,s=t[40]+"";return{c(){n=x("tr"),i=E("Error when retrieving paginated regions: "),o=E(s)},m(e,t){y(e,n,t),$(n,i),$(n,o)},p(e,t){32768&t[0]&&s!==(s=e[40]+"")&&_(o,s)},i:e,o:e,d(e){e&&w(n)}}}function qt(e){let t,n,i,o,s;const r=[Ht,Ut],l=[];function c(e,n){return 65536&n[0]&&(t=null),null==t&&(t=!!(Object.values(e[16]).length>0)),t?0:1}return n=c(e,[-1,-1]),i=l[n]=r[n](e),{c(){i.c(),o=O()},m(e,t){l[n].m(e,t),y(e,o,t),s=!0},p(e,t){let s=n;n=c(e,t),n===s?l[n].p(e,t):(ne(),se(l[s],1,1,(()=>{l[s]=null})),ie(),i=l[n],i?i.p(e,t):(i=l[n]=r[n](e),i.c()),oe(i,1),i.m(o.parentNode,o))},i(e){s||(oe(i),s=!0)},o(e){se(i),s=!1},d(e){l[n].d(e),e&&w(o)}}}function Ut(e){let t,n,i;return n=new ut({props:{appLang:e[1],modules:e[5],witness:e[6]}}),{c(){t=x("tr"),fe(n.$$.fragment)},m(e,o){y(e,t,o),ge(n,t,null),i=!0},p(e,t){const i={};2&t[0]&&(i.appLang=e[1]),32&t[0]&&(i.modules=e[5]),64&t[0]&&(i.witness=e[6]),n.$set(i)},i(e){i||(oe(n.$$.fragment,e),i=!0)},o(e){se(n.$$.fragment,e),i=!1},d(e){e&&w(t),pe(n)}}}function Ht(e){let t,n,i=Object.entries(e[16]),o=[];for(let t=0;t<i.length;t+=1)o[t]=Ft(Ct(e,i,t));const s=e=>se(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=O()},m(e,i){for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,i);y(e,t,i),n=!0},p(e,n){if(50398214&n[0]){let r;for(i=Object.entries(e[16]),r=0;r<i.length;r+=1){const s=Ct(e,i,r);o[r]?(o[r].p(s,n),oe(o[r],1)):(o[r]=Ft(s),o[r].c(),oe(o[r],1),o[r].m(t.parentNode,t))}for(ne(),r=i.length;r<o.length;r+=1)s(r);ie()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)oe(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)se(o[e]);n=!1},d(e){k(o,e),e&&w(t)}}}function Dt(e,t){let n,i,o;return i=new Ue({props:{item:t[37],appLang:t[1],isSquare:!1,isCopied:t[10](t[37])}}),i.$on("copyRef",t[25]),{key:e,first:null,c(){n=O(),fe(i.$$.fragment),this.first=n},m(e,t){y(e,n,t),ge(i,e,t),o=!0},p(e,n){t=e;const o={};65536&n[0]&&(o.item=t[37]),2&n[0]&&(o.appLang=t[1]),66560&n[0]&&(o.isCopied=t[10](t[37])),i.$set(o)},i(e){o||(oe(i.$$.fragment,e),o=!0)},o(e){se(i.$$.fragment,e),o=!1},d(e){e&&w(n),pe(i,e)}}}function Bt(e){let t,n,i=[],o=new Map,s=Object.values(e[42]);const r=e=>e[37].id;for(let t=0;t<s.length;t+=1){let n=_t(e,s,t),l=r(n);o.set(l,i[t]=Dt(l,n))}return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=S()},m(e,o){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,o);y(e,t,o),n=!0},p(e,n){33620994&n[0]&&(s=Object.values(e[42]),ne(),i=de(i,n,r,1,e,s,o,t.parentNode,ue,Dt,t,_t),ie())},i(e){if(!n){for(let e=0;e<s.length;e+=1)oe(i[e]);n=!0}},o(e){for(let e=0;e<i.length;e+=1)se(i[e]);n=!1},d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&w(t)}}}function Ft(e){let t,n;return t=new Ye({props:{canvasImg:e[24](e[41]),canvasNb:e[41],manifest:e[2],$$slots:{default:[Bt]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,i){ge(t,e,i),n=!0},p(e,n){const i={};65536&n[0]&&(i.canvasImg=e[24](e[41])),65536&n[0]&&(i.canvasNb=e[41]),4&n[0]&&(i.manifest=e[2]),66562&n[0]|524288&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){se(t.$$.fragment,e),n=!1},d(e){pe(t,e)}}}function Jt(t){let n,i,o="en"===t[1]?"Retrieving paginated regions...":"Récupération des pages...";return{c(){n=x("tr"),i=E(o),C(n,"class","faded is-center")},m(e,t){y(e,n,t),$(n,i)},p(e,t){2&t[0]&&o!==(o="en"===e[1]?"Retrieving paginated regions...":"Récupération des pages...")&&_(i,o)},i:e,o:e,d(e){e&&w(n)}}}function Xt(t){let n,i,o,s=t[40]+"";return{c(){n=x("tr"),i=E("Error when retrieving regions: "),o=E(s)},m(e,t){y(e,n,t),$(n,i),$(n,o)},p:e,i:e,o:e,d(e){e&&w(n)}}}function Kt(e){let t,n,i=[],o=new Map,s=Object.values(e[14]);const r=e=>e[37].id;for(let t=0;t<s.length;t+=1){let n=It(e,s,t),l=r(n);o.set(l,i[t]=Yt(l,n))}let l=null;return s.length||(l=Gt(e)),{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=O(),l&&l.c()},m(e,o){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,o);y(e,t,o),l&&l.m(e,o),n=!0},p(e,n){46154850&n[0]&&(s=Object.values(e[14]),ne(),i=de(i,n,r,1,e,s,o,t.parentNode,ue,Yt,t,It),ie(),!s.length&&l?l.p(e,n):s.length?l&&(ne(),se(l,1,1,(()=>{l=null})),ie()):(l=Gt(e),l.c(),oe(l,1),l.m(t.parentNode,t)))},i(e){if(!n){for(let e=0;e<s.length;e+=1)oe(i[e]);n=!0}},o(e){for(let e=0;e<i.length;e+=1)se(i[e]);n=!1},d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&w(t),l&&l.d(e)}}}function Gt(e){let t,n;return t=new ut({props:{appLang:e[1],modules:e[5],witness:e[6],currentRegionId:e[23],baseUrl:e[22]}}),{c(){fe(t.$$.fragment)},m(e,i){ge(t,e,i),n=!0},p(e,n){const i={};2&n[0]&&(i.appLang=e[1]),32&n[0]&&(i.modules=e[5]),64&n[0]&&(i.witness=e[6]),t.$set(i)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){se(t.$$.fragment,e),n=!1},d(e){pe(t,e)}}}function Yt(e,t){let n,i,o;return i=new Ue({props:{item:t[37],appLang:t[1],isCopied:t[10](t[37])}}),i.$on("copyRef",t[25]),{key:e,first:null,c(){n=O(),fe(i.$$.fragment),this.first=n},m(e,t){y(e,n,t),ge(i,e,t),o=!0},p(e,n){t=e;const o={};16384&n[0]&&(o.item=t[37]),2&n[0]&&(o.appLang=t[1]),17408&n[0]&&(o.isCopied=t[10](t[37])),i.$set(o)},i(e){o||(oe(i.$$.fragment,e),o=!0)},o(e){se(i.$$.fragment,e),o=!1},d(e){e&&w(n),pe(i,e)}}}function Qt(t){let n,i,o="en"===t[1]?"Retrieving regions...":"Récupération des régions...";return{c(){n=x("tr"),i=E(o),C(n,"class","faded is-center")},m(e,t){y(e,n,t),$(n,i)},p(e,t){2&t[0]&&o!==(o="en"===e[1]?"Retrieving regions...":"Récupération des régions...")&&_(i,o)},i:e,o:e,d(e){e&&w(n)}}}function Wt(e){let t,n,i="en"===e[1]?"No regions in selection":"Aucune région sélectionnée";return{c(){t=x("div"),n=E(i)},m(e,i){y(e,t,i),$(t,n)},p(e,t){2&t[0]&&i!==(i="en"===e[1]?"No regions in selection":"Aucune région sélectionnée")&&_(n,i)},d(e){e&&w(t)}}}function Zt(e){let t,n,i=Object.entries(e[8]),o=[];for(let t=0;t<i.length;t+=1)o[t]=en(Pt(e,i,t));return{c(){t=x("div"),n=x("div");for(let e=0;e<o.length;e+=1)o[e].c();C(n,"class","grid is-gap-2"),C(t,"class","fixed-grid has-6-cols")},m(e,i){y(e,t,i),$(t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(n,null)},p(e,t){if(257&t[0]){let s;for(i=Object.entries(e[8]),s=0;s<i.length;s+=1){const r=Pt(e,i,s);o[s]?o[s].p(r,t):(o[s]=en(r),o[s].c(),o[s].m(n,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=i.length}},d(e){e&&w(t),k(o,e)}}}function en(e){let t,n,i,o,s,r,l,a,u,d,f,g,p,m=e[33].title+"";function h(){return e[30](e[32])}return{c(){t=x("div"),n=x("figure"),i=x("img"),s=S(),r=x("div"),l=x("span"),a=E(m),u=S(),d=x("button"),f=S(),c(i.src,o=xe(e[33].img,e[33].xyhw,"96,"))||C(i,"src",o),C(i,"alt","Extracted region"),C(l,"class","overlay-desc"),C(r,"class","overlay is-center svelte-1fn62g7"),C(n,"class","image is-64x64 card"),C(d,"class","delete region-btn"),C(d,"aria-label","remove from selection"),C(t,"class","selection cell svelte-1fn62g7")},m(e,o){y(e,t,o),$(t,n),$(n,i),$(n,s),$(n,r),$(r,l),$(l,a),$(t,u),$(t,d),$(t,f),g||(p=R(d,"click",h),g=!0)},p(t,n){e=t,256&n[0]&&!c(i.src,o=xe(e[33].img,e[33].xyhw,"96,"))&&C(i,"src",o),256&n[0]&&m!==(m=e[33].title+"")&&_(a,m)},d(e){e&&w(t),g=!1,p()}}}function tn(e){let t,n,i,o,s,r,l,c,a,u,d,f,g,p,m,h,b,v,L,O,R,P,I,T,j,A,V,N,z,M,q,U,H,D,B,F,J,X,K,G="en"===e[1]?"Selected regions":"Regions sélectionnées";t=new Te({props:{visible:e[13]}}),i=new rt({props:{appLang:e[1]}}),s=new Be({props:{selectionLength:e[7],appLang:e[1]}}),u=new $t({props:{appLang:e[1],witness:e[6],baseUrl:e[22],currentRegionId:e[23]}}),g=new Rt({props:{appLang:e[1],manifest:e[2],isValidated:e[3],regionsType:e[0]}});let Y=Object.entries(e[9]),Q=[];for(let t=0;t<Y.length;t+=1)Q[t]=jt(Tt(e,Y,t));const W=[zt,Nt,Vt,At],Z=[];function ee(e,t){return"all"===e[11]?0:"page"===e[11]?1:"similarity"===e[11]?2:"vectorization"===e[11]?3:-1}function te(e,t){return e[12]?Zt:Wt}~(v=ee(e))&&(L=Z[v]=W[v](e));let re=te(e),le=re(e);return X=new Xe({props:{appLang:e[1],isRegion:!0}}),{c(){fe(t.$$.fragment),n=S(),fe(i.$$.fragment),o=S(),fe(s.$$.fragment),r=S(),l=x("div"),c=x("div"),a=x("div"),fe(u.$$.fragment),d=S(),f=x("div"),fe(g.$$.fragment),p=S(),m=x("div"),h=x("ul");for(let e=0;e<Q.length;e+=1)Q[e].c();b=S(),L&&L.c(),O=S(),R=x("div"),P=x("div"),I=S(),T=x("div"),j=x("div"),A=x("div"),V=x("i"),N=S(),z=E(G),M=E("\n                ("),q=E(e[7]),U=E(")"),H=S(),D=x("button"),B=S(),F=x("section"),le.c(),J=S(),fe(X.$$.fragment),C(a,"class","cell is-right is-middle"),C(f,"class","cell"),C(c,"class","actions grid"),C(h,"class","panel-tabs"),C(m,"class","tabs is-centered"),C(l,"id","nav-actions"),C(l,"class","mb-5 svelte-1fn62g7"),C(P,"class","modal-background"),C(V,"class","fa-solid fa-book-bookmark"),C(A,"class","title is-4 mb-0 media-content"),C(D,"class","delete media-left"),C(D,"aria-label","close"),C(j,"class","modal-card-head media mb-0"),C(F,"class","modal-card-body"),C(T,"class","modal-content"),C(R,"id","selection-modal"),C(R,"class","modal fade"),C(R,"tabindex","-1"),C(R,"aria-labelledby","selection-modal-label"),C(R,"aria-hidden","true")},m(e,w){ge(t,e,w),y(e,n,w),ge(i,e,w),y(e,o,w),ge(s,e,w),y(e,r,w),y(e,l,w),$(l,c),$(c,a),ge(u,a,null),$(c,d),$(c,f),ge(g,f,null),$(l,p),$(l,m),$(m,h);for(let e=0;e<Q.length;e+=1)Q[e]&&Q[e].m(h,null);y(e,b,w),~v&&Z[v].m(e,w),y(e,O,w),y(e,R,w),$(R,P),$(R,I),$(R,T),$(T,j),$(j,A),$(A,V),$(A,N),$(A,z),$(A,M),$(A,q),$(A,U),$(j,H),$(j,D),$(T,B),$(T,F),le.m(F,null),$(T,J),ge(X,T,null),K=!0},p(e,n){const o={};8192&n[0]&&(o.visible=e[13]),t.$set(o);const r={};2&n[0]&&(r.appLang=e[1]),i.$set(r);const l={};128&n[0]&&(l.selectionLength=e[7]),2&n[0]&&(l.appLang=e[1]),s.$set(l);const c={};2&n[0]&&(c.appLang=e[1]),64&n[0]&&(c.witness=e[6]),u.$set(c);const a={};if(2&n[0]&&(a.appLang=e[1]),4&n[0]&&(a.manifest=e[2]),8&n[0]&&(a.isValidated=e[3]),g.$set(a),2560&n[0]){let t;for(Y=Object.entries(e[9]),t=0;t<Y.length;t+=1){const i=Tt(e,Y,t);Q[t]?Q[t].p(i,n):(Q[t]=jt(i),Q[t].c(),Q[t].m(h,null))}for(;t<Q.length;t+=1)Q[t].d(1);Q.length=Y.length}let d=v;v=ee(e),v===d?~v&&Z[v].p(e,n):(L&&(ne(),se(Z[d],1,1,(()=>{Z[d]=null})),ie()),~v?(L=Z[v],L?L.p(e,n):(L=Z[v]=W[v](e),L.c()),oe(L,1),L.m(O.parentNode,O)):L=null),(!K||2&n[0])&&G!==(G="en"===e[1]?"Selected regions":"Regions sélectionnées")&&_(z,G),(!K||128&n[0])&&_(q,e[7]),re===(re=te(e))&&le?le.p(e,n):(le.d(1),le=re(e),le&&(le.c(),le.m(F,null)));const f={};2&n[0]&&(f.appLang=e[1]),X.$set(f)},i(e){K||(oe(t.$$.fragment,e),oe(i.$$.fragment,e),oe(s.$$.fragment,e),oe(u.$$.fragment,e),oe(g.$$.fragment,e),oe(L),oe(X.$$.fragment,e),K=!0)},o(e){se(t.$$.fragment,e),se(i.$$.fragment,e),se(s.$$.fragment,e),se(u.$$.fragment,e),se(g.$$.fragment,e),se(L),se(X.$$.fragment,e),K=!1},d(e){pe(t,e),e&&w(n),pe(i,e),e&&w(o),pe(s,e),e&&w(r),e&&w(l),pe(u),pe(g),k(Q,e),e&&w(b),~v&&Z[v].d(e),e&&w(O),e&&w(R),le.d(),pe(X)}}}const nn=()=>null;function on(e,t,n){let i,o,s,r,l,c,a,d,f,g,p;u(e,we,(e=>n(13,d=e)));const{selected:m}=Oe;u(e,m,(e=>n(28,a=e)));const{allRegions:h,fetchAll:$,pageRegions:b,fetchPages:v}=Re;u(e,h,(e=>n(14,f=e))),u(e,b,(e=>n(16,p=e))),u(e,v,(e=>n(15,g=e)));const y="Regions";let{appLang:w="en"}=t,{manifest:k=""}=t,{isValidated:x=!1}=t,{imgPrefix:L=""}=t,{nbOfPages:E=1}=t,{modules:S=[]}=t,{witness:O={}}=t;const R=`${window.location.origin}${window.location.pathname}`,P=parseInt(R.split("regions/")[1].replace("/",""));const C={all:{text:"en"===w?"All regions":"Toutes les régions"},page:{text:"en"===w?"Per page":"Par page"}};S.includes("similarity")&&(C.similarity={text:"en"===w?"Similarity":"Similarité"}),S.includes("vectorization")&&(C.vectorization={text:"en"===w?"Vectorization":"Vectorisation"});return e.$$set=e=>{"appLang"in e&&n(1,w=e.appLang),"manifest"in e&&n(2,k=e.manifest),"isValidated"in e&&n(3,x=e.isValidated),"imgPrefix"in e&&n(26,L=e.imgPrefix),"nbOfPages"in e&&n(4,E=e.nbOfPages),"modules"in e&&n(5,S=e.modules),"witness"in e&&n(6,O=e.witness)},e.$$.update=()=>{268435456&e.$$.dirty[0]&&n(8,i=a(!0)),256&e.$$.dirty[0]&&n(7,o=Object.keys(i).length),128&e.$$.dirty[0]&&n(12,s=o>0),134217728&e.$$.dirty[0]&&n(10,c=e=>l===e.ref)},n(11,r="all"),n(27,l=""),[y,w,k,x,E,S,O,o,i,C,c,r,s,d,f,g,p,m,h,$,b,v,R,P,function(e){return`${L}_${t=e,n=String(E).length+1,t.toString().padStart(n,"0")}`;var t,n},function(e){const{item:t}=e.detail,i=c(t)?"":t.ref;navigator.clipboard.writeText(i),n(27,l=i)},L,l,a,e=>n(11,r=e),e=>Oe.remove(e,y)]}return new class extends $e{constructor(e){super(),he(this,e,on,tn,r,{regionsType:0,appLang:1,manifest:2,isValidated:3,imgPrefix:26,nbOfPages:4,modules:5,witness:6},null,[-1,-1])}get regionsType(){return this.$$.ctx[0]}}({target:document.getElementById("region-list"),props:{witness:witness,regionsType:"Regions",appLang:APP_LANG,modules:ADDITIONAL_MODULES,manifest:manifest,isValidated:isValidated,imgPrefix:imgPrefix,nbOfPages:nbOfPages}})}();
//# sourceMappingURL=regionList.js.map
