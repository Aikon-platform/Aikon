var regionList=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function l(t){t.forEach(n)}function c(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s;function r(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function a(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function u(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}const d="undefined"!=typeof window;let f=d?()=>window.performance.now():()=>Date.now(),p=d?t=>requestAnimationFrame(t):t;const g=new Set;function m(t){g.forEach((e=>{e.c(t)||(g.delete(e),e.f())})),0!==g.size&&p(m)}function h(t,e){t.appendChild(e)}function b(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function $(t){const e=x("style");return function(t,e){h(t.head||t,e),e.sheet}(b(t),e),e.sheet}function v(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode&&t.parentNode.removeChild(t)}function k(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function w(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function L(t){return document.createTextNode(t)}function E(){return L(" ")}function S(){return L("")}function O(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function N(t){return function(e){return e.preventDefault(),t.call(this,e)}}function P(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e,n){t.classList[n?"add":"remove"](e)}function z(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,o,e),l}const j=new Map;let I,V=0;function A(t,e,n,o,l,c,i,s=0){const r=16.666/o;let a="{\n";for(let t=0;t<=1;t+=r){const o=e+(n-e)*c(t);a+=100*t+`%{${i(o,1-o)}}\n`}const u=a+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${s}`,f=b(t),{stylesheet:p,rules:g}=j.get(f)||function(t,e){const n={stylesheet:$(e),rules:{}};return j.set(t,n),n}(f,t);g[d]||(g[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${o}ms linear ${l}ms 1 both`,V+=1,d}function T(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),l=n.length-o.length;l&&(t.style.animation=o.join(", "),V-=l,V||p((()=>{V||(j.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&y(e)})),j.clear())})))}function M(t){I=t}function R(){if(!I)throw new Error("Function called outside component initialization");return I}function B(){const t=R();return(e,n,{cancelable:o=!1}={})=>{const l=t.$$.callbacks[e];if(l){const c=z(e,n,{cancelable:o});return l.slice().forEach((e=>{e.call(t,c)})),!c.defaultPrevented}return!0}}const H=[],D=[];let U=[];const q=[],F=Promise.resolve();let G=!1;function J(t){U.push(t)}const X=new Set;let Y,K=0;function Q(){if(0!==K)return;const t=I;do{try{for(;K<H.length;){const t=H[K];K++,M(t),W(t.$$)}}catch(t){throw H.length=0,K=0,t}for(M(null),H.length=0,K=0;D.length;)D.pop()();for(let t=0;t<U.length;t+=1){const e=U[t];X.has(e)||(X.add(e),e())}U.length=0}while(H.length);for(;q.length;)q.pop()();G=!1,X.clear(),M(t)}function W(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}function Z(t,e,n){t.dispatchEvent(z(`${e?"intro":"outro"}${n}`))}const tt=new Set;let et;function nt(){et={r:0,c:[],p:et}}function ot(){et.r||l(et.c),et=et.p}function lt(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function ct(t,e,n,o){if(t&&t.o){if(tt.has(t))return;tt.add(t),et.c.push((()=>{tt.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}const it={duration:0};function st(n,o,i,s){const r={direction:"both"};let a=o(n,i,r),u=s?0:1,d=null,h=null,b=null;function $(){b&&T(n,b)}function v(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function y(o){const{delay:c=0,duration:i=300,easing:s=e,tick:r=t,css:y}=a||it,k={start:f()+c,b:o};o||(k.group=et,et.r+=1),d||h?h=k:(y&&($(),b=A(n,u,o,i,c,s,y)),o&&r(0,1),d=v(k,i),J((()=>Z(n,o,"start"))),function(t){let e;0===g.size&&p(m),new Promise((n=>{g.add(e={c:t,f:n})}))}((t=>{if(h&&t>h.start&&(d=v(h,i),h=null,Z(n,d.b,"start"),y&&($(),b=A(n,u,d.b,d.duration,0,s,a.css))),d)if(t>=d.end)r(u=d.b,1-u),Z(n,d.b,"end"),h||(d.b?$():--d.group.r||l(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;u=d.a+d.d*s(e/d.duration),r(u,1-u)}return!(!d&&!h)})))}return{run(t){c(a)?(Y||(Y=Promise.resolve(),Y.then((()=>{Y=null}))),Y).then((()=>{a=a(r),y(t)})):y(t)},end(){$(),d=h=null}}}function rt(t,e){const n=e.token={};function o(t,o,l,c){if(e.token!==n)return;e.resolved=c;let i=e.ctx;void 0!==l&&(i=i.slice(),i[l]=c);const s=t&&(e.current=t)(i);let r=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(nt(),ct(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),ot())})):e.block.d(1),s.c(),lt(s,1),s.m(e.mount(),e.anchor),r=!0),e.block=s,e.blocks&&(e.blocks[o]=s),r&&Q()}if(!(l=t)||"object"!=typeof l&&"function"!=typeof l||"function"!=typeof l.then){if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}else{const n=R();if(t.then((t=>{M(n),o(e.then,1,e.value,t),M(null)}),(t=>{if(M(n),o(e.catch,2,e.error,t),M(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}var l}function at(t,e){ct(t,1,1,(()=>{e.delete(t.key)}))}function ut(t,e,n,o,c,i,s,r,a,u,d,f){let p=t.length,g=i.length,m=p;const h={};for(;m--;)h[t[m].key]=m;const b=[],$=new Map,v=new Map,y=[];for(m=g;m--;){const t=f(c,i,m),l=n(t);let r=s.get(l);r?o&&y.push((()=>r.p(t,e))):(r=u(l,t),r.c()),$.set(l,b[m]=r),l in h&&v.set(l,Math.abs(m-h[l]))}const k=new Set,x=new Set;function w(t){lt(t,1),t.m(r,d),s.set(t.key,t),d=t.first,g--}for(;p&&g;){const e=b[g-1],n=t[p-1],o=e.key,l=n.key;e===n?(d=e.first,p--,g--):$.has(l)?!s.has(o)||k.has(o)?w(e):x.has(l)?p--:v.get(o)>v.get(l)?(x.add(o),w(e)):(k.add(l),p--):(a(n,s),p--)}for(;p--;){const e=t[p];$.has(e.key)||a(e,s)}for(;g;)w(b[g-1]);return l(y),b}function dt(t){t&&t.c()}function ft(t,e,o,i){const{fragment:s,after_update:r}=t.$$;s&&s.m(e,o),i||J((()=>{const e=t.$$.on_mount.map(n).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...e):l(e),t.$$.on_mount=[]})),r.forEach(J)}function pt(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];U.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),U=e}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(t,e){-1===t.$$.dirty[0]&&(H.push(t),G||(G=!0,F.then(Q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function mt(e,n,c,i,s,r,a,u=[-1]){const d=I;M(e);const f=e.$$={fragment:null,ctx:[],props:r,update:t,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(f.root);let p=!1;if(f.ctx=c?c(e,n.props||{},((t,n,...o)=>{const l=o.length?o[0]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=l)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](l),p&&gt(e,t)),n})):[],f.update(),p=!0,l(f.before_update),f.fragment=!!i&&i(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(y)}else f.fragment&&f.fragment.c();n.intro&&lt(e.$$.fragment),ft(e,n.target,n.anchor,n.customElement),Q()}M(d)}class ht{$destroy(){pt(this,1),this.$destroy=t}$on(e,n){if(!c(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function bt(t){localStorage.setItem("documentSet",JSON.stringify(t))}function $t(t,e,n){const{[e]:o,...l}=t[n];return t[n]=l,bt(t),t}function vt(t=null,e="full",n="full"){if(!t)return"https://via.placeholder.com/96x96?text=No+Image";if((t=t.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const o=t[t.length-1].includes(",")?t.pop().replace(".jpg",""):e,l=t.join("_").replace(".jpg","");return`${CANTALOUPE_APP_URL??"http://localhost:8182"}/iiif/2/${l}.jpg/${o}/${n}/0/default.jpg`}function yt(t=null,e=1){return`${SAS_APP_URL??"http://localhost:3000"}/index.html?iiif-content=${t}&canvas=${e}`}function kt(t,e=null,n=!1){return new Promise((o=>{if(document.getElementById("msg-modal")){n&&(document.getElementById("modal-footer").hidden=!1),e&&(document.getElementById("modal-title").textContent=e),document.getElementById("modal-body").textContent=t,document.getElementById("hidden-msg-btn").click();const l=document.getElementById("cancel-btn"),c=document.getElementById("ok-btn"),i=document.getElementById("modal-bkg"),s=()=>{l.removeEventListener("click",r),i.removeEventListener("click",r),c.removeEventListener("click",a),document.getElementById("modal-footer").hidden=!0},r=()=>{s(),o(!1)},a=()=>{s(),o(!0)};l.addEventListener("click",r),c.addEventListener("click",a)}else n?o(window.confirm(t)):(window.alert(t),o(void 0))}))}const xt=[];function wt(t,{delay:n=0,duration:o=400,easing:l=e}={}){const c=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:l,css:t=>"opacity: "+t*c}}function Lt(t){let e;return{c(){e=w("path"),P(e,"d","M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"),P(e,"class","svelte-l0tzvr")},m(t,n){v(t,e,n)},d(t){t&&y(e)}}}function Et(t){let e;return{c(){e=w("path"),P(e,"d","M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"),P(e,"class","svelte-l0tzvr")},m(t,n){v(t,e,n)},d(t){t&&y(e)}}}function St(t){let e,n="en"===t[3]?"Copy ID":"Copier l'ID";return{c(){e=L(n)},m(t,n){v(t,e,n)},p(t,o){8&o&&n!==(n="en"===t[3]?"Copy ID":"Copier l'ID")&&C(e,n)},d(t){t&&y(e)}}}function Ot(t){let e,n="en"===t[3]?"Copied!":"Copié !";return{c(){e=L(n)},m(t,n){v(t,e,n)},p(t,o){8&o&&n!==(n="en"===t[3]?"Copied!":"Copié !")&&C(e,n)},d(t){t&&y(e)}}}function Nt(t){let e,n,o,c,i,s,a,u,d,f,p,g,m,b,$,k,S,N,_=t[0].title+"";function z(t,e){return t[2]?Et:Lt}let j=z(t),I=j(t);function V(t,e){return t[2]?Ot:St}let A=V(t),T=A(t);return{c(){e=x("div"),n=x("figure"),o=x("img"),i=E(),s=x("div"),a=x("span"),u=L(_),d=E(),f=x("button"),p=w("svg"),I.c(),g=E(),m=x("span"),T.c(),r(o.src,c=vt(t[0].img,t[0].xyhw,"96,"))||P(o,"src",c),P(o,"alt","Extracted region"),P(a,"class","overlay-desc"),P(s,"class","overlay is-center svelte-l0tzvr"),P(n,"class","image is-96x96 card svelte-l0tzvr"),P(n,"tabindex","-1"),P(p,"xmlns","http://www.w3.org/2000/svg"),P(p,"viewBox","0 0 384 512"),P(p,"class","svelte-l0tzvr"),P(m,"class","tooltip svelte-l0tzvr"),P(f,"class","button region-btn tag svelte-l0tzvr"),P(e,"class",b="region image is-96x96 is-center "+(t[1]?"checked":"")+" svelte-l0tzvr")},m(l,c){v(l,e,c),h(e,n),h(n,o),h(n,i),h(n,s),h(s,a),h(a,u),h(e,d),h(e,f),h(f,p),I.m(p,null),h(f,g),h(f,m),T.m(m,null),k=!0,S||(N=[O(n,"click",t[6]),O(n,"keyup",Pt),O(f,"click",t[7])],S=!0)},p(t,[n]){(!k||1&n&&!r(o.src,c=vt(t[0].img,t[0].xyhw,"96,")))&&P(o,"src",c),(!k||1&n)&&_!==(_=t[0].title+"")&&C(u,_),j!==(j=z(t))&&(I.d(1),I=j(t),I&&(I.c(),I.m(p,null))),A===(A=V(t))&&T?T.p(t,n):(T.d(1),T=A(t),T&&(T.c(),T.m(m,null))),(!k||2&n&&b!==(b="region image is-96x96 is-center "+(t[1]?"checked":"")+" svelte-l0tzvr"))&&P(e,"class",b)},i(t){k||(J((()=>{k&&($||($=st(e,wt,{duration:500},!0)),$.run(1))})),k=!0)},o(t){$||($=st(e,wt,{duration:500},!1)),$.run(0),k=!1},d(t){t&&y(e),I.d(),T.d(),t&&$&&$.end(),S=!1,l(N)}}}const Pt=()=>null;function Ct(t,e,n){const o=B();let{block:l}=e,{isSelected:c=!1}=e,{isCopied:i=!1}=e,{appLang:s="en"}=e;function r(){o("toggleSelection",{block:l})}function a(){o("copyRef",{block:l})}return t.$$set=t=>{"block"in t&&n(0,l=t.block),"isSelected"in t&&n(1,c=t.isSelected),"isCopied"in t&&n(2,i=t.isCopied),"appLang"in t&&n(3,s=t.appLang)},[l,c,i,s,r,a,()=>r(),()=>a()]}class _t extends ht{constructor(t){super(),mt(this,t,Ct,Nt,i,{block:0,isSelected:1,isCopied:2,appLang:3})}}function zt(e){let n,o,l,c,i,s,r,a,u,d="en"===e[1]?"Selection":"Sélection";return{c(){n=x("div"),o=x("button"),l=x("span"),c=x("i"),i=E(),s=L(d),r=L("\n            ("),a=L(e[0]),u=L(")"),P(c,"class","fa-solid fa-book-bookmark"),P(l,"id","btn-content"),P(o,"id","set-btn"),P(o,"class","button px-5 py-4 is-link js-modal-trigger svelte-hs48f9"),P(o,"data-target","selection-modal"),P(n,"class","set-container svelte-hs48f9")},m(t,e){v(t,n,e),h(n,o),h(o,l),h(l,c),h(l,i),h(l,s),h(l,r),h(l,a),h(l,u)},p(t,[e]){2&e&&d!==(d="en"===t[1]?"Selection":"Sélection")&&C(s,d),1&e&&C(a,t[0])},i:t,o:t,d(t){t&&y(n)}}}function jt(t,e,n){let{selectionLength:o=0}=e,{appLang:l="en"}=e,c=o;return t.$$set=t=>{"selectionLength"in t&&n(0,o=t.selectionLength),"appLang"in t&&n(1,l=t.appLang)},t.$$.update=()=>{if(5&t.$$.dirty&&o!==c){const t=o>c;n(2,c=o);const e=document.getElementById("btn-content");e&&e.animate([{transform:t?"translateY(-7px)":"translateX(-5px)"},{transform:t?"translateY(7px)":"translateX(5px)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[o,l,c]}class It extends ht{constructor(t){super(),mt(this,t,jt,zt,i,{selectionLength:0,appLang:1})}}function Vt(e){let n,o,c,i,s,r,a,u,d,f,p,g="en"===e[0]?"Clear selection":"Vider la sélection",m="en"===e[0]?"Save selection":"Sauvegarder la sélection";return{c(){n=x("footer"),o=x("div"),c=x("button"),i=L(g),s=E(),r=x("button"),a=x("i"),u=E(),d=L(m),P(c,"class","button is-link is-light"),P(a,"class","fa-solid fa-floppy-disk"),P(r,"class","button is-link"),P(o,"class","buttons"),P(n,"class","modal-card-foot is-center")},m(t,l){v(t,n,l),h(n,o),h(o,c),h(c,i),h(o,s),h(o,r),h(r,a),h(r,u),h(r,d),f||(p=[O(c,"click",e[2]),O(r,"click",e[3])],f=!0)},p(t,[e]){1&e&&g!==(g="en"===t[0]?"Clear selection":"Vider la sélection")&&C(i,g),1&e&&m!==(m="en"===t[0]?"Save selection":"Sauvegarder la sélection")&&C(d,m)},i:t,o:t,d(t){t&&y(n),f=!1,l(p)}}}function At(t,e,n){const o=B();function l(t="save"){o("commitSelection",{updateType:t})}let{appLang:c="en"}=e;return t.$$set=t=>{"appLang"in t&&n(0,c=t.appLang)},[c,l,()=>l("clear"),()=>l("save")]}class Tt extends ht{constructor(t){super(),mt(this,t,At,Vt,i,{appLang:0})}}function Mt(t){let e,n,o,l,c,i,s,a,d,f,p,g,m,b,$,k,w,S;const O=t[4].default,N=function(t,e,n,o){if(t){const l=u(t,e,n,o);return t[0](l)}}(O,t,t[3],null);return{c(){var u,h,v,y;e=x("tr"),n=x("th"),o=x("div"),l=x("img"),s=E(),a=x("div"),d=x("a"),f=x("i"),p=L("\n                    Page "),g=L(t[0]),b=E(),$=x("td"),k=x("div"),w=x("div"),N&&N.c(),r(l.src,c=vt(t[1],"full","250,"))||P(l,"src",c),P(l,"alt",i="Canvas "+t[0]),P(l,"class","mb-3 card"),P(f,"class","fa-solid fa-pen-to-square"),P(d,"class","tag px-2 py-1 is-rounded"),P(d,"href",m=yt(t[2],t[0])),P(d,"target","_blank"),P(a,"class","is-center mb-1"),P(o,"class","content-wrapper py-5"),P(n,"class","is-3 center-flex is-narrow"),u=n,h="width",null==(v="260px")?u.style.removeProperty(h):u.style.setProperty(h,v,y?"important":""),P(w,"class","grid is-gap-2"),P(k,"class","fixed-grid has-6-cols"),P($,"class","p-5 is-fullwidth")},m(t,c){v(t,e,c),h(e,n),h(n,o),h(o,l),h(o,s),h(o,a),h(a,d),h(d,f),h(d,p),h(d,g),h(e,b),h(e,$),h($,k),h(k,w),N&&N.m(w,null),S=!0},p(t,[e]){(!S||2&e&&!r(l.src,c=vt(t[1],"full","250,")))&&P(l,"src",c),(!S||1&e&&i!==(i="Canvas "+t[0]))&&P(l,"alt",i),(!S||1&e)&&C(g,t[0]),(!S||5&e&&m!==(m=yt(t[2],t[0])))&&P(d,"href",m),N&&N.p&&(!S||8&e)&&function(t,e,n,o,l,c){if(l){const i=u(e,n,o,c);t.p(i,l)}}(N,O,t,t[3],S?function(t,e,n,o){if(t[2]&&o){const l=t[2](o(n));if(void 0===e.dirty)return l;if("object"==typeof l){const t=[],n=Math.max(e.dirty.length,l.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|l[o];return t}return e.dirty|l}return e.dirty}(O,t[3],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[3]),null)},i(t){S||(lt(N,t),S=!0)},o(t){ct(N,t),S=!1},d(t){t&&y(e),N&&N.d(t)}}}function Rt(t,e,n){let{$$slots:o={},$$scope:l}=e,{canvasNb:c}=e,{canvasImg:i}=e,{manifest:s}=e;return t.$$set=t=>{"canvasNb"in t&&n(0,c=t.canvasNb),"canvasImg"in t&&n(1,i=t.canvasImg),"manifest"in t&&n(2,s=t.manifest),"$$scope"in t&&n(3,l=t.$$scope)},[c,i,s,l,o]}class Bt extends ht{constructor(t){super(),mt(this,t,Rt,Mt,i,{canvasNb:0,canvasImg:1,manifest:2})}}function Ht(t){let e,n,o,l,c,i,s,r,a,u=t[0]>1&&Dt(t),d=t[0]<t[1]&&qt(t);return{c(){e=x("nav"),n=x("ul"),u&&u.c(),o=E(),l=x("li"),c=x("a"),i=L(t[0]),s=E(),d&&d.c(),P(c,"class","pagination-link is-current"),P(c,"href",null),P(n,"class","pagination-list"),P(e,"class","pagination is-centered"),P(e,"aria-label","pagination")},m(f,p){v(f,e,p),h(e,n),u&&u.m(n,null),h(n,o),h(n,l),h(l,c),h(c,i),h(n,s),d&&d.m(n,null),r||(a=O(c,"click",N(t[5])),r=!0)},p(t,e){t[0]>1?u?u.p(t,e):(u=Dt(t),u.c(),u.m(n,o)):u&&(u.d(1),u=null),1&e&&C(i,t[0]),t[0]<t[1]?d?d.p(t,e):(d=qt(t),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(t){t&&y(e),u&&u.d(),d&&d.d(),r=!1,a()}}}function Dt(t){let e,n,o,l,c,i,s=t[0]-1>1&&Ut(t);return{c(){e=x("li"),n=x("a"),n.textContent="1",o=E(),s&&s.c(),l=S(),P(n,"class","pagination-link"),P(n,"href",null)},m(r,a){v(r,e,a),h(e,n),v(r,o,a),s&&s.m(r,a),v(r,l,a),c||(i=O(n,"click",N(t[3])),c=!0)},p(t,e){t[0]-1>1?s?s.p(t,e):(s=Ut(t),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(t){t&&y(e),t&&y(o),s&&s.d(t),t&&y(l),c=!1,i()}}}function Ut(t){let e,n,o,l,c,i,s,r=t[0]-1+"";return{c(){e=x("li"),e.innerHTML='<span class="pagination-ellipsis">…</span>',n=E(),o=x("li"),l=x("a"),c=L(r),P(l,"class","pagination-link"),P(l,"href",null)},m(r,a){v(r,e,a),v(r,n,a),v(r,o,a),h(o,l),h(l,c),i||(s=O(l,"click",N(t[4])),i=!0)},p(t,e){1&e&&r!==(r=t[0]-1+"")&&C(c,r)},d(t){t&&y(e),t&&y(n),t&&y(o),i=!1,s()}}}function qt(t){let e,n,o,l,c,i,s=t[0]+1<t[1]&&Ft(t);return{c(){s&&s.c(),e=E(),n=x("li"),o=x("a"),l=L(t[1]),P(o,"class","pagination-link"),P(o,"href",null)},m(r,a){s&&s.m(r,a),v(r,e,a),v(r,n,a),h(n,o),h(o,l),c||(i=O(o,"click",N(t[7])),c=!0)},p(t,n){t[0]+1<t[1]?s?s.p(t,n):(s=Ft(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),2&n&&C(l,t[1])},d(t){s&&s.d(t),t&&y(e),t&&y(n),c=!1,i()}}}function Ft(t){let e,n,o,l,c,i,s,r=t[0]+1+"";return{c(){e=x("li"),n=x("a"),o=L(r),l=E(),c=x("li"),c.innerHTML='<span class="pagination-ellipsis">…</span>',P(n,"class","pagination-link"),P(n,"href",null)},m(r,a){v(r,e,a),h(e,n),h(n,o),v(r,l,a),v(r,c,a),i||(s=O(n,"click",N(t[6])),i=!0)},p(t,e){1&e&&r!==(r=t[0]+1+"")&&C(o,r)},d(t){t&&y(e),t&&y(l),t&&y(c),i=!1,s()}}}function Gt(e){let n,o=e[1]>1&&Ht(e);return{c(){o&&o.c(),n=S()},m(t,e){o&&o.m(t,e),v(t,n,e)},p(t,[e]){t[1]>1?o?o.p(t,e):(o=Ht(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&y(n)}}}function Jt(t,e,n){const o=B();let{pageNb:l}=e,{maxPage:c}=e;function i(t){o("pageUpdate",{pageNb:t})}return t.$$set=t=>{"pageNb"in t&&n(0,l=t.pageNb),"maxPage"in t&&n(1,c=t.maxPage)},[l,c,i,()=>i(1),()=>i(l-1),()=>i(l),()=>i(l+1),()=>i(c)]}class Xt extends ht{constructor(t){super(),mt(this,t,Jt,Gt,i,{pageNb:0,maxPage:1})}}function Yt(e){let n,o,l,c,i,s,r,a,u,d,f,p,g,m,b,$,k="en"===e[0]?"Cancel":"Annuler";return{c(){n=x("button"),o=E(),l=x("div"),c=x("div"),i=E(),s=x("div"),r=x("div"),r.innerHTML='<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div> \n            <button class="delete media-left" aria-label="close"></button>',a=E(),u=x("section"),d=E(),f=x("footer"),p=x("div"),g=x("button"),m=L(k),b=E(),$=x("button"),$.textContent="OK",P(n,"id","hidden-msg-btn"),P(n,"class","js-modal-trigger"),P(n,"data-target","msg-modal"),n.hidden=!0,P(c,"id","modal-bkg"),P(c,"class","modal-background"),P(r,"class","modal-card-head media mb-0"),P(u,"id","modal-body"),P(u,"class","modal-card-body"),P(g,"id","cancel-btn"),P(g,"class","button is-link is-light"),P($,"id","ok-btn"),P($,"class","button is-link"),P(p,"class","buttons"),P(f,"id","modal-footer"),P(f,"class","modal-card-foot is-center pt-1"),f.hidden=!0,P(s,"class","modal-content"),P(l,"id","msg-modal"),P(l,"class","modal fade"),P(l,"tabindex","-1"),P(l,"aria-labelledby","selection-modal-label"),P(l,"aria-hidden","true")},m(t,e){v(t,n,e),v(t,o,e),v(t,l,e),h(l,c),h(l,i),h(l,s),h(s,r),h(s,a),h(s,u),h(s,d),h(s,f),h(f,p),h(p,g),h(g,m),h(p,b),h(p,$)},p(t,[e]){1&e&&k!==(k="en"===t[0]?"Cancel":"Annuler")&&C(m,k)},i:t,o:t,d(t){t&&y(n),t&&y(o),t&&y(l)}}}function Kt(t,e,n){let{appLang:o="en"}=e;return t.$$set=t=>{"appLang"in t&&n(0,o=t.appLang)},[o]}class Qt extends ht{constructor(t){super(),mt(this,t,Kt,Yt,i,{appLang:0})}}function Wt(t,e,n){const o=t.slice();return o[38]=e[n][0],o[39]=e[n][1],o}function Zt(t,e,n){const o=t.slice();return o[46]=e[n][0],o[47]=e[n][1],o}function te(t,e,n){const o=t.slice();return o[42]=e[n],o}function ee(t,e,n){const o=t.slice();return o[42]=e[n],o}function ne(t,e,n){const o=t.slice();return o[53]=e[n][0],o[39]=e[n][1],o}function oe(t){let e;return{c(){e=w("path"),P(e,"d","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"),P(e,"class","svelte-16efmtz")},m(t,n){v(t,e,n)},d(t){t&&y(e)}}}function le(t){let e;return{c(){e=w("path"),P(e,"d","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"),P(e,"class","svelte-16efmtz")},m(t,n){v(t,e,n)},d(t){t&&y(e)}}}function ce(t){let e,n="en"===t[2]?"Edit":"Modifier";return{c(){e=L(n)},m(t,n){v(t,e,n)},p(t,o){4&o[0]&&n!==(n="en"===t[2]?"Edit":"Modifier")&&C(e,n)},d(t){t&&y(e)}}}function ie(t){let e,n="en"===t[2]?"Validate":"Valider";return{c(){e=L(n)},m(t,n){v(t,e,n)},p(t,o){4&o[0]&&n!==(n="en"===t[2]?"Validate":"Valider")&&C(e,n)},d(t){t&&y(e)}}}function se(t){let e,n,o,c,i,s,r,a,u,d,f,p,g,m,b,$,k,w="en"===t[2]?"Reload":"Recharger",S="en"===t[2]?"Go to editor":"Aller à l'éditeur",N="en"===t[2]?"Delete selected regions":"Supprimer les régions sélectionnées";return{c(){e=x("button"),n=x("i"),o=E(),c=L(w),i=E(),s=x("a"),r=x("i"),a=E(),u=L(S),f=E(),p=x("button"),g=x("i"),m=E(),b=L(N),P(n,"class","fa-solid fa-rotate-right"),P(e,"class","tag is-link is-light is-rounded mr-3"),P(r,"class","fa-solid fa-edit"),P(s,"class","tag is-link is-rounded mr-3"),P(s,"href",d=yt(t[3])),P(s,"target","_blank"),P(g,"class","fa-solid fa-trash"),P(p,"class","tag is-danger is-rounded")},m(l,d){v(l,e,d),h(e,n),h(e,o),h(e,c),v(l,i,d),v(l,s,d),h(s,r),h(s,a),h(s,u),v(l,f,d),v(l,p,d),h(p,g),h(p,m),h(p,b),$||(k=[O(e,"click",t[32]),O(p,"click",t[20])],$=!0)},p(t,e){4&e[0]&&w!==(w="en"===t[2]?"Reload":"Recharger")&&C(c,w),4&e[0]&&S!==(S="en"===t[2]?"Go to editor":"Aller à l'éditeur")&&C(u,S),8&e[0]&&d!==(d=yt(t[3]))&&P(s,"href",d),4&e[0]&&N!==(N="en"===t[2]?"Delete selected regions":"Supprimer les régions sélectionnées")&&C(b,N)},d(t){t&&y(e),t&&y(i),t&&y(s),t&&y(f),t&&y(p),$=!1,l(k)}}}function re(t){let e,n,o,c,i,s,r=t[39].text+"";function a(){return t[33](t[53])}return{c(){e=x("li"),n=x("a"),o=L(r),c=E(),P(n,"href",null),_(e,"is-active",t[53]===t[10])},m(t,l){v(t,e,l),h(e,n),h(n,o),h(e,c),i||(s=[O(e,"click",a),O(e,"keyup",Pe)],i=!0)},p(n,o){t=n,33792&o[0]&&_(e,"is-active",t[53]===t[10])},d(t){t&&y(e),i=!1,l(s)}}}function ae(e){let n;return{c(){n=x("div"),n.textContent="tout doux"},m(t,e){v(t,n,e)},p:t,i:t,o:t,d(t){t&&y(n)}}}function ue(e){let n;return{c(){n=x("div"),n.textContent="tout doux"},m(t,e){v(t,n,e)},p:t,i:t,o:t,d(t){t&&y(n)}}}function de(t){let e,n,o,l,c,i;e=new Xt({props:{pageNb:t[5],maxPage:10}}),e.$on("pageUpdate",t[17]);let s={ctx:t,current:null,token:null,hasCatch:!0,pending:ye,then:ge,catch:pe,value:45,error:52,blocks:[,,,]};return rt(c=t[9],s),{c(){dt(e.$$.fragment),n=E(),o=x("table"),l=x("tbody"),s.block.c(),P(o,"class","table is-fullwidth")},m(t,c){ft(e,t,c),v(t,n,c),v(t,o,c),h(o,l),s.block.m(l,s.anchor=null),s.mount=()=>l,s.anchor=null,i=!0},p(n,o){t=n;const l={};32&o[0]&&(l.pageNb=t[5]),e.$set(l),s.ctx=t,512&o[0]&&c!==(c=t[9])&&rt(c,s)||function(t,e,n){const o=e.slice(),{resolved:l}=t;t.current===t.then&&(o[t.value]=l),t.current===t.catch&&(o[t.error]=l),t.block.p(o,n)}(s,t,o)},i(t){i||(lt(e.$$.fragment,t),lt(s.block),i=!0)},o(t){ct(e.$$.fragment,t);for(let t=0;t<3;t+=1){ct(s.blocks[t])}i=!1},d(t){pt(e,t),t&&y(n),t&&y(o),s.block.d(),s.token=null,s=null}}}function fe(t){let e,n,o=[],l=new Map,c=Object.values(t[0]);const i=t=>t[42].id;for(let e=0;e<c.length;e+=1){let n=ee(t,c,e),s=i(n);l.set(s,o[e]=xe(s,n))}let s=null;return c.length||(s=ke()),{c(){e=x("div");for(let t=0;t<o.length;t+=1)o[t].c();s&&s.c(),P(e,"class","grid is-gap-2")},m(t,l){v(t,e,l);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);s&&s.m(e,null),n=!0},p(t,n){50331845&n[0]&&(c=Object.values(t[0]),nt(),o=ut(o,n,i,1,t,c,l,e,at,xe,null,ee),ot(),c.length?s&&(s.d(1),s=null):s||(s=ke(),s.c(),s.m(e,null)))},i(t){if(!n){for(let t=0;t<c.length;t+=1)lt(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)ct(o[t]);n=!1},d(t){t&&y(e);for(let t=0;t<o.length;t+=1)o[t].d();s&&s.d()}}}function pe(e){let n,o,l,c=e[52]+"";return{c(){n=x("tr"),o=L("Error when retrieving paginated regions: "),l=L(c)},m(t,e){v(t,n,e),h(n,o),h(n,l)},p(t,e){512&e[0]&&c!==(c=t[52]+"")&&C(l,c)},i:t,o:t,d(t){t&&y(n)}}}function ge(t){let e,n,o,l,c;const i=[he,me],s=[];function r(t,n){return 8192&n[0]&&(e=null),null==e&&(e=!!(Object.values(t[13]).length>0)),e?0:1}return n=r(t,[-1,-1]),o=s[n]=i[n](t),{c(){o.c(),l=S()},m(t,e){s[n].m(t,e),v(t,l,e),c=!0},p(t,e){let c=n;n=r(t,e),n===c?s[n].p(t,e):(nt(),ct(s[c],1,1,(()=>{s[c]=null})),ot(),o=s[n],o?o.p(t,e):(o=s[n]=i[n](t),o.c()),lt(o,1),o.m(l.parentNode,l))},i(t){c||(lt(o),c=!0)},o(t){ct(o),c=!1},d(t){s[n].d(t),t&&y(l)}}}function me(e){let n;return{c(){n=x("tr"),n.textContent="NO ANNOTATION"},m(t,e){v(t,n,e)},p:t,i:t,o:t,d(t){t&&y(n)}}}function he(t){let e,n,o=Object.entries(t[13]),l=[];for(let e=0;e<o.length;e+=1)l[e]=ve(Zt(t,o,e));const c=t=>ct(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=S()},m(t,o){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,o);v(t,e,o),n=!0},p(t,n){if(50356428&n[0]){let i;for(o=Object.entries(t[13]),i=0;i<o.length;i+=1){const c=Zt(t,o,i);l[i]?(l[i].p(c,n),lt(l[i],1)):(l[i]=ve(c),l[i].c(),lt(l[i],1),l[i].m(e.parentNode,e))}for(nt(),i=o.length;i<l.length;i+=1)c(i);ot()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)lt(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)ct(l[t]);n=!1},d(t){k(l,t),t&&y(e)}}}function be(t,e){let n,o,l;return o=new _t({props:{block:e[42],appLang:e[2],isSelected:e[7](e[42]),isCopied:e[6](e[42])}}),o.$on("toggleSelection",e[24]),o.$on("copyRef",e[25]),{key:t,first:null,c(){n=S(),dt(o.$$.fragment),this.first=n},m(t,e){v(t,n,e),ft(o,t,e),l=!0},p(t,n){e=t;const l={};8192&n[0]&&(l.block=e[42]),4&n[0]&&(l.appLang=e[2]),8320&n[0]&&(l.isSelected=e[7](e[42])),8256&n[0]&&(l.isCopied=e[6](e[42])),o.$set(l)},i(t){l||(lt(o.$$.fragment,t),l=!0)},o(t){ct(o.$$.fragment,t),l=!1},d(t){t&&y(n),pt(o,t)}}}function $e(t){let e,n,o=[],l=new Map,c=Object.values(t[47]);const i=t=>t[42].id;for(let e=0;e<c.length;e+=1){let n=te(t,c,e),s=i(n);l.set(s,o[e]=be(s,n))}return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=E()},m(t,l){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,l);v(t,e,l),n=!0},p(t,n){50340036&n[0]&&(c=Object.values(t[47]),nt(),o=ut(o,n,i,1,t,c,l,e.parentNode,at,be,e,te),ot())},i(t){if(!n){for(let t=0;t<c.length;t+=1)lt(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)ct(o[t]);n=!1},d(t){for(let e=0;e<o.length;e+=1)o[e].d(t);t&&y(e)}}}function ve(t){let e,n;return e=new Bt({props:{canvasImg:t[14](t[46]),canvasNb:t[46],manifest:t[3],$$slots:{default:[$e]},$$scope:{ctx:t}}}),{c(){dt(e.$$.fragment)},m(t,o){ft(e,t,o),n=!0},p(t,n){const o={};8192&n[0]&&(o.canvasImg=t[14](t[46])),8192&n[0]&&(o.canvasNb=t[46]),8&n[0]&&(o.manifest=t[3]),8388&n[0]|33554432&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){pt(e,t)}}}function ye(e){let n;return{c(){n=x("tr"),n.textContent="Retrieving paginated regions...",P(n,"class","faded is-center")},m(t,e){v(t,n,e)},p:t,i:t,o:t,d(t){t&&y(n)}}}function ke(t){let e;return{c(){e=L("NO ANNOTATION")},m(t,n){v(t,e,n)},d(t){t&&y(e)}}}function xe(t,e){let n,o,l;return o=new _t({props:{block:e[42],appLang:e[2],isSelected:e[7](e[42]),isCopied:e[6](e[42])}}),o.$on("toggleSelection",e[24]),o.$on("copyRef",e[25]),{key:t,first:null,c(){n=S(),dt(o.$$.fragment),this.first=n},m(t,e){v(t,n,e),ft(o,t,e),l=!0},p(t,n){e=t;const l={};1&n[0]&&(l.block=e[42]),4&n[0]&&(l.appLang=e[2]),129&n[0]&&(l.isSelected=e[7](e[42])),65&n[0]&&(l.isCopied=e[6](e[42])),o.$set(l)},i(t){l||(lt(o.$$.fragment,t),l=!0)},o(t){ct(o.$$.fragment,t),l=!1},d(t){t&&y(n),pt(o,t)}}}function we(t){let e,n,o="en"===t[2]?"No regions in selection":"Aucune région sélectionnée";return{c(){e=x("div"),n=L(o)},m(t,o){v(t,e,o),h(e,n)},p(t,e){4&e[0]&&o!==(o="en"===t[2]?"No regions in selection":"Aucune région sélectionnée")&&C(n,o)},d(t){t&&y(e)}}}function Le(t){let e,n,o=Object.entries(t[4][t[1]]),l=[];for(let e=0;e<o.length;e+=1)l[e]=Ee(Wt(t,o,e));return{c(){e=x("div"),n=x("div");for(let t=0;t<l.length;t+=1)l[t].c();P(n,"class","grid is-gap-2"),P(e,"class","fixed-grid has-6-cols")},m(t,o){v(t,e,o),h(e,n);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(n,null)},p(t,e){if(8388626&e[0]){let c;for(o=Object.entries(t[4][t[1]]),c=0;c<o.length;c+=1){const i=Wt(t,o,c);l[c]?l[c].p(i,e):(l[c]=Ee(i),l[c].c(),l[c].m(n,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=o.length}},d(t){t&&y(e),k(l,t)}}}function Ee(t){let e,n,o,l,c,i,s,a,u,d,f,p,g,m=t[39].title+"";function b(){return t[34](t[38])}return{c(){e=x("div"),n=x("figure"),o=x("img"),c=E(),i=x("div"),s=x("span"),a=L(m),u=E(),d=x("button"),f=E(),r(o.src,l=vt(t[39].img,t[39].xyhw,"96,"))||P(o,"src",l),P(o,"alt","Extracted region"),P(s,"class","overlay-desc"),P(i,"class","overlay is-center svelte-16efmtz"),P(n,"class","image is-64x64 card"),P(d,"class","delete region-btn"),P(d,"aria-label","remove from selection"),P(e,"class","selection cell svelte-16efmtz")},m(t,l){v(t,e,l),h(e,n),h(n,o),h(n,c),h(n,i),h(i,s),h(s,a),h(e,u),h(e,d),h(e,f),p||(g=O(d,"click",b),p=!0)},p(e,n){t=e,16&n[0]&&!r(o.src,l=vt(t[39].img,t[39].xyhw,"96,"))&&P(o,"src",l),16&n[0]&&m!==(m=t[39].title+"")&&C(a,m)},d(t){t&&y(e),p=!1,g()}}}function Se(t){let e,n,o,c,i,s,r,a,u,d,f,p,g,m,b,$,S,N,_,z,j,I,V,A,T,M,R,B,H,D,U,q,F,G,J,X,Y,K,Q,W,Z,tt,et,it,st,rt,at,ut,gt,mt,ht,bt="en"===t[2]?"Download":"Télecharger",$t="en"===t[2]?"Selected regions":"Regions sélectionnées";function vt(t,e){return t[8]?le:oe}e=new Qt({props:{appLang:t[2]}}),o=new It({props:{selectionLength:t[12],appLang:t[2]}});let yt=vt(t),kt=yt(t);function xt(t,e){return t[8]?ie:ce}let wt=xt(t),Lt=wt(t),Et=t[8]&&se(t),St=Object.entries(t[15]),Ot=[];for(let e=0;e<St.length;e+=1)Ot[e]=re(ne(t,St,e));const Nt=[fe,de,ue,ae],Pt=[];function Ct(t,e){return"all"===t[10]?0:"page"===t[10]?1:"similarity"===t[10]?2:"vectorization"===t[10]?3:-1}function _t(t,e){return t[11]?Le:we}~(B=Ct(t))&&(H=Pt[B]=Nt[B](t));let zt=_t(t),jt=zt(t);return ut=new Tt({props:{appLang:t[2]}}),ut.$on("commitSelection",t[19]),{c(){dt(e.$$.fragment),n=E(),dt(o.$$.fragment),c=E(),i=x("div"),s=x("div"),r=x("div"),a=x("button"),u=w("svg"),kt.c(),d=E(),Lt.c(),p=E(),g=x("button"),m=x("i"),b=E(),$=x("span"),$.textContent=`${t[21]()}`,S=E(),N=x("button"),_=x("i"),z=E(),j=L(bt),I=E(),V=x("div"),Et&&Et.c(),A=E(),T=x("div"),M=x("ul");for(let t=0;t<Ot.length;t+=1)Ot[t].c();R=E(),H&&H.c(),D=E(),U=x("div"),q=x("div"),F=E(),G=x("div"),J=x("div"),X=x("div"),Y=x("i"),K=E(),Q=L($t),W=L("\n                ("),Z=L(t[12]),tt=L(")"),et=E(),it=x("button"),st=E(),rt=x("section"),jt.c(),at=E(),dt(ut.$$.fragment),P(u,"xmlns","http://www.w3.org/2000/svg"),P(u,"viewBox","0 0 384 512"),P(u,"class","pr-3"),P(a,"class",f="button "+(t[8]?"is-success":"is-link")+" mr-3"),P(m,"class","fa-solid fa-square-check"),P($,"id","all-selection"),P(g,"class","button is-link is-light mr-3"),P(_,"class","fa-solid fa-download"),P(N,"class","button is-link is-light"),P(r,"class","is-left svelte-16efmtz"),P(V,"class","edit-action svelte-16efmtz"),P(s,"class","center-flex actions svelte-16efmtz"),P(M,"class","panel-tabs"),P(T,"class","tabs is-centered"),P(i,"id","nav-actions"),P(i,"class","mb-5 svelte-16efmtz"),P(q,"class","modal-background"),P(Y,"class","fa-solid fa-book-bookmark"),P(X,"class","title is-4 mb-0 media-content"),P(it,"class","delete media-left"),P(it,"aria-label","close"),P(J,"class","modal-card-head media mb-0"),P(rt,"class","modal-card-body"),P(G,"class","modal-content"),P(U,"id","selection-modal"),P(U,"class","modal fade"),P(U,"tabindex","-1"),P(U,"aria-labelledby","selection-modal-label"),P(U,"aria-hidden","true")},m(l,f){ft(e,l,f),v(l,n,f),ft(o,l,f),v(l,c,f),v(l,i,f),h(i,s),h(s,r),h(r,a),h(a,u),kt.m(u,null),h(a,d),Lt.m(a,null),h(r,p),h(r,g),h(g,m),h(g,b),h(g,$),h(r,S),h(r,N),h(N,_),h(N,z),h(N,j),h(s,I),h(s,V),Et&&Et.m(V,null),h(i,A),h(i,T),h(T,M);for(let t=0;t<Ot.length;t+=1)Ot[t]&&Ot[t].m(M,null);v(l,R,f),~B&&Pt[B].m(l,f),v(l,D,f),v(l,U,f),h(U,q),h(U,F),h(U,G),h(G,J),h(J,X),h(X,Y),h(X,K),h(X,Q),h(X,W),h(X,Z),h(X,tt),h(J,et),h(J,it),h(G,st),h(G,rt),jt.m(rt,null),h(G,at),ft(ut,G,null),gt=!0,mt||(ht=[O(a,"click",t[31]),O(g,"click",t[22]),O(N,"click",Ne)],mt=!0)},p(t,n){const l={};4&n[0]&&(l.appLang=t[2]),e.$set(l);const c={};if(4096&n[0]&&(c.selectionLength=t[12]),4&n[0]&&(c.appLang=t[2]),o.$set(c),yt!==(yt=vt(t))&&(kt.d(1),kt=yt(t),kt&&(kt.c(),kt.m(u,null))),wt===(wt=xt(t))&&Lt?Lt.p(t,n):(Lt.d(1),Lt=wt(t),Lt&&(Lt.c(),Lt.m(a,null))),(!gt||256&n[0]&&f!==(f="button "+(t[8]?"is-success":"is-link")+" mr-3"))&&P(a,"class",f),(!gt||4&n[0])&&bt!==(bt="en"===t[2]?"Download":"Télecharger")&&C(j,bt),t[8]?Et?Et.p(t,n):(Et=se(t),Et.c(),Et.m(V,null)):Et&&(Et.d(1),Et=null),33792&n[0]){let e;for(St=Object.entries(t[15]),e=0;e<St.length;e+=1){const o=ne(t,St,e);Ot[e]?Ot[e].p(o,n):(Ot[e]=re(o),Ot[e].c(),Ot[e].m(M,null))}for(;e<Ot.length;e+=1)Ot[e].d(1);Ot.length=St.length}let i=B;B=Ct(t),B===i?~B&&Pt[B].p(t,n):(H&&(nt(),ct(Pt[i],1,1,(()=>{Pt[i]=null})),ot()),~B?(H=Pt[B],H?H.p(t,n):(H=Pt[B]=Nt[B](t),H.c()),lt(H,1),H.m(D.parentNode,D)):H=null),(!gt||4&n[0])&&$t!==($t="en"===t[2]?"Selected regions":"Regions sélectionnées")&&C(Q,$t),(!gt||4096&n[0])&&C(Z,t[12]),zt===(zt=_t(t))&&jt?jt.p(t,n):(jt.d(1),jt=zt(t),jt&&(jt.c(),jt.m(rt,null)));const s={};4&n[0]&&(s.appLang=t[2]),ut.$set(s)},i(t){gt||(lt(e.$$.fragment,t),lt(o.$$.fragment,t),lt(H),lt(ut.$$.fragment,t),gt=!0)},o(t){ct(e.$$.fragment,t),ct(o.$$.fragment,t),ct(H),ct(ut.$$.fragment,t),gt=!1},d(t){pt(e,t),t&&y(n),pt(o,t),t&&y(c),t&&y(i),kt.d(),Lt.d(),Et&&Et.d(),k(Ot,t),t&&y(R),~B&&Pt[B].d(t),t&&y(D),t&&y(U),jt.d(),pt(ut),mt=!1,l(ht)}}}async function Oe(t){const e=SAS_APP_URL.replace("https","http"),n=`${SAS_APP_URL}/annotation/destroy?uri=${e}/annotation/${t}`,o=await fetch(n,{method:"DELETE"});if(204!==o.status)throw new Error(`Failed to delete ${n} due to ${o.status}: '${o.statusText}'`)}const Ne=()=>null,Pe=()=>null;function Ce(e,n,o){let l,c,s,r,u,d,f,p,g,m,h;const b="Regions";let{regions:$={}}=n,{appLang:v="en"}=n,{manifest:y=""}=n,{isValidated:k=!1}=n,{imgPrefix:x=""}=n,{nbOfPages:w=1}=n;let L=JSON.parse(localStorage.getItem("documentSet"))??{};const E={all:{text:"en"===v?"All regions":"Toutes les régions"},page:{text:"en"===v?"Per page":"Par page"},similarity:{text:"en"===v?"Similarity":"Similarité"},vectorization:{text:"en"===v?"Vectorization":"Vectorisation"}},S=function(e,n=t){let o;const l=new Set;function c(t){if(i(e,t)&&(e=t,o)){const t=!xt.length;for(const t of l)t[1](),xt.push(t,e);if(t){for(let t=0;t<xt.length;t+=2)xt[t][0](xt[t+1]);xt.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(i,s=t){const r=[i,s];return l.add(r),1===l.size&&(o=n(c)||t),i(e),()=>{l.delete(r),0===l.size&&o&&(o(),o=null)}}}}({});function O(){o(8,r=!r)}function N(){return Object.keys(L[b]??{}).length===Object.keys($).length}function P(t=null){return null===t&&(t=N()),t?"en"===v?"Unselect all":"Tout désélectionner":"en"===v?"Select all":"Tout sélectionner"}function C(t){o(4,L=$t(L,t,b))}function _(t){o(4,L=function(t,e){return t.hasOwnProperty(e.type)||(t[e.type]={}),t[e.type]={...t[e.type],[e.id]:e},bt(t),t}(L,t))}a(e,S,(t=>o(13,h=t)));return e.$$set=t=>{"regions"in t&&o(0,$=t.regions),"appLang"in t&&o(2,v=t.appLang),"manifest"in t&&o(3,y=t.manifest),"isValidated"in t&&o(26,k=t.isValidated),"imgPrefix"in t&&o(27,x=t.imgPrefix),"nbOfPages"in t&&o(28,w=t.nbOfPages)},e.$$.update=()=>{16&e.$$.dirty[0]&&o(12,l=L.hasOwnProperty(b)?Object.keys(L[b]).length:0),16&e.$$.dirty[0]&&o(7,c=t=>L[b]?.hasOwnProperty(t.id)),16&e.$$.dirty[0]&&o(11,s=Object.keys(L[b]??{}).length>0),67108864&e.$$.dirty[0]&&o(8,r=!k),1073741856&e.$$.dirty[0]&&o(9,p=(async()=>{const t=await fetch(`${d}canvas?p=${f}`),e=await t.json();return S.set(e),e})()),536870912&e.$$.dirty[0]&&o(6,m=t=>g===t.ref)},o(10,u="all"),o(30,d=`${window.location.origin}${window.location.pathname}`),o(5,f=parseInt(new URLSearchParams(window.location.search).get("p")??1)),o(29,g=""),[$,b,v,y,L,f,m,c,r,p,u,s,l,h,function(t){return`${x}_${e=t,n=String(w).length+1,e.toString().padStart(n,"0")}`;var e,n},E,S,function(t){const{pageNb:e}=t.detail;o(5,f=e);const n=new URL(d);n.searchParams.set("p",f),window.history.pushState({},"",n)},O,function(t){const{updateType:e}=t.detail;"clear"===e?o(4,L=function(t,e){return e.forEach((e=>!t.hasOwnProperty(e)||delete t[e])),bt(t),t}(L,[b])):"save"===e&&o(4,L=function(t){return console.log(t),t}(L))},async function(){if(await kt("en"===v?"Are you sure you want to delete regions?":"Voulez-vous vraiment supprimer les régions?","en"===v?"Confirm deletion":"Confirmer la suppression",!0))for(const t of Object.keys(L[b]))try{if(!$.hasOwnProperty(t))continue;await Oe(t),delete $[t],o(0,$={...$}),S.update((e=>{for(const n in e)if(e[n][t]){const{[t]:o,...l}=e[n];return e[n]=l,e}return e})),o(4,L=$t(L,t,b))}catch(e){success=!1,await kt(`Failed to delete region ${t}: ${e.message}`,"Error")}},P,function(){if(N()){const t=Object.keys(L[b]).filter((t=>$.hasOwnProperty(t)));o(4,L=function(t,e,n){return t[n]?(e.forEach((e=>{delete t[n][e]})),bt(t),t):t}(L,t,b)),document.getElementById("all-selection").innerText=P(!1)}else o(4,L=function(t,e){return e.forEach((e=>{t[e.type]||(t[e.type]={}),t[e.type][e.id]=e})),bt(t),t}(L,Object.values($))),document.getElementById("all-selection").innerText=P(!0)},C,function(t){const{block:e}=t.detail;c(e)?C(e.id):_(e)},function(t){const{block:e}=t.detail,n=m(e)?"":e.ref;navigator.clipboard.writeText(n),o(29,g=n)},k,x,w,g,d,()=>O(),()=>location.reload(),t=>o(10,u=t),t=>C(t)]}const _e=(ze="regions-data",document.getElementById(ze)?JSON.parse(document.getElementById(ze).textContent):[]);var ze;return new class extends ht{constructor(t){super(),mt(this,t,Ce,Se,i,{regionsType:1,regions:0,appLang:2,manifest:3,isValidated:26,imgPrefix:27,nbOfPages:28},null,[-1,-1])}get regionsType(){return this.$$.ctx[1]}}({target:document.getElementById("region-list"),props:{regions:_e,regionsType:"Regions",appLang:APP_LANG,manifest:manifest,isValidated:isValidated,imgPrefix:imgPrefix,nbOfPages:nbOfPages}})}();
//# sourceMappingURL=regionList.js.map
