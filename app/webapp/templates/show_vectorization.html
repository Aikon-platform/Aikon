{% extends "admin/base_site.html" %}

{% load static %}

{% block title %}{{ anno }}{% endblock %}

{% block extrahead %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/tools.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css" rel="stylesheet">

    <style>
.grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
    grid-gap: 20px;
}

.grid-item img {
    width: auto;
    max-height: 300px;
    display: block;
}

.hidden {
    display: none;
}

.btn-change {
    background-color: rgb(157, 157, 224);
    color: white;
    display: inline-block;
    font-weight: 400;
    font-size: 16px;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    border: 1px solid transparent;
    padding: .3rem .7rem;
    margin: 5px 5px;
    line-height: 1.5;
    border-radius: .25rem;
    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}

.btn-change:hover {
    background-color: rgb(41, 36, 89);
}

/*.img-overlay-wrap {
    position: relative;
    display: inline-block; /* container -> taille de l'image
    transition: transform 150ms ease-in-out;
  }

  .img-overlay-wrap img { pour que ce soit responsive
     display: block;
     max-width: 100%;
     height: auto;
  }

  .img-overlay-wrap svg {
    position: absolute;
    top: 0;
    left: 0;
  }*/

  .rectangle {
    position: absolute;
    border: 2px solid red; /* Couleur et Ã©paisseur de la bordure du rectangle */
    background-color: rgba(255, 0, 0, 0.2); /* Couleur de fond semi-transparente du rectangle */
}
    </style>

{% endblock %}

{% block header %}
    <div class="toolbar">
        <div class="title">
            <b>{{ anno|capfirst }}</b>
        </div>
        <div style="display: flex; flex-direction: row;">
            <a href="{% url 'show-all-annotations' anno_ref=anno_ref %}" target="_blank">
                <button class="btn-change" type="submit">
                    <i class="bi bi-eye"></i>
                    {% if APP_LANG == "en" %}
                        Visualize all
                    {% else %}
                        Voir toutes les
                    {% endif %}
                    annotations
                </button>
            </a>
        </div>
    </div>
{% endblock %}

{% block content %}

<div style="margin-top: 3%;">
    <div class="grid-container">
        {% for canvas_nb, coord, img_file in all_crops %}
            {% for coords, id in coord %}
                <div class="grid-item">
                    <div style="display: flex; flex-direction: row;">
                        {% with small=coords|add:'/full/0' %}
                            <a href="{{ img_file|img_to_iiif:small }}" target="_blank"></a>
                                <img src="{{ img_file|img_to_iiif:small }}" class="img-fluid" alt="{{ img_file }}" style="margin-right: 10px;">
                            </a>
                        {% endwith %}
                        <img src="{% get_media_prefix %}svg/{{ img_file|jpg_to_none }}_{{ coords }}.svg" class="img-fluid" alt="{{ img_file|jpg_to_none }}_{{ coords }}.svg">
                    </div>
                </div>
            {% endfor %}
        {% endfor %}
    </div>
</div>

{% endblock %}
