{% extends "admin/base_site.html" %}

{% load static %}

{% block title %}{{ anno }}{% endblock %}

{% block extrahead %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/tools.css' %}">
{% endblock %}

{% block header %}
    <div class="toolbar">
        <div class="title">
            <b>{{ anno|capfirst }}</b>
        </div>
        <div style="display: flex; flex-direction: row;">
            <a href="{% url 'show-all-annotations' anno_ref=anno_ref %}" target="_blank">
                <button class="export-button" type="submit">
                    <i class="fa-solid fa-eye"></i>
                    {% if APP_LANG == "en" %}
                        Visualize all
                    {% else %}
                        Voir toutes les
                    {% endif %}
                    annotations
                </button>
            </a>
        </div>
    </div>
{% endblock %}

{% block content %}

<div style="margin-top: 5%;">
    <div class="grid-container">
        {% for canvas_nb, coord, img_file in all_crops %}
            {% for coords, id in coord %}
                <div class="grid-item">
                    <div style="display: flex; flex-direction: row;">
                        {% with small=coords|add:'/full/0' %}
                            <a href="{{ img_file|img_to_iiif:small }}" target="_blank">
                                <img src="{{ img_file|img_to_iiif:small }}" class="img-fluid" alt="{{ img_file }}" style="margin-right: 10px;">
                            </a>
                        {% endwith %}
                        {% with img_file|jpg_to_none as img %}
                            {% with img|add:"_"|add:coords|add:".svg" as svg %}
                                {% if svg|file_exists %}
                                    <img src="{{ image_path }}" class="img-fluid" alt="{{ img_file|jpg_to_none }}_{{ coords }}.svg">
                                    <a href="{ % url 'img-and-svg' img_name=img_file coords=coord %}" target="_blank">Visualize</a>
                                {% endif %}
                            {%endwith%}
                        {%endwith%}
                        </a>
                        {#<input type="checkbox" name="vecto_checkbox" value="{{ img_file|img_to_iiif:small }}" onchange="updateSelectedImageURLs()">#}
                        <input type="checkbox" name="vecto_checkbox" value="{{ img_file|img_to_iiif }}" onchange="updateSelectedImageURLs()">

                    </div>
                    <h3><a href="{{ img_file|img_to_iiif }}" target="_blank">Page {{ canvas_nb }}</a></h3>
                </div>
            {% endfor %}
        {% endfor %}
    </div>
</div>

{% endblock %}
